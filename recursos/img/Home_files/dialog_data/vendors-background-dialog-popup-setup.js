(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(t,e,r){"use strict";function n(t){return function(e){var r=e.dispatch,n=e.getState;return function(e){return function(i){return"function"==typeof i?i(r,n,t):e(i)}}}}var i=n();i.withExtraArgument=n,e.a=i},118:function(t,e,r){"use strict";r.r(e),r.d(e,"isBrowser",(function(){return i}));var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i="object"===("undefined"==typeof window?"undefined":n(window))&&"object"===("undefined"==typeof document?"undefined":n(document))&&9===document.nodeType;e.default=i},193:function(t,e,r){window,t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=70)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setCredentials=e.removeCredentials=e.getCredentials=e.credentialsAllowsPurpose=void 0;const n={};function i(t){return n[t]||null}e.credentialsAllowsPurpose=function(t,e){const{purposes:r}=i(t);return r.includes(e)},e.getCredentials=i,e.removeCredentials=function(t){n[t]=null,delete n[t]},e.setCredentials=function(t,e){n[t]=e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VaultSourceStatus=e.VaultPermission=e.VaultFormatID=e.EntryType=e.EntryPropertyValueType=e.EntryPropertyType=e.EntryChangeType=void 0,function(t){t.Created="created",t.Modified="modified",t.Deleted="deleted"}(e.EntryChangeType||(e.EntryChangeType={})),function(t){t.Attribute="attribute",t.Property="property"}(e.EntryPropertyType||(e.EntryPropertyType={})),function(t){t.Note="note",t.OTP="otp",t.Password="password",t.Text="text"}(e.EntryPropertyValueType||(e.EntryPropertyValueType={})),function(t){t.CreditCard="credit_card",t.Login="login",t.Note="note",t.SSHKey="ssh_key",t.Website="website"}(e.EntryType||(e.EntryType={})),function(t){t.A="a",t.B="b"}(e.VaultFormatID||(e.VaultFormatID={})),function(t){t.Manage="archive/member/manage",t.Read="archive/member/read",t.Write="archive/member/write"}(e.VaultPermission||(e.VaultPermission={})),function(t){t.Locked="locked",t.Pending="pending",t.Unlocked="unlocked"}(e.VaultSourceStatus||(e.VaultSourceStatus={}))},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.registerDatasourcePostProcessor=e.registerDatasource=e.prepareDatasourceCredentials=e.fireInstantiationHandlers=e.credentialsToDatasource=void 0;const i=r(0),o=n(r(12)),s={},a={},u=[];function c(t,e=null){const{data:{datasource:r},masterPassword:n}=i.getCredentials(t.id),s=e||r.type||"",{open:u=!1}=a[s]||{};if(!u)return t;const c=o.default.fromCredentials(t,n);return i.getCredentials(c.id).open=!0,c}e.credentialsToDatasource=function(t){const{datasource:e}=i.getCredentials(t.id).data;if(!e)throw new Error("No datasource configuration in credentials");const{type:r}=e;if(!r)throw new Error("No datasource type specified in datasource configuration");const n=s[r];if(!n)throw new Error("No datasource found for type: "+r);return new n(c(t))},e.fireInstantiationHandlers=function(t,e){u.forEach(r=>{try{r(t,e)}catch(t){console.error("Failed executing a datasource instantiation handler for a datasource"),console.error(t)}})},e.prepareDatasourceCredentials=c,e.registerDatasource=function(t,e,r={}){if(s[t])throw new Error("Datasource already registered for type: "+t);s[t]=e,a[t]=r},e.registerDatasourcePostProcessor=function(t){return u.push(t),{remove:()=>{const e=u.indexOf(t);e>=0&&u.splice(e,1)}}}},function(t,e,r){"use strict";var n=r(13),i=r(92);function o(t,e){return 55296==(64512&t.charCodeAt(e))&&!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1))}function s(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function u(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=i,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=63&s|128):o(t,i)?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++i)),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=63&s|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=63&s|128)}else for(i=0;i<t.length;i++)r[i]=0|t[i];return r},e.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=a(t[r].toString(16));return e},e.htonl=s,e.toHex32=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];"little"===e&&(i=s(i)),r+=u(i.toString(16))}return r},e.zero2=a,e.zero8=u,e.join32=function(t,e,r,i){var o=r-e;n(o%4==0);for(var s=new Array(o/4),a=0,u=e;a<s.length;a++,u+=4){var c;c="big"===i?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],s[a]=c>>>0}return s},e.split32=function(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];"big"===e?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,r){return t+e+r>>>0},e.sum32_4=function(t,e,r,n){return t+e+r+n>>>0},e.sum32_5=function(t,e,r,n,i){return t+e+r+n+i>>>0},e.sum64=function(t,e,r,n){var i=t[e],o=n+t[e+1]>>>0,s=(o<n?1:0)+r+i;t[e]=s>>>0,t[e+1]=o},e.sum64_hi=function(t,e,r,n){return(e+n>>>0<e?1:0)+t+r>>>0},e.sum64_lo=function(t,e,r,n){return e+n>>>0},e.sum64_4_hi=function(t,e,r,n,i,o,s,a){var u=0,c=e;return u+=(c=c+n>>>0)<e?1:0,u+=(c=c+o>>>0)<o?1:0,t+r+i+s+(u+=(c=c+a>>>0)<a?1:0)>>>0},e.sum64_4_lo=function(t,e,r,n,i,o,s,a){return e+n+o+a>>>0},e.sum64_5_hi=function(t,e,r,n,i,o,s,a,u,c){var l=0,h=e;return l+=(h=h+n>>>0)<e?1:0,l+=(h=h+o>>>0)<o?1:0,l+=(h=h+a>>>0)<a?1:0,t+r+i+s+u+(l+=(h=h+c>>>0)<c?1:0)>>>0},e.sum64_5_lo=function(t,e,r,n,i,o,s,a,u,c){return e+n+o+a+c>>>0},e.rotr64_hi=function(t,e,r){return(e<<32-r|t>>>r)>>>0},e.rotr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},e.shr64_hi=function(t,e,r){return t>>>r},e.shr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateUUID=void 0;const n=r(31);e.generateUUID=function(){return n.v4()}},function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)i(r,n)&&(t[n]=r[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,s;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(s=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)o=t[e],s.set(o,i),i+=o.length;return s}},s={arraySet:function(t,e,r,n,i){for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(n)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(32);Object.defineProperty(e,"getSharedAppEnv",{enumerable:!0,get:function(){return n.getSharedAppEnv}})},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(r(9)),s=i(r(91)),a=i(r(12)),u=r(0),c=r(16),l=r(2);class h extends o.default{constructor(t){super(),this._credentials=t,this._credentials.restrictPurposes([a.default.PURPOSE_SECURE_EXPORT]),this._content="";try{const{data:e}=u.getCredentials(t.id),{datasource:r={}}=e||{},{content:n=""}=r;this._content=n}catch(t){}this.type="text",l.fireInstantiationHandlers("text",this)}get credentials(){return this._credentials}get hasContent(){return this._content&&this._content.length>0}changePassword(t,e){return n(this,void 0,void 0,(function*(){throw new Error("Changing password not supported")}))}getAttachment(t,e){return Promise.reject(new Error("Attachments not supported"))}getAvailableStorage(){return Promise.resolve(null)}getTotalStorage(){return Promise.resolve(null)}getID(){const t="text"===this.type?this._content:this.toString();if(!t)throw new Error("Failed getting ID: Datasource requires content for ID generation");return s.default.sha256().update(t).digest("hex")}load(t){if(!this._content)return Promise.reject(new Error("Failed to load vault: Content is empty"));if(!0!==u.credentialsAllowsPurpose(t.id,a.default.PURPOSE_DECRYPT_VAULT))return Promise.reject(new Error("Provided credentials don't allow vault decryption"));const e=c.detectFormat(this._content);return e.parseEncrypted(this._content,t).then(t=>({Format:e,history:t}))}putAttachment(t,e,r,n){return Promise.reject(new Error("Attachments not supported"))}removeAttachment(t,e){return Promise.reject(new Error("Attachments not supported"))}save(t,e){return n(this,void 0,void 0,(function*(){if(!0!==u.credentialsAllowsPurpose(e.id,a.default.PURPOSE_ENCRYPT_VAULT))throw new Error("Unable to save: Provided credentials don't allow vault encryption");if(!t.format)throw new Error("Unable to save: Provided history does not contain a format");return c.getFormatForID(t.format).encodeRaw(t,e)}))}setContent(t){return this._content=t||"",this}supportsAttachments(){return!1}supportsPasswordChange(){return!1}supportsRemoteBypass(){return!1}updateInsights(t){return Promise.resolve()}}e.default=h,l.registerDatasource("text",h)},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(9)),o=r(16),s=r(45),a=r(46),u=n(r(47)),c=n(r(11));let l=(()=>{class t extends i.default{constructor(t=o.getDefaultFormat()){super(),this._entries=[],this._groups=[],this._updateFormat(new t),this.format.initialise(),this._rebuild()}static createFromHistory(e,r=o.getDefaultFormat()){const n=new t(r);return n.format.erase(),n.format.execute(e),n.format.dirty=!1,n.id||n.format.generateID(),n}static createWithDefaults(){const e=new t;return e.createGroup("General"),e.createGroup("Trash").setAttribute(u.default.Attribute.Role,"trash"),e}get format(){return this._format}get id(){return this.format.getVaultID()}get readOnly(){return this.format.readOnly}createGroup(t){const e=u.default.createNew(this);return t&&e.setTitle(t),e}deleteAttribute(t){return this.format.deleteVaultAttribute(t),this}emptyTrash(){const t=this.getTrashGroup();if(t)return t.getGroups().forEach(t=>{t.delete(!0)}),t.getEntries().forEach(t=>{t.delete(!0)}),this}findEntryByID(t){return this._entries.find(e=>e.id===t)||null}findEntriesByProperty(t,e){return a.findEntriesByProperty(this._entries,t,e)}findGroupByID(t){return this._groups.find(e=>e.id===t)||null}findGroupsByTitle(t){return s.findGroupsByTitle(this._groups,t)}getAttribute(t){const e=this.format.getVaultAttributes();return t?e.hasOwnProperty(t)?e[t]:void 0:Object.assign({},e)}getGroups(){return this._groups.filter(t=>null===t.getParentGroup())}getTrashGroup(){return this.getGroups().find(t=>t.isTrash())||null}setAttribute(t,e){return this.format.setVaultAttribute(t,e),this}_rebuild(t=!1){t&&(this._groups=[],this._entries=[]),this.format.getAllGroups().forEach(t=>{const e=this.format.getItemID(t);this._groups.find(t=>t.id===e)||this._groups.push(new u.default(this,t))}),this.format.getAllEntries().forEach(t=>{const e=this.format.getItemID(t);this._entries.find(t=>t.id===e)||this._entries.push(new c.default(this,t))})}_updateFormat(t){this._format&&this._format.removeAllListeners(),this._format=t,this._groups.forEach(t=>{t._updateRefs()}),this._entries.forEach(t=>{t._updateRefs()}),this._rebuild(),this.format.on("commandsExecuted",()=>{this._rebuild(),this.emit("vaultUpdated")}),this.format.on("erased",()=>{this._rebuild(!0),this.emit("vaultUpdated")})}}return t.Attribute=Object.freeze({AttachmentsKey:"BC_ATTACHMENTS_KEY"}),t})();e.default=l},function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function o(){}function s(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function a(t,e,r,n,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new s(r,n||t,o),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],a]:t._events[u].push(a):(t._events[u]=a,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),c.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},c.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,s=new Array(o);n<o;n++)s[n]=r[n].fn;return s},c.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},c.prototype.emit=function(t,e,r,n,o,s){var a=i?i+t:t;if(!this._events[a])return!1;var u,c,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,n),!0;case 5:return l.fn.call(l.context,e,r,n,o),!0;case 6:return l.fn.call(l.context,e,r,n,o,s),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var d,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,r);break;case 4:l[c].fn.call(l[c].context,e,r,n);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];l[c].fn.apply(l[c].context,u)}}return!0},c.prototype.on=function(t,e,r){return a(this,t,e,r,!1)},c.prototype.once=function(t,e,r){return a(this,t,e,r,!0)},c.prototype.removeListener=function(t,e,r,n){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||n&&!s.once||r&&s.context!==r||u(this,o);else{for(var a=0,c=[],l=s.length;a<l;a++)(s[a].fn!==e||n&&!s[a].once||r&&s[a].context!==r)&&c.push(s[a]);c.length?this._events[o]=1===c.length?c[0]:c:u(this,o)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,t.exports=c},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.Layerr=void 0;var o=r(99);Object.defineProperty(e,"Layerr",{enumerable:!0,get:function(){return o.Layerr}}),i(r(101),e)},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(48)),o=r(4),s=r(25),a=r(1);let u=(()=>{class t extends i.default{static createNew(t,e){const r=t.findGroupByID(e);if(!r)throw new Error("Failed creating entry: no group found for ID: "+e);if(r.isTrash()||r.isInTrash())throw new Error("Failed creating entry: cannot create within Trash group");const n=o.generateUUID();return t.format.createEntry(e,n),t._rebuild(),t.findEntryByID(n)}delete(t=!1){const e=this.vault.getTrashGroup(),r=this.getGroup();if(e&&r&&!r.isTrash()&&!r.isInTrash()&&!t)return this.moveToGroup(e),!1;this.vault.format.deleteEntry(this.id);const n=this.vault._entries.indexOf(this);return n>=0&&this.vault._entries.splice(n,1),this._cleanUp(),!0}deleteAttribute(t){return this.vault.format.deleteEntryAttribute(this.id,t),this}deleteProperty(t){return this.vault.format.deleteEntryProperty(this.id,t),this}getAttribute(t){const e=this.vault.format.getEntryAttributes(this._source)||{};return void 0===t?Object.assign({},e):e.hasOwnProperty(t)?e[t]:void 0}getChanges(){return this.vault.format.getEntryChanges(this._source)}getGroup(){const t=this.vault.format.findGroupContainingEntryID(this.id);if(!t)throw new Error("No parent group found for entry: "+this.id);const e=this.vault.format.getItemID(t);return this.vault._groups.find(t=>t.id===e)}getProperty(t){const e=this.vault.format.getEntryProperties(this._source);return void 0===t?Object.assign({},e):e.hasOwnProperty(t)?e[t]:void 0}getProperties(t){const e=this.vault.format.getEntryProperties(this._source);if(void 0===t)return Object.assign({},e);const r=t instanceof RegExp;return Object.keys(e).reduce((n,i)=>(r?t.test(i):t===i)?Object.assign(n,{[i]:e[i]}):n,{})}getType(){return this.getAttribute(t.Attributes.FacadeType)||a.EntryType.Login}getURLs(t){return s.getEntryURLs(this.getProperty(),t)}isInTrash(){return this.getGroup().isInTrash()||this.getGroup().isTrash()}moveToGroup(t){return this.vault.format.moveEntry(this.id,t.id),this}setAttribute(t,e){return this.vault.format.setEntryAttribute(this.id,t,e),this}setProperty(t,e){return this.vault.format.setEntryProperty(this.id,t,e),this}_updateRefs(){this._source=this.vault.format.findEntryByID(this.id)}}return t.Attributes=Object.freeze({AttachmentPrefix:"BC_ENTRY_ATTACHMENT:",FacadeType:"BC_ENTRY_FACADE_TYPE",FieldTypePrefix:"BC_ENTRY_FIELD_TYPE:"}),t})();e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(4),i=r(0),o=r(6);function s(t){return"bc~3>"+t}let a=(()=>{class t{constructor(e={},r=null){const o=n.generateUUID();Object.defineProperty(this,"id",{writable:!1,configurable:!1,enumerable:!0,value:o}),i.setCredentials(o,{data:e,masterPassword:r,purposes:t.allPurposes(),open:!1})}static allPurposes(){return[t.PURPOSE_DECRYPT_VAULT,t.PURPOSE_ENCRYPT_VAULT,t.PURPOSE_SECURE_EXPORT]}static fromCredentials(e,r){if(!r)throw new Error("Master password is required for credentials cloning");const n=i.getCredentials(e.id);if(n.masterPassword!==r)throw new Error("Master password does not match that of the credentials to be cloned");const o=JSON.parse(JSON.stringify(n.data));return new t(o,r)}static fromDatasource(e,r=null){return new t({datasource:e},r)}static fromPassword(e,r=null){return new t({password:e},r||e)}static fromSecureString(e,r){return o.getSharedAppEnv().getProperty("crypto/v1/decryptText")(function(t){const e=t.indexOf("bc~3>"),r=t.indexOf("b~>buttercup/acreds.v2.");if(-1===e&&-1===r)throw new Error("Invalid credentials content (unknown signature)");return 0===e?t.substr("bc~3>".length):t.substr("b~>buttercup/acreds.v2.".length)}(e),r).then(t=>JSON.parse(t)).then(e=>(e.datasource&&("string"==typeof e.datasource&&(e.datasource=JSON.parse(e.datasource)),e.username&&(e.datasource.username=e.username,delete e.username),e.password&&(e.datasource.password=e.password,delete e.password)),new t(e,r)))}static isCredentials(t){return!!t&&"object"==typeof t&&"function"==typeof t.toSecureString&&!!t.id}getData(){const t=o.getSharedAppEnv().getProperty("env/v1/isClosedEnv")(),e=i.getCredentials(this.id);return t||!0===e.open?e:null}restrictPurposes(t){const e=i.getCredentials(this.id),{purposes:r}=e,n=t.filter(t=>r.includes(t));return i.setCredentials(this.id,Object.assign(e,{purposes:n})),this}toSecureString(){if(!0!==i.credentialsAllowsPurpose(this.id,t.PURPOSE_SECURE_EXPORT))return Promise.reject(new Error("Credential purposes don't allow for secure exports"));const e=o.getSharedAppEnv().getProperty("crypto/v1/encryptText"),{data:r,masterPassword:n}=i.getCredentials(this.id);return"string"!=typeof n?Promise.reject(new Error("Cannot convert Credentials to string: master password was not set or is invalid")):e(JSON.stringify(r),n).then(s)}_getData(){return this.getData()}}return t.PURPOSE_DECRYPT_VAULT="vault-decrypt",t.PURPOSE_ENCRYPT_VAULT="vault-encrypt",t.PURPOSE_SECURE_EXPORT="secure-export",t})();e.default=a},function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=r,r.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)}},function(t,e,r){"use strict";var n=r(3),i=r(13);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=o,o.prototype.update=function(t,e){if(t=n.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=n.join32(t,0,t.length-r,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isEncoded=e.getUniqueID=e.encodeStringValue=e.decodeStringValue=e.bytesToBase64=e.base64ToBytes=e.ENCODED_STRING_PREFIX=void 0;const n=r(23),i=r(4),o=/^utf8\+base64:(|[a-zA-Z0-9+\/=]+)$/;function s(t){return o.test(t)}e.ENCODED_STRING_PREFIX="utf8+base64:",e.base64ToBytes=function(t){return n.Base64.toUint8Array(t)},e.bytesToBase64=function(t){return n.Base64.fromUint8Array(t)},e.decodeStringValue=function(t){if(!0!==s(t))throw new Error("Cannot decode: provided value is not encoded");const r=t.substr(e.ENCODED_STRING_PREFIX.length);return n.Base64.decode(r)},e.encodeStringValue=function(t){return`${e.ENCODED_STRING_PREFIX}${n.Base64.encode(t)}`},e.getUniqueID=function(){return i.generateUUID()},e.isEncoded=s},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.setDefaultFormat=e.getFormatForID=e.getDefaultFormat=e.detectFormat=void 0;const i=n(r(24)),o=n(r(52)),s=r(53),a=r(1),u=i.default;let c=u;e.detectFormat=function(t){return s.hasValidSignature(t)?o.default:i.default},e.getDefaultFormat=function(){return c},e.getFormatForID=function(t){return t===a.VaultFormatID.B?o.default:i.default},e.setDefaultFormat=function(t=null){c=t||u}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stripDestructiveCommands=e.historyStringToArray=e.historyArrayToString=e.getAllGroups=e.getAllEntries=e.generateEntryLegacyHistoryItem=e.findGroupContainingGroupID=e.findGroupContainingEntryID=e.findGroupByID=e.findEntryByID=e.extractCommandComponents=e.InigoCommand=e.COMMAND_MANIFEST=e.COMMAND_ARGUMENT=void 0;const n=r(15),i=r(4);e.COMMAND_ARGUMENT={ItemID:{test:/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/i,wrap:t=>t,encode:!1},ItemIDOrRoot:{test:/^([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}|0)$/i,wrap:t=>t,encode:!1},StringKey:{test:/\S+/,wrap:t=>n.encodeStringValue(t),encode:!0},StringValue:{test:/(^[\s\S]+$|^$)/,wrap:t=>n.encodeStringValue(t),encode:!0}};const o=e.COMMAND_ARGUMENT;e.COMMAND_MANIFEST={ArchiveID:{s:"aid",d:!1,args:[o.ItemID]},Comment:{s:"cmm",d:!1,args:[o.StringValue]},CreateEntry:{s:"cen",d:!1,args:[o.ItemID,o.ItemID]},CreateGroup:{s:"cgr",d:!1,args:[o.ItemIDOrRoot,o.ItemID]},DeleteArchiveAttribute:{s:"daa",d:!0,args:[o.StringValue]},DeleteEntry:{s:"den",d:!0,args:[o.ItemID]},DeleteEntryAttribute:{s:"dea",d:!0,args:[o.ItemID,o.StringValue]},DeleteEntryMeta:{s:"dem",d:!0,args:[o.ItemID,o.StringValue]},DeleteEntryProperty:{s:"dep",d:!0,args:[o.ItemID,o.StringValue]},DeleteGroup:{s:"dgr",d:!0,args:[o.ItemID]},DeleteGroupAttribute:{s:"dga",d:!0,args:[o.ItemID,o.StringValue]},Format:{s:"fmt",d:!1,args:[o.StringValue]},MoveEntry:{s:"men",d:!1,args:[o.ItemID,o.ItemID]},MoveGroup:{s:"mgr",d:!1,args:[o.ItemID,o.ItemIDOrRoot]},Pad:{s:"pad",d:!1,args:[o.ItemID]},SetArchiveAttribute:{s:"saa",d:!1,args:[o.StringValue,o.StringValue]},SetEntryAttribute:{s:"sea",d:!1,args:[o.ItemID,o.StringValue,o.StringValue]},SetEntryMeta:{s:"sem",d:!1,args:[o.ItemID,o.StringValue,o.StringValue]},SetEntryProperty:{s:"sep",d:!1,args:[o.ItemID,o.StringKey,o.StringValue]},SetGroupAttribute:{s:"sga",d:!1,args:[o.ItemID,o.StringValue,o.StringValue]},SetGroupTitle:{s:"tgr",d:!1,args:[o.ItemID,o.StringValue]}};let s=(()=>{class t{constructor(t){this._commandKey=t,this._commandArgs=[]}static create(e){return new t(e)}static generatePaddingCommand(){return t.create(e.COMMAND_MANIFEST.Pad).addArgument(i.generateUUID()).generateCommand()}addArgument(t){const e=this._commandArgs.length,r=this._commandKey.args,n=!(r.length<=e)&&r[e];if(!1===n)throw new Error(`Failed adding argument for command "${this._commandKey.s}": too many arguments`);if(!n.test.test(t))throw new Error(`Failed adding argument for command "${this._commandKey.s}": argument ${e} is of invalid format`);return this._commandArgs.push(n.wrap(t)),this}generateCommand(){return[this._commandKey.s].concat(this._commandArgs).join(" ")}}return t.Command=e.COMMAND_MANIFEST,t})();e.InigoCommand=s,e.extractCommandComponents=function(t){const e=/("[^"]*")/,r=[];let n,i=t.replace(/\\\"/g,"__ESCAPED_QUOTE__");for(;n=e.exec(i);){const[t]=n;i=i.substr(0,n.index)+"__QUOTEDSTR__"+i.substr(n.index+t.length),r.push(t.substring(1,t.length-1))}return i.split(" ").map(t=>{let e=t.trim();return"__QUOTEDSTR__"===e&&(e=r.shift()),e=e.replace(new RegExp("__ESCAPED_QUOTE__","g"),'"'),e})},e.findEntryByID=function t(e,r){for(let n=0,i=e.length;n<i;n+=1){const i=e[n];if(i.entries)for(let t=0,e=i.entries.length;t<e;t+=1)if(i.entries[t].id===r)return i.entries[t];if(i.groups){const e=t(i.groups,r);if(e)return e}}return null},e.findGroupByID=function(t,e){return function t(e,r){for(let n=0,i=e.length;n<i;n+=1){if(!0===r(e[n]))return e[n];if(e[n].groups){const i=t(e[n].groups,r);if(i)return i}}return null}(t,(function(t){return t.id===e}))},e.findGroupContainingEntryID=function t(e,r){for(let o=0,s=e.length;o<s;o+=1){const s=e[o];if(s.entries)for(var n=0,i=s.entries.length;n<i;n+=1)if(s.entries[n].id===r)return{group:s,index:n};if(s.groups){const e=t(s.groups,r);if(e.group)return e}}return{group:null,index:null}},e.findGroupContainingGroupID=function t(e,r){const n=e.groups||[];for(let i=0,o=n.length;i<o;i+=1){if(n[i].id===r)return{group:e,index:i};const o=t(n[i],r);if(o.group)return o}return{group:null,index:null}},e.generateEntryLegacyHistoryItem=function(t,e,r=null,n=null){return Object.freeze({property:t,propertyType:e,originalValue:r,newValue:n})},e.getAllEntries=function(t,e=null){const r=[],n=t=>{null!==e&&t.id!==e||r.push(...t.entries||[]),(t.groups||[]).forEach(t=>n(t))};return t.groups.forEach(t=>n(t)),r},e.getAllGroups=function(t,e=null){const r=[],n=t=>{(t.groups||[]).forEach(t=>{(null===e||"0"===e&&void 0===t.parentID||e===t.parentID)&&r.push(t),n(t)})};return n(t),r},e.historyArrayToString=function(t){return t.join("\n")},e.historyStringToArray=function(t){return t.split("\n")},e.stripDestructiveCommands=function(t){const r=Object.keys(e.COMMAND_MANIFEST).map(t=>e.COMMAND_MANIFEST[t]).filter(t=>t.d).map(t=>t.s);return t.filter(t=>{return r.indexOf((e=t)&&e.length>=3?e.substr(0,3):"")<0;var e})}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.setEntryValueType=e.idSignifiesNew=e.getEntryValueType=e.getEntryValue=e.createFieldDescriptor=void 0;const i=r(31),o=n(r(11)),s=r(1),a=[s.EntryPropertyValueType.Note,s.EntryPropertyValueType.OTP,s.EntryPropertyValueType.Password,s.EntryPropertyValueType.Text];function u(t,e,r){switch(e){case s.EntryPropertyType.Property:return t.getProperty(r);case s.EntryPropertyType.Attribute:return t.getAttribute(r);default:throw new Error("Cannot retrieve value: Unknown property type: "+e)}}function c(t,e){if(!t)return s.EntryPropertyValueType.Text;const r=t.getAttribute(`${o.default.Attributes.FieldTypePrefix}${e}`);return a.indexOf(r)>=0?r:s.EntryPropertyValueType.Text}e.createFieldDescriptor=function(t,e,r,n,o={}){const{formatting:s=!1,removeable:a=!1,valueType:l=null}=o,h=t?u(t,r,n):"";return{id:i.v4(),title:e,propertyType:r,property:n,value:h,valueType:l||("attribute"===r?null:c(t,n)),formatting:s,removeable:a}},e.getEntryValue=u,e.getEntryValueType=c,e.idSignifiesNew=function(t,e=!1){if(!1===/^\d+$/.test(t))return e;const r=parseInt(t,10);return!isNaN(r)&&r>0&&r<=999999},e.setEntryValueType=function(t,e,r){t.setAttribute(`${o.default.Attributes.FieldTypePrefix}${e}`,r)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.valueToHistoryItem=e.trimValueHistory=e.sortValueHistory=e.newRawValue=e.mergeValues=e.cloneValue=e.MAX_PROPERTY_HISTORY=e.MAX_ATTRIBUTE_HISTORY=void 0;const n=r(28),i=r(1);function o(t){return t.sort((t,e)=>t.updated>e.updated?-1:e.updated>t.updated?1:0)}function s(t,r){const n=r===i.EntryPropertyType.Attribute?e.MAX_ATTRIBUTE_HISTORY:e.MAX_PROPERTY_HISTORY;return o(t).slice(0,n)}function a(t){return{value:t.value,updated:t.updated}}e.MAX_ATTRIBUTE_HISTORY=3,e.MAX_PROPERTY_HISTORY=5,e.cloneValue=function(t){return{value:t.value,created:t.created,updated:t.updated,history:t.history.map(t=>Object.assign({},t))}},e.mergeValues=function(t,e,r){const n=t.updated>e.updated||t.updated===e.updated?t:e,i=o([a(t===n?e:t),...t.history,...e.history].filter((t,e,r)=>r.findIndex(e=>e.value===t.value&&e.updated===t.updated)===e));return{value:n.value,created:n.created,updated:n.updated,history:s(i,r)}},e.newRawValue=function(t){const e=n.getTimestamp();return{value:t,created:e,updated:e,history:[]}},e.sortValueHistory=o,e.trimValueHistory=s,e.valueToHistoryItem=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{getAllKeys(){return Promise.resolve([])}getValue(t){return Promise.resolve(null)}removeKey(t){return Promise.resolve()}setValue(t,e){return Promise.resolve()}}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,r){"use strict";r.r(e),r.d(e,"version",(function(){return n})),r.d(e,"VERSION",(function(){return i})),r.d(e,"atob",(function(){return S})),r.d(e,"atobPolyfill",(function(){return x})),r.d(e,"btoa",(function(){return y})),r.d(e,"btoaPolyfill",(function(){return g})),r.d(e,"fromBase64",(function(){return O})),r.d(e,"toBase64",(function(){return w})),r.d(e,"utob",(function(){return _})),r.d(e,"encode",(function(){return w})),r.d(e,"encodeURI",(function(){return E})),r.d(e,"encodeURL",(function(){return E})),r.d(e,"btou",(function(){return A})),r.d(e,"decode",(function(){return O})),r.d(e,"fromUint8Array",(function(){return v})),r.d(e,"toUint8Array",(function(){return C})),r.d(e,"extendString",(function(){return k})),r.d(e,"extendUint8Array",(function(){return D})),r.d(e,"extendBuiltins",(function(){return j})),r.d(e,"Base64",(function(){return F}));const n="3.4.5",i=n,o="function"==typeof atob,s="function"==typeof btoa,a="function"==typeof Buffer,u=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],c=(t=>{let e={};return t.forEach((t,r)=>e[t]=r),e})(u),l=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,h=String.fromCharCode.bind(String),d="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(t,e=(t=>t))=>new Uint8Array(Array.prototype.slice.call(t,0).map(e)),f=t=>t.replace(/[+\/]/g,t=>"+"==t?"-":"_").replace(/=+$/m,""),p=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),g=t=>{let e,r,n,i,o="";const s=t.length%3;for(let s=0;s<t.length;){if((r=t.charCodeAt(s++))>255||(n=t.charCodeAt(s++))>255||(i=t.charCodeAt(s++))>255)throw new TypeError("invalid character found");e=r<<16|n<<8|i,o+=u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}return s?o.slice(0,s-3)+"===".substring(s):o},y=s?t=>btoa(t):a?t=>Buffer.from(t,"binary").toString("base64"):g,m=a?t=>Buffer.from(t).toString("base64"):t=>{let e=[];for(let r=0,n=t.length;r<n;r+=4096)e.push(h.apply(null,t.subarray(r,r+4096)));return y(e.join(""))},v=(t,e=!1)=>e?f(m(t)):m(t),_=t=>unescape(encodeURIComponent(t)),b=a?t=>Buffer.from(t,"utf8").toString("base64"):t=>y(_(t)),w=(t,e=!1)=>e?f(b(t)):b(t),E=t=>w(t,!0),A=t=>decodeURIComponent(escape(t)),x=t=>{if(t=t.replace(/\s+/g,""),!l.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));let e,r,n,i="";for(let o=0;o<t.length;)e=c[t.charAt(o++)]<<18|c[t.charAt(o++)]<<12|(r=c[t.charAt(o++)])<<6|(n=c[t.charAt(o++)]),i+=64===r?h(e>>16&255):64===n?h(e>>16&255,e>>8&255):h(e>>16&255,e>>8&255,255&e);return i},S=o?t=>atob(p(t)):a?t=>Buffer.from(t,"base64").toString("binary"):x,T=a?t=>Buffer.from(t,"base64").toString("utf8"):t=>A(S(t)),P=t=>p(t.replace(/[-_]/g,t=>"-"==t?"+":"/")),O=t=>T(P(t)),C=a?t=>d(Buffer.from(P(t),"base64")):t=>d(S(P(t)),t=>t.charCodeAt(0)),I=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),k=function(){const t=(t,e)=>Object.defineProperty(String.prototype,t,I(e));t("fromBase64",(function(){return O(this)})),t("toBase64",(function(t){return w(this,t)})),t("toBase64URI",(function(){return w(this,!0)})),t("toBase64URL",(function(){return w(this,!0)})),t("toUint8Array",(function(){return C(this)}))},D=function(){const t=(t,e)=>Object.defineProperty(Uint8Array.prototype,t,I(e));t("toBase64",(function(t){return v(this,t)})),t("toBase64URI",(function(){return v(this,!0)})),t("toBase64URL",(function(){return v(this,!0)}))},j=()=>{k(),D()},F={version:n,VERSION:i,atob:S,atobPolyfill:x,btoa:y,btoaPolyfill:g,fromBase64:O,toBase64:w,encode:w,encodeURI:E,encodeURL:E,utob:_,btou:A,decode:O,fromUint8Array:v,toUint8Array:C,extendString:k,extendUint8Array:D,extendBuiltins:j}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(10),o=n(r(44)),s=n(r(8)),a=r(104),u=r(17),c=n(r(105)),l=r(106),h=r(49),d=n(r(107)),f=r(6),p=r(15),g=r(4),y=r(0),m=r(51),v=r(1),_={aid:a.executeArchiveID,cen:a.executeCreateEntry,cgr:a.executeCreateGroup,cmm:a.executeComment,daa:a.executeDeleteArchiveAttribute,dea:a.executeDeleteEntryAttribute,dem:a.executeDeleteEntryProperty,den:a.executeDeleteEntry,dep:a.executeDeleteEntryProperty,dga:a.executeDeleteGroupAttribute,dgr:a.executeDeleteGroup,fmt:a.executeFormat,men:a.executeMoveEntry,mgr:a.executeMoveGroup,pad:a.executePad,saa:a.executeSetArchiveAttribute,sea:a.executeSetEntryAttribute,sem:a.executeSetEntryProperty,sep:a.executeSetEntryProperty,sga:a.executeSetGroupAttribute,tgr:a.executeTitleGroup},b=/^\$[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}\s/,w=/^[a-z]{3}\s.+$/;class E extends o.default{constructor(t={id:null,groups:[]}){super(t),this._history=[],this._history.format=v.VaultFormatID.A}static encodeRaw(t,e){const r=f.getSharedAppEnv().getProperty("compression/v1/compressText"),n=f.getSharedAppEnv().getProperty("crypto/v1/encryptText"),{masterPassword:i}=y.getCredentials(e.id);return Promise.resolve().then(()=>m.historyArrayToString(t)).then(t=>r(t)).then(t=>n(t,i)).then(l.sign)}static extractSharesFromHistory(t){return t.reduce((t,e)=>{if(b.test(e)){const r=e.substring(1,37),n=e.replace(b,"");t[r]=t[r]||[],t[r].push(n)}else t.base.push(e);return t},{base:[]})}static getFormatID(){return v.VaultFormatID.A}static historiesDiffer(t,e){const r=d.default.calculateHistoryDifferences(t,e);return null===r||r.original.length>0||r.secondary.length>0}static isEncrypted(t){return l.vaultContentsEncrypted(t)}static parseEncrypted(t,e){const r=f.getSharedAppEnv().getProperty("compression/v1/decompressText"),n=f.getSharedAppEnv().getProperty("crypto/v1/decryptText"),{masterPassword:i}=y.getCredentials(e.id);return Promise.resolve().then(()=>{if(!l.hasValidSignature(t))throw new Error("No valid signature in vault");return l.stripSignature(t)}).then(t=>n(t,i)).then(t=>{if(t&&t.length>0){const e=r(t);if(e)return m.historyStringToArray(e,v.VaultFormatID.A)}throw new Error("Failed reconstructing history: Decryption failed")})}static prepareHistoryForMerge(t){return u.stripDestructiveCommands(t)}static vaultFromMergedHistories(t,e){const r=d.default.calculateHistoryDifferences(t,e);if(0===r.secondary.length)return s.default.createFromHistory(t,E);const n=E.prepareHistoryForMerge(r.original),i=E.prepareHistoryForMerge(r.secondary),o=r.common,a=new s.default(E);return a.format.erase(),o.concat(i).concat(n).forEach(t=>{a.format.execute(t)}),a.format.dirty=!1,a}cloneEntry(t,e){}cloneGroup(t,e){const r=h.describeVaultDataset(t,e);this.execute(r)}createEntry(t,e){this.execute(u.InigoCommand.create(u.InigoCommand.Command.CreateEntry).addArgument(t).addArgument(e).generateCommand())}createGroup(t,e){this.execute(u.InigoCommand.create(u.InigoCommand.Command.CreateGroup).addArgument(t).addArgument(e).generateCommand())}deleteEntry(t){this.execute(u.InigoCommand.create(u.InigoCommand.Command.DeleteEntry).addArgument(t).generateCommand())}deleteEntryAttribute(t,e){this.execute(u.InigoCommand.create(u.InigoCommand.Command.DeleteEntryAttribute).addArgument(t).addArgument(e).generateCommand())}deleteEntryProperty(t,e){this.execute(u.InigoCommand.create(u.InigoCommand.Command.DeleteEntryProperty).addArgument(t).addArgument(e).generateCommand())}deleteGroup(t){this.execute(u.InigoCommand.create(u.InigoCommand.Command.DeleteGroup).addArgument(t).generateCommand())}deleteGroupAttribute(t,e){this.execute(u.InigoCommand.create(u.InigoCommand.Command.DeleteGroupAttribute).addArgument(t).addArgument(e).generateCommand())}deleteVaultAttribute(t){this.execute(u.InigoCommand.create(u.InigoCommand.Command.DeleteArchiveAttribute).addArgument(t).generateCommand())}erase(){super.erase(),Object.assign(this.source,{id:null,groups:[]}),this.emit("erased")}execute(t){if(this.readOnly)throw new Error("Format is in read-only mode");const e=Array.isArray(t)?t:[t];e.forEach(t=>this._executeCommand(t));const r=e[e.length-1];!1===/^pad\s/i.test(r)&&this._pad(),this.dirty=!0,this.emit("commandsExecuted")}findEntryByID(t){return this.getAllEntries().find(e=>e.id===t)||null}findGroupByID(t){return this.getAllGroups().find(e=>e.id===t)||null}findGroupContainingEntryID(t){const e=this.getAllEntries().find(e=>e.id===t);return e&&this.getAllGroups().find(t=>t.id===e.parentID)||null}findGroupContainingGroupID(t){const e=r=>{for(const n of r){if(n.id===t)return null;const r=n.groups||[];if(r.find(e=>e.id===t))return n;const i=e(r);if(i)return i}return null};return e(this.getAllGroups())}generateID(){this.execute(u.InigoCommand.create(u.InigoCommand.Command.ArchiveID).addArgument(g.generateUUID()).generateCommand())}getAllEntries(t=null){return u.getAllEntries(this.source,t)}getAllGroups(t=null){return u.getAllGroups(this.source,t)}getEntryAttributes(t){return t.attributes}getEntryChanges(t){return(t.history||[]).filter(t=>t.propertyType===v.EntryPropertyType.Property).map(t=>{const e=t.originalValue?"string"==typeof t.newValue?v.EntryChangeType.Modified:v.EntryChangeType.Deleted:v.EntryChangeType.Created,r={property:t.property,type:e,ts:null};return(e===v.EntryChangeType.Created||v.EntryChangeType.Modified)&&(r.value=t.newValue),r})}getEntryProperties(t){return t.properties}getFormat(){return E}getGroupAttributes(t){return t.attributes}getGroupTitle(t){return t.title}getHistory(){return this._history.format||(this._history.format=v.VaultFormatID.A),this._history}getItemID(t){return t.id}getItemParentID(t){return t.parentID}getVaultAttributes(){return this.source.attributes||{}}getVaultID(){return this.source.id}initialise(){this.execute(u.InigoCommand.create(u.InigoCommand.Command.Format).addArgument(l.getFormat()).generateCommand()),this.generateID()}moveEntry(t,e){this.execute(u.InigoCommand.create(u.InigoCommand.Command.MoveEntry).addArgument(t).addArgument(e).generateCommand())}moveGroup(t,e){this.execute(u.InigoCommand.create(u.InigoCommand.Command.MoveGroup).addArgument(t).addArgument(e).generateCommand())}optimise(){const t=new c.default(this);t.canBeFlattened()&&t.flatten()}setEntryAttribute(t,e,r){this.execute(u.InigoCommand.create(u.InigoCommand.Command.SetEntryAttribute).addArgument(t).addArgument(e).addArgument(r).generateCommand())}setEntryProperty(t,e,r){this.execute(u.InigoCommand.create(u.InigoCommand.Command.SetEntryProperty).addArgument(t).addArgument(e).addArgument(r).generateCommand())}setGroupAttribute(t,e,r){this.execute(u.InigoCommand.create(u.InigoCommand.Command.SetGroupAttribute).addArgument(t).addArgument(e).addArgument(r).generateCommand())}setGroupTitle(t,e){this.execute(u.InigoCommand.create(u.InigoCommand.Command.SetGroupTitle).addArgument(t).addArgument(e).generateCommand())}setVaultAttribute(t,e){this.execute(u.InigoCommand.create(u.InigoCommand.Command.SetArchiveAttribute).addArgument(t).addArgument(e).generateCommand())}_executeCommand(t){let e=t,r=null;if(b.test(e)&&(r=/^\$([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})/.exec(e)[1],e=e.replace(b,"")),!w.test(e))throw new Error("Invalid command: "+t);if(/^pad\s/i.test(t)&&/^pad\s/i.test(this.history[this.history.length-1]))return;const n=u.extractCommandComponents(e),o=n.shift().toLowerCase(),s=_[o];try{s.apply(null,[this.source,{shareID:r},...this._processCommandParameters(o,n)]),this.history.push(t)}catch(t){throw new i.Layerr(t,"Failed executing vault command: "+o)}}_pad(){this._executeCommand(u.InigoCommand.generatePaddingCommand())}_processCommandParameters(t,e){const r=Object.keys(u.COMMAND_MANIFEST).find(e=>u.COMMAND_MANIFEST[e].s===t),n=u.COMMAND_MANIFEST[r];if(!n)throw new Error("Cannot process command parameters: no command found for key: "+t);return e.map((t,e)=>!0===n.args[e].encode&&p.isEncoded(t)?p.decodeStringValue(t):t)}}e.default=E},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEntryURLs=e.EntryURLType=void 0;const n=r(102);var i;!function(t){t.Any="any",t.General="general",t.Icon="icon",t.Login="login"}(i=e.EntryURLType||(e.EntryURLType={}));const o=/(^|[a-zA-Z0-9_-]|\b)(ur[li]|UR[LI]|Ur[li])(\b|$|[_-])/,s=/icon[\s_-]*ur[li]/i;e.getEntryURLs=function(t,e=i.Any){const r=Object.keys(t).filter(t=>o.test(t)).reduce((e,r)=>Object.assign(e,{[r]:t[r]}),{});if(e===i.General||e===i.Login)return Object.keys(r).sort((t,r)=>{if(e===i.General){const e=/^ur[li]$/i,n=e.test(t)?1:0;return(e.test(r)?1:0)-n}if(e===i.Login){const e=/login/i,n=e.test(t)?1:0;return(e.test(r)?1:0)-n}return 0}).map(t=>r[t]);if(e===i.Icon){const t=Object.keys(r).find(t=>s.test(t));return t?[r[t]]:[]}return n.objectValues(r)}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.createGroupFacade=e.createVaultFacade=e.consumeVaultFacade=e.consumeGroupFacade=void 0;const i=r(27),o=r(18),s=r(50),a=n(r(11)),u=n(r(8)),c=r(4),{FacadeType:l}=a.default.Attributes;function h(t,e){const{id:r,title:n,type:i,attributes:o}=e,s=t.getAttribute();if("group"!==i)throw new Error("Failed consuming group facade: Invalid facade type: "+i);if(r!==t.id)throw new Error(`Failed consuming group facade: Provided facade ID (${r}) does not match target group's ID: ${t.id}`);if(!n||n.trim().length<=0)throw new Error("Failed consuming group facade: Title must not be empty");t.getTitle()!==n&&t.setTitle(n),Object.keys(s).filter(t=>!o.hasOwnProperty(t)).forEach(e=>{t.deleteAttribute(e)}),Object.keys(o).forEach(e=>{s[e]&&s[e]===o[e]||t.setAttribute(e,o[e])})}function d(t,e={}){const{includeTrash:r=!0}=e;return{_tag:c.generateUUID(),_ver:s.FACADE_VERSION,type:"vault",id:t.id,attributes:t.getAttribute(),groups:y(t,{includeTrash:r}),entries:p(t,{includeTrash:r})}}function f(t,e="0"){return{type:"group",id:t?t.id:null,title:t?t.getTitle():"",attributes:t?t.getAttribute():{},parentID:e}}function p(t,e={}){return t.getGroups().reduce((t,r)=>[...t,...g(r,e)],[])}function g(t,e={}){const{includeTrash:r=!0}=e,n=t.getEntries().reduce((t,e)=>!1===r&&e.isInTrash()?t:[...t,Object.assign({},i.createEntryFacade(e))],[]);return t.getGroups().forEach(t=>{n.push(...g(t,e))}),n}function y(t,e={}){const{includeTrash:r=!0}=e;return t._groups.reduce((t,e)=>!1===r&&(e.isTrash()||e.isInTrash())?t:[...t,f(e,e.vault.format.getItemParentID(e._source))],[])}e.consumeGroupFacade=h,e.consumeVaultFacade=function(t,e,r={}){if(e._ver!==s.FACADE_VERSION)throw new Error("Invalid vault facade version");if(!e||e&&"vault"!==e.type)throw new Error("Failed consuming vault facade: Second parameter expected to be a vault facade, got: "+e.type);const{mergeMode:n=!1}=r,{id:a,type:c,attributes:f,groups:g,entries:m}=e;if("vault"!==c)throw new Error("Failed consuming vault facade: Invalid facade type: "+c);if(!n&&a!==t.id)throw new Error(`Failed consuming vault facade: Provided facade ID (${a}) does not match target vault ID: ${t.id}`);const v={};let{groups:_,entries:b,attributes:w}=d(t);n||_.forEach(e=>{if(!g.find(t=>t.id===e.id)){const r=t.findGroupByID(e.id);r&&r.delete()}}),_=y(t);let E=[...g];for(;E.length>0;){let e=E.length;if(E=E.filter(e=>{const r=Object.assign({},e),i=o.idSignifiesNew(r.id,n);if(!r.id||i){let e=r.parentID;if(o.idSignifiesNew(e,n)){if(!v[e])return!0;e=v[e]}const s=("0"===e?t:t.findGroupByID(e)).createGroup(r.title);i&&(v[""+r.id]=s.id),r.id=s.id}else{if(!_.find(t=>t.id===r.id))return;const{id:e,parentID:n}=r,i=t.findGroupByID(e),o=i.getParentGroup();(null===o&&"0"!==n||null!==o&&o.id!==n)&&i.moveTo("0"===n?t:t.findGroupByID(n))}return h(t.findGroupByID(r.id),r),!1}),e===E.length){const t=E.map(t=>t.id);throw new Error("Processing facade stalled: groups not resolveable: "+t.join(", "))}}n||b.forEach(e=>{if(!m.find(t=>t.id===e.id)){const r=t.findEntryByID(e.id);r&&r.delete()}}),b=p(t);let A=[...m];A=A.filter(e=>{const r=Object.assign({},e),s=o.idSignifiesNew(r.id,n);if(!r.id||s){let e=r.parentID;if(o.idSignifiesNew(e,n)){if(!v[e])return!0;e=v[e]}const i=t.findGroupByID(e).createEntry();s&&(v[""+r.id]=i.id),r.id=i.id,r.type&&i.setAttribute(l,r.type)}else{if(!b.find(t=>t.id===e.id))return;const n=t.findEntryByID(r.id);n.getGroup().id!==r.parentID&&n.moveToGroup(t.findGroupByID(r.parentID))}const a=t.findEntryByID(r.id);return i.consumeEntryFacade(a,r),!1}),Object.keys(w).filter(t=>!f.hasOwnProperty(t)).forEach(e=>{t.deleteAttribute(e)}),Object.keys(f).forEach(e=>{e===u.default.Attribute.AttachmentsKey&&n||w[e]&&w[e]===f[e]||t.setAttribute(e,f[e])})},e.createVaultFacade=d,e.createGroupFacade=f},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.fieldsToProperties=e.createEntryFacade=e.consumeEntryFacade=void 0;const i=n(r(108)),o=r(18),s=n(r(11)),a=r(1),{FacadeType:u}=s.default.Attributes;function c(t){return t?t.getType():a.EntryType.Login}e.consumeEntryFacade=function(t,e){const r=c(t);if(e&&e.type){const n=t.getProperty(),i=t.getAttribute();if(e.type!==r)throw new Error(`Failed consuming entry data: Expected type "${r}" but received "${e.type}"`);return(e.fields||[]).forEach(e=>function(t,e){!function(t,e,r,n,i){switch(e){case"property":t.getProperty(r)!==n&&t.setProperty(r,n);break;case"attribute":t.getAttribute(r)!==n&&t.setAttribute(r,n);break;default:throw new Error("Cannot set value: Unknown property type: "+e)}i&&o.getEntryValueType(t,r)!==i&&o.setEntryValueType(t,r,i)}(t,e.propertyType,e.property,e.value,e.valueType)}(t,e)),Object.keys(n).forEach(r=>{void 0===e.fields.find(({propertyType:t,property:e})=>"property"===t&&e===r)&&t.deleteProperty(r)}),void Object.keys(i).forEach(r=>{void 0===e.fields.find(({propertyType:t,property:e})=>"attribute"===t&&e===r)&&t.deleteAttribute(r)})}throw new Error("Failed consuming entry data: Invalid item passed as a facade")},e.createEntryFacade=function(t,e={}){if(t&&t instanceof s.default!=1)throw new Error("Failed creating entry facade: Provided item is not an Entry");const{type:r}=e,n=r||c(t),l=i.default[n];if(!l)throw new Error(`Failed creating entry facade: No factory found for type "${n}"`);const h=t?function(t,e){const r=(t,r)=>e.find(e=>e.propertyType===r&&e.property===t),n=t.getProperty(),i=t.getAttribute();return[...e,...Object.keys(n).filter(t=>!r(t,a.EntryPropertyType.Property)).map(e=>o.createFieldDescriptor(t,"",a.EntryPropertyType.Property,e,{removeable:!0})),...Object.keys(i).filter(t=>!r(t,a.EntryPropertyType.Attribute)).map(e=>o.createFieldDescriptor(t,"",a.EntryPropertyType.Attribute,e))]}(t,l(t)):l(t);if(!h.find(t=>t.propertyType===a.EntryPropertyType.Attribute&&t.property===u)){const e=o.createFieldDescriptor(t,"",a.EntryPropertyType.Attribute,u);e.value=n,h.push(e)}return{id:t?t.id:null,type:n,fields:h,parentID:t?t.getGroup().id:null,_history:[],_changes:t?t.getChanges():[]}},e.fieldsToProperties=function(t){return t.reduce((t,e)=>("property"!==e.propertyType||(t[e.property]=e.value),t),{})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTimestamp=e.getDateString=e.getDateFromDateString=void 0,e.getDateFromDateString=function(t){return new Date(t)},e.getDateString=function(t=new Date){return t.toISOString()},e.getTimestamp=function(t=new Date){return t.getTime()}},function(t,e,r){const n=r(57),i=r(58),{TASK_TYPE_HIGH_PRIORITY:o,TASK_TYPE_NORMAL:s,TASK_TYPE_TAIL:a}=i;function u(t,e){const{type:r,created:n}=t,{type:i,created:s}=e;return r===o&&i!==o?-1:i===o&&r!==o?1:i===a&&r!==a?-1:r===a&&i!==a?1:n<s?-1:s<n?1:0}t.exports=class extends n{constructor(t){if(super(),"string"!=typeof t||t.length<=0)throw new Error("Failed creating Channel: Invalid or empty name");this._name=t,this._tasks=[],this._running=!1,this._autostart=!0}get autostart(){return this._autostart}get isEmpty(){return!this.isRunning&&0===this.tasks.length}get isRunning(){return this._running}get tasks(){return this._tasks}set autostart(t){this._autostart=!!t}set isRunning(t){this._running=t}clear(t){if(t)for(let e=this.tasks.length-1;e>=0;e-=1)this.tasks[e].type===t&&this.tasks.splice(e,1);else this.tasks.splice(0,1/0)}enqueue(t,e,r=null){if(r){const t=this.getStackedItems(r);if(t.length>0)return t[t.length-1].queuedPromise}const n=new i(t,e,r);return this.tasks.push(n),this.sort(),this.autostart&&this.start(),n.queuedPromise}getStackedItems(t){return this.tasks.filter(e=>e.stack&&e.stack===t)}retrieveNextItem(){return this.tasks.shift()}sort(){this.tasks.sort(u)}start(){return!this.isRunning&&(this.emit("started"),this.isRunning=!0,setTimeout(()=>this._runNextItem(),0),!0)}_runNextItem(){const t=this.retrieveNextItem();t?t.execute().then(()=>this._runNextItem()):(this.isRunning=!1,this.emit("stopped"))}}},function(t,e,r){const{request:n}=r(127),i=r(66);t.exports={Symbols:i,request:n}},function(t,e,r){"use strict";r.r(e),r.d(e,"v1",(function(){return f})),r.d(e,"v3",(function(){return E})),r.d(e,"v4",(function(){return A})),r.d(e,"v5",(function(){return T}));var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function o(){if(!n)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}for(var s=[],a=0;a<256;++a)s.push((a+256).toString(16).substr(1));var u,c,l=function(t,e){var r=e||0,n=s;return(n[t[r+0]]+n[t[r+1]]+n[t[r+2]]+n[t[r+3]]+"-"+n[t[r+4]]+n[t[r+5]]+"-"+n[t[r+6]]+n[t[r+7]]+"-"+n[t[r+8]]+n[t[r+9]]+"-"+n[t[r+10]]+n[t[r+11]]+n[t[r+12]]+n[t[r+13]]+n[t[r+14]]+n[t[r+15]]).toLowerCase()},h=0,d=0,f=function(t,e,r){var n=e&&r||0,i=e||[],s=(t=t||{}).node||u,a=void 0!==t.clockseq?t.clockseq:c;if(null==s||null==a){var f=t.random||(t.rng||o)();null==s&&(s=u=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==a&&(a=c=16383&(f[6]<<8|f[7]))}var p=void 0!==t.msecs?t.msecs:Date.now(),g=void 0!==t.nsecs?t.nsecs:d+1,y=p-h+(g-d)/1e4;if(y<0&&void 0===t.clockseq&&(a=a+1&16383),(y<0||p>h)&&void 0===t.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=p,d=g,c=a;var m=(1e4*(268435455&(p+=122192928e5))+g)%4294967296;i[n++]=m>>>24&255,i[n++]=m>>>16&255,i[n++]=m>>>8&255,i[n++]=255&m;var v=p/4294967296*1e4&268435455;i[n++]=v>>>8&255,i[n++]=255&v,i[n++]=v>>>24&15|16,i[n++]=v>>>16&255,i[n++]=a>>>8|128,i[n++]=255&a;for(var _=0;_<6;++_)i[n+_]=s[_];return e||l(i)},p=function(t,e,r){function n(t,n,i,o){var s=i&&o||0;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}(t)),"string"==typeof n&&(n=function(t){var e=[];return t.replace(/[a-fA-F0-9]{2}/g,(function(t){e.push(parseInt(t,16))})),e}(n)),!Array.isArray(t))throw TypeError("value must be an array of bytes");if(!Array.isArray(n)||16!==n.length)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var a=r(n.concat(t));if(a[6]=15&a[6]|e,a[8]=63&a[8]|128,i)for(var u=0;u<16;++u)i[s+u]=a[u];return i||l(a)}try{n.name=t}catch(t){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n};function g(t){return 14+(t+64>>>9<<4)+1}function y(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function m(t,e,r,n,i,o){return y((s=y(y(e,t),y(n,o)))<<(a=i)|s>>>32-a,r);var s,a}function v(t,e,r,n,i,o,s){return m(e&r|~e&n,t,e,i,o,s)}function _(t,e,r,n,i,o,s){return m(e&n|r&~n,t,e,i,o,s)}function b(t,e,r,n,i,o,s){return m(e^r^n,t,e,i,o,s)}function w(t,e,r,n,i,o,s){return m(r^(e|~n),t,e,i,o,s)}var E=p("v3",48,(function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return function(t){for(var e=[],r=32*t.length,n=0;n<r;n+=8){var i=t[n>>5]>>>n%32&255,o=parseInt("0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[g(e)-1]=e;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,s=0;s<t.length;s+=16){var a=r,u=n,c=i,l=o;r=v(r,n,i,o,t[s],7,-680876936),o=v(o,r,n,i,t[s+1],12,-389564586),i=v(i,o,r,n,t[s+2],17,606105819),n=v(n,i,o,r,t[s+3],22,-1044525330),r=v(r,n,i,o,t[s+4],7,-176418897),o=v(o,r,n,i,t[s+5],12,1200080426),i=v(i,o,r,n,t[s+6],17,-1473231341),n=v(n,i,o,r,t[s+7],22,-45705983),r=v(r,n,i,o,t[s+8],7,1770035416),o=v(o,r,n,i,t[s+9],12,-1958414417),i=v(i,o,r,n,t[s+10],17,-42063),n=v(n,i,o,r,t[s+11],22,-1990404162),r=v(r,n,i,o,t[s+12],7,1804603682),o=v(o,r,n,i,t[s+13],12,-40341101),i=v(i,o,r,n,t[s+14],17,-1502002290),r=_(r,n=v(n,i,o,r,t[s+15],22,1236535329),i,o,t[s+1],5,-165796510),o=_(o,r,n,i,t[s+6],9,-1069501632),i=_(i,o,r,n,t[s+11],14,643717713),n=_(n,i,o,r,t[s],20,-373897302),r=_(r,n,i,o,t[s+5],5,-701558691),o=_(o,r,n,i,t[s+10],9,38016083),i=_(i,o,r,n,t[s+15],14,-660478335),n=_(n,i,o,r,t[s+4],20,-405537848),r=_(r,n,i,o,t[s+9],5,568446438),o=_(o,r,n,i,t[s+14],9,-1019803690),i=_(i,o,r,n,t[s+3],14,-187363961),n=_(n,i,o,r,t[s+8],20,1163531501),r=_(r,n,i,o,t[s+13],5,-1444681467),o=_(o,r,n,i,t[s+2],9,-51403784),i=_(i,o,r,n,t[s+7],14,1735328473),r=b(r,n=_(n,i,o,r,t[s+12],20,-1926607734),i,o,t[s+5],4,-378558),o=b(o,r,n,i,t[s+8],11,-2022574463),i=b(i,o,r,n,t[s+11],16,1839030562),n=b(n,i,o,r,t[s+14],23,-35309556),r=b(r,n,i,o,t[s+1],4,-1530992060),o=b(o,r,n,i,t[s+4],11,1272893353),i=b(i,o,r,n,t[s+7],16,-155497632),n=b(n,i,o,r,t[s+10],23,-1094730640),r=b(r,n,i,o,t[s+13],4,681279174),o=b(o,r,n,i,t[s],11,-358537222),i=b(i,o,r,n,t[s+3],16,-722521979),n=b(n,i,o,r,t[s+6],23,76029189),r=b(r,n,i,o,t[s+9],4,-640364487),o=b(o,r,n,i,t[s+12],11,-421815835),i=b(i,o,r,n,t[s+15],16,530742520),r=w(r,n=b(n,i,o,r,t[s+2],23,-995338651),i,o,t[s],6,-198630844),o=w(o,r,n,i,t[s+7],10,1126891415),i=w(i,o,r,n,t[s+14],15,-1416354905),n=w(n,i,o,r,t[s+5],21,-57434055),r=w(r,n,i,o,t[s+12],6,1700485571),o=w(o,r,n,i,t[s+3],10,-1894986606),i=w(i,o,r,n,t[s+10],15,-1051523),n=w(n,i,o,r,t[s+1],21,-2054922799),r=w(r,n,i,o,t[s+8],6,1873313359),o=w(o,r,n,i,t[s+15],10,-30611744),i=w(i,o,r,n,t[s+6],15,-1560198380),n=w(n,i,o,r,t[s+13],21,1309151649),r=w(r,n,i,o,t[s+4],6,-145523070),o=w(o,r,n,i,t[s+11],10,-1120210379),i=w(i,o,r,n,t[s+2],15,718787259),n=w(n,i,o,r,t[s+9],21,-343485551),r=y(r,a),n=y(n,u),i=y(i,c),o=y(o,l)}return[r,n,i,o]}(function(t){if(0===t.length)return[];for(var e=8*t.length,r=new Uint32Array(g(e)),n=0;n<e;n+=8)r[n>>5]|=(255&t[n/8])<<n%32;return r}(t),8*t.length))})),A=function(t,e,r){"string"==typeof t&&(e="binary"===t?new Uint8Array(16):null,t=null);var n=(t=t||{}).random||(t.rng||o)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){for(var i=r||0,s=0;s<16;++s)e[i+s]=n[s];return e}return l(n)};function x(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function S(t,e){return t<<e|t>>>32-e}var T=p("v5",80,(function(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var n=unescape(encodeURIComponent(t));t=[];for(var i=0;i<n.length;++i)t.push(n.charCodeAt(i))}t.push(128);for(var o=t.length/4+2,s=Math.ceil(o/16),a=new Array(s),u=0;u<s;++u){for(var c=new Uint32Array(16),l=0;l<16;++l)c[l]=t[64*u+4*l]<<24|t[64*u+4*l+1]<<16|t[64*u+4*l+2]<<8|t[64*u+4*l+3];a[u]=c}a[s-1][14]=8*(t.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(t.length-1)&4294967295;for(var h=0;h<s;++h){for(var d=new Uint32Array(80),f=0;f<16;++f)d[f]=a[h][f];for(var p=16;p<80;++p)d[p]=S(d[p-3]^d[p-8]^d[p-14]^d[p-16],1);for(var g=r[0],y=r[1],m=r[2],v=r[3],_=r[4],b=0;b<80;++b){var w=Math.floor(b/20),E=S(g,5)+x(w,y,m,v)+_+e[w]+d[b]>>>0;_=v,v=m,m=S(y,30)>>>0,y=g,g=E}r[0]=r[0]+g>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+m>>>0,r[3]=r[3]+v>>>0,r[4]=r[4]+_>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSharedAppEnv=void 0;const n=r(71),i=r(33),o=r(72);e.getSharedAppEnv=function(){const t=o.getGlobal();if(!t["@@__ButtercupAppEnv"]){const e=n.createAppEnv();i.assignObjImmutableProp(t,"@@__ButtercupAppEnv",e)}return t["@@__ButtercupAppEnv"]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assignObjImmutableProp=void 0,e.assignObjImmutableProp=function(t,e,r){Object.defineProperty(t,e,{value:r,writable:!1,configurable:!1,enumerable:!1})}},function(t,e,r){"use strict";var n={};(0,r(5).assign)(n,r(78),r(81),r(39)),t.exports=n},function(t,e,r){"use strict";t.exports=function(t,e,r,n){for(var i=65535&t|0,o=t>>>16&65535|0,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{o=o+(i=i+e[n++]|0)|0}while(--s);i%=65521,o%=65521}return i|o<<16|0}},function(t,e,r){"use strict";var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();t.exports=function(t,e,r,i){var o=n,s=i+r;t^=-1;for(var a=i;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},function(t,e,r){"use strict";var n=r(5),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new n.Buf8(256),a=0;a<256;a++)s[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;function u(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",s=0;s<e;s++)r+=String.fromCharCode(t[s]);return r}s[254]=s[254]=1,e.string2buf=function(t){var e,r,i,o,s,a=t.length,u=0;for(o=0;o<a;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(u),s=0,o=0;s<u;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|63&r):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|63&r):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|63&r);return e},e.buf2binstring=function(t){return u(t,t.length)},e.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},e.buf2string=function(t,e){var r,n,i,o,a=e||t.length,c=new Array(2*a);for(n=0,r=0;r<a;)if((i=t[r++])<128)c[n++]=i;else if((o=s[i])>4)c[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&r<a;)i=i<<6|63&t[r++],o--;o>1?c[n++]=65533:i<65536?c[n++]=i:(i-=65536,c[n++]=55296|i>>10&1023,c[n++]=56320|1023&i)}return u(c,n)},e.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+s[t[r]]>e?r:e}},function(t,e,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,r){"use strict";var n=r(3).rotr32;function i(t,e,r){return t&e^~t&r}function o(t,e,r){return t&e^t&r^e&r}function s(t,e,r){return t^e^r}e.ft_1=function(t,e,r,n){return 0===t?i(e,r,n):1===t||3===t?s(e,r,n):2===t?o(e,r,n):void 0},e.ch32=i,e.maj32=o,e.p32=s,e.s0_256=function(t){return n(t,2)^n(t,13)^n(t,22)},e.s1_256=function(t){return n(t,6)^n(t,11)^n(t,25)},e.g0_256=function(t){return n(t,7)^n(t,18)^t>>>3},e.g1_256=function(t){return n(t,17)^n(t,19)^t>>>10}},function(t,e,r){"use strict";var n=r(3),i=r(14),o=r(40),s=r(13),a=n.sum32,u=n.sum32_4,c=n.sum32_5,l=o.ch32,h=o.maj32,d=o.s0_256,f=o.s1_256,p=o.g0_256,g=o.g1_256,y=i.BlockHash,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=m,this.W=new Array(64)}n.inherits(v,y),t.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=u(g(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],y=this.h[2],m=this.h[3],v=this.h[4],_=this.h[5],b=this.h[6],w=this.h[7];for(s(this.k.length===r.length),n=0;n<r.length;n++){var E=c(w,f(v),l(v,_,b),this.k[n],r[n]),A=a(d(i),h(i,o,y));w=b,b=_,_=v,v=a(m,E),m=y,y=o,o=i,i=a(E,A)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],y),this.h[3]=a(this.h[3],m),this.h[4]=a(this.h[4],v),this.h[5]=a(this.h[5],_),this.h[6]=a(this.h[6],b),this.h[7]=a(this.h[7],w)},v.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";var n=r(3),i=r(14),o=r(13),s=n.rotr64_hi,a=n.rotr64_lo,u=n.shr64_hi,c=n.shr64_lo,l=n.sum64,h=n.sum64_hi,d=n.sum64_lo,f=n.sum64_4_hi,p=n.sum64_4_lo,g=n.sum64_5_hi,y=n.sum64_5_lo,m=i.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;m.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function b(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function w(t,e,r,n,i,o){var s=e&n^~e&o;return s<0&&(s+=4294967296),s}function E(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function A(t,e,r,n,i,o){var s=e&n^e&o^n&o;return s<0&&(s+=4294967296),s}function x(t,e){var r=s(t,e,28)^s(e,t,2)^s(e,t,7);return r<0&&(r+=4294967296),r}function S(t,e){var r=a(t,e,28)^a(e,t,2)^a(e,t,7);return r<0&&(r+=4294967296),r}function T(t,e){var r=s(t,e,14)^s(t,e,18)^s(e,t,9);return r<0&&(r+=4294967296),r}function P(t,e){var r=a(t,e,14)^a(t,e,18)^a(e,t,9);return r<0&&(r+=4294967296),r}function O(t,e){var r=s(t,e,1)^s(t,e,8)^u(t,e,7);return r<0&&(r+=4294967296),r}function C(t,e){var r=a(t,e,1)^a(t,e,8)^c(t,e,7);return r<0&&(r+=4294967296),r}function I(t,e){var r=s(t,e,19)^s(e,t,29)^u(t,e,6);return r<0&&(r+=4294967296),r}function k(t,e){var r=a(t,e,19)^a(e,t,29)^c(t,e,6);return r<0&&(r+=4294967296),r}n.inherits(_,m),t.exports=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=I(r[n-4],r[n-3]),o=k(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],u=O(r[n-30],r[n-29]),c=C(r[n-30],r[n-29]),l=r[n-32],h=r[n-31];r[n]=f(i,o,s,a,u,c,l,h),r[n+1]=p(i,o,s,a,u,c,l,h)}},_.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],c=this.h[5],f=this.h[6],p=this.h[7],m=this.h[8],v=this.h[9],_=this.h[10],O=this.h[11],C=this.h[12],I=this.h[13],k=this.h[14],D=this.h[15];o(this.k.length===r.length);for(var j=0;j<r.length;j+=2){var F=k,R=D,N=T(m,v),M=P(m,v),U=b(m,0,_,0,C),L=w(0,v,0,O,0,I),B=this.k[j],G=this.k[j+1],V=r[j],z=r[j+1],H=g(F,R,N,M,U,L,B,G,V,z),q=y(F,R,N,M,U,L,B,G,V,z);F=x(n,i),R=S(n,i),N=E(n,0,s,0,u),M=A(0,i,0,a,0,c);var $=h(F,R,N,M),K=d(F,R,N,M);k=C,D=I,C=_,I=O,_=m,O=v,m=h(f,p,H,q),v=d(p,p,H,q),f=u,p=c,u=s,c=a,s=n,a=i,n=h(H,q,$,K),i=d(H,q,$,K)}l(this.h,0,n,i),l(this.h,2,s,a),l(this.h,4,u,c),l(this.h,6,f,p),l(this.h,8,m,v),l(this.h,10,_,O),l(this.h,12,C,I),l(this.h,14,k,D)},_.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";function n(t){return"[object Error]"===(e=t,Object.prototype.toString.call(e))||t instanceof Error;var e}Object.defineProperty(e,"__esModule",{value:!0}),e.isError=e.inherit=e.assertError=void 0,e.assertError=function(t){if(!n(t))throw new Error("Parameter was not an error")},e.inherit=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},e.isError=n},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(9));function o(){throw new Error("Not implemented")}class s extends i.default{constructor(t){super(),this._readOnly=!1,this.dirty=!1,this.source=null,this.source=t}static encodeRaw(t,e){o()}static extractSharesFromHistory(t){o()}static getFormatID(){return o(),null}static historiesDiffer(t,e){return o(),!1}static isEncrypted(t){o()}static parseEncrypted(t,e){o()}static prepareHistoryForMerge(t){o()}static vaultFromMergedHistories(t,e){return o(),null}get history(){return this.getHistory()}get readOnly(){return this._readOnly}cloneEntry(t,e){o()}cloneGroup(t,e){o()}createEntry(t,e){o()}createGroup(t,e){o()}deleteEntry(t){o()}deleteEntryAttribute(t,e){o()}deleteEntryProperty(t,e){o()}deleteGroup(t){o()}deleteGroupAttribute(t,e){o()}deleteVaultAttribute(t){o()}erase(){Object.keys(this.source).forEach(t=>{this.source[t]=void 0,delete this.source[t]}),this.history.splice(0,1/0)}execute(t){o()}findEntryByID(t){return o(),null}findGroupByID(t){return o(),null}findGroupContainingEntryID(t){return o(),null}findGroupContainingGroupID(t){return o(),null}generateID(){o()}getAllEntries(t=null){return o(),[]}getAllGroups(t=null){return o(),[]}getEntryAttributes(t){return o(),{}}getEntryChanges(t){return o(),[]}getEntryProperties(t){return o(),{}}getFormat(){return s}getGroupAttributes(t){return o(),{}}getGroupTitle(t){return o(),""}getHistory(){return o(),[]}getItemID(t){return o(),""}getItemParentID(t){return o(),""}getVaultAttributes(){return o(),{}}getVaultID(){o()}initialise(){o()}moveEntry(t,e){o()}moveGroup(t,e){o()}optimise(){o()}setEntryAttribute(t,e,r){o()}setEntryProperty(t,e,r){o()}setGroupAttribute(t,e,r){o()}setGroupTitle(t,e){o()}setVaultAttribute(t,e){o()}}e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getAllChildGroups=e.findGroupsByTitle=void 0,e.findGroupsByTitle=function(t,e){return t.filter(t=>e instanceof RegExp?e.test(t.getTitle()):t.getTitle().indexOf(e)>=0)},e.getAllChildGroups=function(t,e){return"0"===e?[...t]:t.filter(t=>{var r;if((r=t).vault.format.getItemParentID(r._source)===e)return!0;let n;for(;null!==(n=n?n.getParentGroup():t.getParentGroup());)if(n.id===e)return!0;return!1})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getAllChildEntries=e.findEntriesByProperty=void 0,e.findEntriesByProperty=function(t,e,r){return t.filter(t=>{const n=t.getProperties(e),i=Object.keys(n);return i.length>0&&i.some(t=>{const e=n[t];return r instanceof RegExp?r.test(e):e.indexOf(r)>=0})})},e.getAllChildEntries=function(t,e){return"0"===e?[...t]:t.filter(t=>{if(t.vault.format.getItemParentID(t._source)===e)return!0;let r;for(;null!==(r=r?r.getParentGroup():t.getGroup());)if(r.id===e)return!0;return!1})}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(48)),o=n(r(11)),s=n(r(8)),a=r(4),u=r(103),c=r(45),l=r(46);let h=(()=>{class t extends i.default{static createNew(t,e="0",r=a.generateUUID()){if("0"!==e){const r=t.findGroupByID(e);if(!r)throw new Error("Failed creating group: no group found for ID: "+e);if(r.isTrash()||r.isInTrash())throw new Error("Failed creating group: cannot create within Trash group")}return t.format.createGroup(e,r),t._rebuild(),t.findGroupByID(r)}createEntry(t){const e=o.default.createNew(this.vault,this.id);return t&&e.setProperty("title",t),e}createGroup(e){const r=t.createNew(this.vault,this.id);return e&&r.setTitle(e),r}delete(t=!1){if(this.isTrash())throw new Error("Trash group cannot be deleted");const e=this.vault.getTrashGroup(),r=null!==e;if(!this.isInTrash()&&r&&!t)return this.moveTo(e),!1;this.getGroups().forEach(t=>t.delete(!0)),this.getEntries().forEach(t=>t.delete(!0)),this.vault.format.deleteGroup(this.id);const n=this.vault._groups.indexOf(this);return n>=0&&this.vault._groups.splice(n,1),this._cleanUp(),!0}deleteAttribute(t){return this.vault.format.deleteGroupAttribute(this.id,t),this}findEntryByID(t){return l.getAllChildEntries(this.vault._entries,this.id).find(e=>e.id===t)||null}findEntriesByProperty(t,e){return l.findEntriesByProperty(l.getAllChildEntries(this.vault._entries,this.id),t,e)}findGroupByID(t){return c.getAllChildGroups(this.vault._groups,this.id).find(e=>e.id===t)||null}findGroupsByTitle(t){return c.findGroupsByTitle(c.getAllChildGroups(this.vault._groups,this.id),t)}getAttribute(t){const e=this.vault.format.getGroupAttributes(this._source)||{};return void 0===t?Object.assign({},e):e.hasOwnProperty(t)?e[t]:void 0}getEntries(){return this.vault._entries.filter(t=>t.getGroup()===this)}getGroups(){return this.vault._groups.filter(t=>t.getParentGroup()===this)}getParentGroup(){const t=this.vault.format.getItemParentID(this._source);if("0"===t)return null;const e=this.vault._groups.find(e=>e.id===t);if(!e)throw new Error("Failed getting parent Group: No group containing child ID found: "+this.id);return e}getTitle(){return this.vault.format.getGroupTitle(this._source)}isInTrash(){const t=this.vault.getTrashGroup();return!!t&&null!==t.findGroupByID(this.id)}isTrash(){return"trash"===this.getAttribute(t.Attribute.Role)}moveTo(e){if(this.isTrash())throw new Error("Trash group cannot be moved");let r,n;if(e instanceof t)r=e.vault,n=e.id;else{if(!(e instanceof s.default))throw new Error("Failed moving group: Unknown target type");r=e,n="0"}if(this.vault.readOnly)throw new Error("Cannot move group: origin archive is read-only");if(r.readOnly)throw new Error("Cannot move group: target archive is read-only");return this.vault.id===r.id?this.vault.format.moveGroup(this.id,n):u.moveGroupBetweenVaults(this,e),this}setAttribute(t,e){return this.vault.format.setGroupAttribute(this.id,t,e),this}setTitle(t){return this.vault.format.setGroupTitle(this.id,t),this}_updateRefs(){this._source=this.vault.format.findGroupByID(this.id)}}return t.Attribute=Object.freeze({Role:"bc_group_role"}),t})();e.default=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(1);e.default=class{constructor(t,e){this._vault=null,this._vault=t,this._source=e,this._source.permissions=this._source.permissions||[n.VaultPermission.Manage,n.VaultPermission.Read,n.VaultPermission.Write]}get id(){return this._vault.format.getItemID(this._source)}get permissions(){return[...this._source.permissions]}get vault(){return this._vault}grantPermission(t){this.hasPermission(t)||this._source.permissions.push(t)}hasPermission(t){return this._source.permissions.includes(t)}revokeAllPermissions(){this._source.permissions=[]}revokePermission(t){this._source.permissions=this._source.permissions.filter(e=>e!==t)}_cleanUp(){this._vault=null,this._source=null}_updateRefs(){}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.describeVaultDataset=void 0;const n=r(17),{Command:i}=n.InigoCommand;e.describeVaultDataset=function t(e,r){const o="string"==typeof e.format?"0":e.id,s="0"===o?[]:e.entries||[];var a=[];if("0"===o&&("string"==typeof e.format&&a.push(n.InigoCommand.create(i.Format).addArgument(e.format).generateCommand()),e.id&&a.push(n.InigoCommand.create(i.ArchiveID).addArgument(e.id).generateCommand()),e.attributes&&Object.keys(e.attributes).forEach((function(t){a.push(n.InigoCommand.create(i.SetArchiveAttribute).addArgument(t).addArgument(e.attributes[t]).generateCommand())}))),"0"!==o){if(!r)throw new Error("No parent group ID specified");if(a.push(n.InigoCommand.create(i.CreateGroup).addArgument(r).addArgument(o).generateCommand()),e.title&&a.push(n.InigoCommand.create(i.SetGroupTitle).addArgument(o).addArgument(e.title).generateCommand()),e.attributes)for(var u in e.attributes)e.attributes.hasOwnProperty(u)&&a.push(n.InigoCommand.create(i.SetGroupAttribute).addArgument(o).addArgument(u).addArgument(e.attributes[u]).generateCommand());a.push(n.InigoCommand.generatePaddingCommand())}return s.forEach((function(t){if(a.push(n.InigoCommand.create(i.CreateEntry).addArgument(o).addArgument(t.id).generateCommand()),t.properties&&Object.keys(t.properties).forEach(e=>{a.push(n.InigoCommand.create(i.SetEntryProperty).addArgument(t.id).addArgument(e).addArgument(t.properties[e]).generateCommand())}),t.attributes)for(var e in t.attributes)t.attributes.hasOwnProperty(e)&&a.push(n.InigoCommand.create(i.SetEntryAttribute).addArgument(t.id).addArgument(e).addArgument(t.attributes[e]).generateCommand());a.push(n.InigoCommand.generatePaddingCommand())})),(e.groups||[]).forEach((function(e){a=a.concat(t(e,o))})),a}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FIELD_VALUE_TYPES=e.FACADE_VERSION=e.ENTRY_TYPES=e.DEFAULT_FIELD_TYPE=e.DEFAULT_ENTRY_TYPE=void 0;const n=r(1);e.DEFAULT_ENTRY_TYPE=n.EntryType.Login,e.DEFAULT_FIELD_TYPE=n.EntryPropertyValueType.Text,e.ENTRY_TYPES={[n.EntryType.CreditCard]:{title:"Credit Card",slug:n.EntryType.CreditCard},[n.EntryType.Login]:{title:"Login",slug:n.EntryType.Login},[n.EntryType.Note]:{title:"Note",slug:n.EntryType.Note},[n.EntryType.SSHKey]:{title:"SSH Key Pair",slug:n.EntryType.SSHKey},[n.EntryType.Website]:{title:"Website Login",slug:n.EntryType.Website}},e.FACADE_VERSION=2,e.FIELD_VALUE_TYPES={[n.EntryPropertyValueType.Note]:{title:"Note",slug:n.EntryPropertyValueType.Note},[n.EntryPropertyValueType.OTP]:{title:"OTP (One Time Password)",slug:n.EntryPropertyValueType.OTP},[n.EntryPropertyValueType.Password]:{title:"Password (secret)",slug:n.EntryPropertyValueType.Password},[n.EntryPropertyValueType.Text]:{title:"Text (default)",slug:n.EntryPropertyValueType.Text}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.historyStringToArray=e.historyArrayToString=void 0,e.historyArrayToString=function(t){return t.join("\n")},e.historyStringToArray=function(t,e){const r=t.split("\n");return e&&(r.format=e),r}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(r(44)),s=i(r(8)),a=r(4),u=r(6),c=r(0),l=r(51),h=r(53),d=r(109),f=r(110),p=r(111),g=r(19),y=r(28),m=r(1);function v(){return{id:null,a:{},g:[],e:[],c:y.getDateString()}}class _ extends o.default{constructor(t=v()){super(t)}static encodeRaw(t,e){const r=u.getSharedAppEnv().getProperty("compression/v2/compressText"),n=u.getSharedAppEnv().getProperty("crypto/v1/encryptText"),{masterPassword:i}=c.getCredentials(e.id);return Promise.resolve().then(()=>l.historyArrayToString(t)).then(t=>r(t)).then(t=>n(t,i)).then(h.sign)}static extractSharesFromHistory(t){return{}}static getFormatID(){return m.VaultFormatID.B}static historiesDiffer(t,e){return d.historiesDiffer(t,e)}static isEncrypted(t){return h.vaultContentsEncrypted(t)}static parseEncrypted(t,e){const r=u.getSharedAppEnv().getProperty("compression/v2/decompressText"),i=u.getSharedAppEnv().getProperty("crypto/v1/decryptText"),{masterPassword:o}=c.getCredentials(e.id);return Promise.resolve().then(()=>{if(!h.hasValidSignature(t))throw new Error("No valid signature in vault");return h.stripSignature(t)}).then(t=>i(t,o)).then(t=>n(this,void 0,void 0,(function*(){const e=yield r(t);return l.historyStringToArray(e,m.VaultFormatID.B)})))}static prepareHistoryForMerge(t){return t}static vaultFromMergedHistories(t,e){const r=JSON.parse(t[0]),n=JSON.parse(e[0]),i=f.mergeRawVaults(r,n),o=new s.default;return o._format=new _(i),o}cloneEntry(t,e){}cloneGroup(t,e){const r=JSON.parse(JSON.stringify(t));r.id=a.generateUUID(),r.g=e,this.source.g.push(r);const n=this.source.e.filter(e=>e.g===t.id).map(t=>{const e=JSON.parse(JSON.stringify(t));return e.g=r.id,e});this.source.e.push(...n),this.source.g.forEach(e=>{e.g===t.id&&this.cloneGroup(e,r.id)})}createEntry(t,e){const r={id:e,g:t,p:{},a:{}};this.source.e.push(r)}createGroup(t,e){const r={id:e,g:t,t:"",a:{}};this.source.g.push(r)}deleteEntry(t){const e=this.source.e.findIndex(e=>e.id===t);e>=0&&this.source.e.splice(e,1)}deleteEntryAttribute(t,e){this.source.e.find(e=>e.id===t).a[e].deleted=y.getTimestamp()}deleteEntryProperty(t,e){this.source.e.find(e=>e.id===t).p[e].deleted=y.getTimestamp()}deleteGroup(t){const e=this.source.g.findIndex(e=>e.id===t);e>=0&&this.source.g.splice(e,1)}deleteGroupAttribute(t,e){this.source.g.find(e=>e.id===t).a[e].deleted=y.getTimestamp()}deleteVaultAttribute(t){this.source.a[t].deleted=y.getTimestamp()}erase(){super.erase(),Object.assign(this.source,v()),this.emit("erased")}execute(t){let e;if(Array.isArray(t)){if(1!==t.length)throw new Error("Format-B commands array must contain a single command, received: "+t.length);e=t[0]}else e=t;this.source=JSON.parse(e),this.dirty=!0,this.emit("commandsExecuted")}findEntryByID(t){return this.source.e.find(e=>e.id===t)||null}findGroupByID(t){return this.source.g.find(e=>e.id===t)||null}findGroupContainingEntryID(t){const e=this.getAllEntries().find(e=>e.id===t);return e&&this.getAllGroups().find(t=>t.id===e.g)||null}findGroupContainingGroupID(t){const e=this.getAllGroups(),r=e.find(e=>e.id===t);return r&&e.find(t=>t.id===r.g)||null}generateID(){this.source.id=a.generateUUID()}getAllEntries(t=null){const e=this.source;return null===t?e.e:e.e.filter(e=>e.g===t)}getAllGroups(t=null){const e=this.source;return null===t?e.g:e.g.filter(e=>e.g===t)}getEntryAttributes(t){return p.valuesObjectToKeyValueObject(t.a)}getEntryChanges(t){return Object.keys(t.p).reduce((e,r)=>[...e,...t.p[r].history.map(e=>({property:r,type:e.updated===t.p[r].created?m.EntryChangeType.Created:m.EntryChangeType.Modified,ts:e.updated,value:e.value})),...t.p[r].deleted?[{property:r,type:m.EntryChangeType.Deleted,ts:t.p[r].deleted,value:null}]:[]],[])}getEntryProperties(t){return p.valuesObjectToKeyValueObject(t.p)}getFormat(){return _}getGroupAttributes(t){return p.valuesObjectToKeyValueObject(t.a)}getGroupTitle(t){return t.t}getHistory(){const t=[JSON.stringify(this.source)];return t.format=m.VaultFormatID.B,t}getItemID(t){return t.id}getItemParentID(t){return t.g}getVaultAttributes(){return p.valuesObjectToKeyValueObject(this.source.a)}getVaultID(){return this.source.id}initialise(){Object.assign(this.source,{a:this.source.a||{},g:this.source.g||[],e:this.source.e||[]}),this.generateID()}moveEntry(t,e){this.source.e.find(e=>e.id===t).g=e}moveGroup(t,e){this.source.g.find(e=>e.id===t).g=e}optimise(){}setEntryAttribute(t,e,r){const n=this.source.e.find(e=>e.id===t);if(n.a[e]){const t=n.a[e];t.history.unshift(g.valueToHistoryItem(t)),t.value=r,t.updated=y.getTimestamp()}else n.a[e]=g.newRawValue(r)}setEntryProperty(t,e,r){const n=this.source.e.find(e=>e.id===t);if(n.p[e]){const t=n.p[e];t.history.unshift(g.valueToHistoryItem(t)),t.value=r,t.updated=y.getTimestamp()}else n.p[e]=g.newRawValue(r)}setGroupAttribute(t,e,r){const n=this.source.g.find(e=>e.id===t);if(n.a[e]){const t=n.a[e];t.history.unshift(g.valueToHistoryItem(t)),t.value=r,t.updated=y.getTimestamp()}else n.a[e]=g.newRawValue(r)}setGroupTitle(t,e){this.source.g.find(e=>e.id===t).t=e}setVaultAttribute(t,e){if(this.source.a[t]){const r=this.source.a[t];r.history.unshift(g.valueToHistoryItem(r)),r.value=e,r.updated=y.getTimestamp()}else this.source.a[t]=g.newRawValue(e)}}e.default=_},function(t,e,r){"use strict";function n(t){return 0===t.indexOf("b~>buttercup/b")}function i(t){const e="b~>buttercup/b".length;return t.substr(e,t.length-e)}Object.defineProperty(e,"__esModule",{value:!0}),e.vaultContentsEncrypted=e.stripSignature=e.sign=e.hasValidSignature=e.getSignature=void 0,e.getSignature=function(){return"b~>buttercup/b"},e.hasValidSignature=n,e.sign=function(t){return n(t)?t:"b~>buttercup/b"+t},e.stripSignature=i,e.vaultContentsEncrypted=function(t){if("string"==typeof t&&n(t)){const e=i(t);return!1===/["\s\t\n~]/.test(e)}return!1}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.initiateConnection=e.completeConnection=e.buildClient=void 0;const i=n(r(55)),o=r(6),s="http://localhost:12821";e.buildClient=function(t){const e=o.getSharedAppEnv().getProperty("crypto/v1/encryptText"),r=o.getSharedAppEnv().getProperty("crypto/v1/decryptText");return{readdir:(n,o)=>{const a=i.default(s,"/get/directory");e(n,t).then(t=>fetch(a,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({payload:t})})).then(t=>{if(t.ok&&200===t.status)return t.json();throw new Error("Failed reading remote file: "+n)}).then(e=>r(e.payload,t)).then(JSON.parse).then(t=>o(null,t)).catch(o)},readFile:(e,r,n)=>{const a=o.getSharedAppEnv().getProperty("crypto/v1/encryptText"),u=o.getSharedAppEnv().getProperty("crypto/v1/decryptText"),c="function"==typeof r?r:n,l=i.default(s,"/get/file");a(e,t).then(t=>fetch(l,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({payload:t})})).then(t=>{if(t.ok&&200===t.status)return t.json();throw new Error("Failed reading remote file: "+e)}).then(e=>u(e.payload,t)).then(t=>{c(null,t)}).catch(c)},writeFile:(e,r,n,a)=>{const u=o.getSharedAppEnv().getProperty("crypto/v1/encryptText"),c="function"==typeof n?n:a;if("string"!=typeof r)throw new Error("Failed writing file: Expected data to be of type string");const l=i.default(s,"/put/file");u(JSON.stringify({filename:e,contents:r}),t).then(t=>fetch(l,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({payload:t})})).then(t=>{if(!t.ok||200!==t.status)throw new Error("Failed writing remote file: "+e);c()}).catch(c)}}},e.completeConnection=function(t){if(!t)return Promise.reject(new Error("Code is required"));const e=o.getSharedAppEnv().getProperty("crypto/v1/decryptText"),r=i.default(s,"/connect/"+t);return fetch(r).then(t=>t.json()).then(r=>{if("ok"!==r.status)throw new Error("Connection response status was not OK");const{payload:n}=r;return e(n,t)})},e.initiateConnection=function(){const t=i.default(s,"/connect");return fetch("http://localhost:12821").then(t=>t.json()).then(e=>{if("ok"!==e.status)throw new Error("Received non-OK status");if(!e.ready)throw new Error("Endpoint is not yet ready");return fetch(t).then(t=>t.json()).then(t=>{if("ok"!==t.status)throw new Error("Endpoint connection procedure failed")})})}},function(t,e,r){var n,i,o;o=function(){function t(t){var e=[];if(0===t.length)return"";if("string"!=typeof t[0])throw new TypeError("Url must be a string. Received "+t[0]);if(t[0].match(/^[^/:]+:\/*$/)&&t.length>1){var r=t.shift();t[0]=r+t[0]}t[0].match(/^file:\/\/\//)?t[0]=t[0].replace(/^([^/:]+):\/*/,"$1:///"):t[0]=t[0].replace(/^([^/:]+):\/*/,"$1://");for(var n=0;n<t.length;n++){var i=t[n];if("string"!=typeof i)throw new TypeError("Url must be a string. Received "+i);""!==i&&(n>0&&(i=i.replace(/^[\/]+/,"")),i=n<t.length-1?i.replace(/[\/]+$/,""):i.replace(/[\/]+$/,"/"),e.push(i))}var o=e.join("/"),s=(o=o.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return s.shift()+(s.length>0?"?":"")+s.join("&")}return function(){return t("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},t.exports?t.exports=o():void 0===(i="function"==typeof(n=o)?n.call(e,r,e,t):n)||(t.exports=i)},function(t,e,r){const n=r(116),i=r(29),o=r(58);Object.assign(n,{Channel:i,Task:o}),t.exports=n},function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function o(){}function s(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function a(t,e,r,n,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new s(r,n||t,o),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],a]:t._events[u].push(a):(t._events[u]=a,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),c.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},c.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,s=new Array(o);n<o;n++)s[n]=r[n].fn;return s},c.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},c.prototype.emit=function(t,e,r,n,o,s){var a=i?i+t:t;if(!this._events[a])return!1;var u,c,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,n),!0;case 5:return l.fn.call(l.context,e,r,n,o),!0;case 6:return l.fn.call(l.context,e,r,n,o,s),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var d,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,r);break;case 4:l[c].fn.call(l[c].context,e,r,n);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];l[c].fn.apply(l[c].context,u)}}return!0},c.prototype.on=function(t,e,r){return a(this,t,e,r,!1)},c.prototype.once=function(t,e,r){return a(this,t,e,r,!0)},c.prototype.removeListener=function(t,e,r,n){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||n&&!s.once||r&&s.context!==r||u(this,o);else{for(var a=0,c=[],l=s.length;a<l;a++)(s[a].fn!==e||n&&!s[a].once||r&&s[a].context!==r)&&c.push(s[a]);c.length?this._events[o]=1===c.length?c[0]:c:u(this,o)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,t.exports=c},function(t,e){class r{constructor(t,e="normal",r=null){if(t instanceof Promise!=1&&"function"!=typeof t)throw new Error("Invalid task item: Expected a Promise or Function");this._target="function"==typeof t?t:()=>t,this._stack=r,this._type=e,this._resolveFn=null,this._rejectFn=null,this._queuedPromise=new Promise((t,e)=>{this._resolveFn=t,this._rejectFn=e});const n=new Date;this._created=n.getTime()}get created(){return this._created}get queuedPromise(){return this._queuedPromise}get stack(){return this._stack}get target(){return this._target}get type(){return this._type}execute(){const t=this.target;let e;try{e=t()}catch(t){return this._rejectFn(t),Promise.resolve()}return(e instanceof Promise?e:Promise.resolve(e)).then(t=>{this._resolveFn(t)}).catch(t=>{this._rejectFn(t)})}}Object.assign(r,{TASK_TYPE_NORMAL:"normal",TASK_TYPE_HIGH_PRIORITY:"high-priority",TASK_TYPE_TAIL:"tail"}),t.exports=r},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(20));class o extends i.default{constructor(){super(...arguments),this._store={}}getAllKeys(){return Promise.resolve(Object.keys(this._store))}getValue(t){const e=this._store.hasOwnProperty(t)?this._store[t]:null;return Promise.resolve(e)}removeKey(t){return this._store[t]=void 0,delete this._store[t],Promise.resolve()}setValue(t,e){return this._store[t]=e,Promise.resolve()}}e.default=o},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(r(9)),s=i(r(56)),a=r(10),u=i(r(8)),c=i(r(12)),l=r(0),h=r(15),d=r(118),f=r(2),p=r(119),g=i(r(61)),y=r(1),m=/^#([a-f0-9]{3}|[a-f0-9]{6})$/i,v="#000000",_=1e3;let b=(()=>{class t extends o.default{constructor(e,r,n,i={}){super(),this._attachmentManager=null,this._datasource=null,this._shares=[],this._vault=null,this._vaultManager=null;const{colour:o=v,id:a=h.getUniqueID(),order:u=_,meta:c={}}=i;this._queue=new s.default,this._credentials=n,this._status=t.STATUS_LOCKED,this._id=a,this._name=e,this._type=r,this._colour=o,this._order=u,this._meta=c}static rehydrate(e){const r=JSON.parse(e);let n=r.credentials;if(2!==r.v){const{sourceCredentials:t,archiveCredentials:e}=r;if(!t||!e)throw new Error("Invalid legacy vault state: missing credentials");n=`v1\n${t}\n${e}`}const{id:i,name:o,type:s,colour:a=v,order:u=_,meta:c={}}=r;return new t(o,s,n,{id:i,colour:a,order:u,meta:c})}get attachmentManager(){return this._attachmentManager}get colour(){return this._colour}get id(){return this._id}get meta(){return Object.assign({},this._meta)}get name(){return this._name}get order(){return this._order}get status(){return this._status}get type(){return this._type}get vault(){return this._vault}set colour(t){if(!0!==m.test(t))throw new a.Layerr("Failed setting colour: Invalid format (expected hex): "+t);this._colour=t,this.emit("updated")}set order(t){if(isNaN(t)||"number"!=typeof t||t<0)throw new a.Layerr("Failed setting order: Order must be greater than or equal to 0: "+t);this._order=t,this.emit("updated")}changeMasterPassword(e,r,i={}){return n(this,void 0,void 0,(function*(){if(e===r)throw new Error("New password cannot be the same as the previous one");if(!r)throw new Error("New password must be specified");const n=this._datasource.supportsPasswordChange(),o=new c.default(i,r);let s=!1;if(this.status!==t.STATUS_UNLOCKED)s=!0,yield this.unlock(c.default.fromPassword(e));else{if(l.getCredentials(this._credentials.id).masterPassword!==e)throw new Error("Old password does not match current unlocked instance value");yield this.update()}if(n&&!(yield this._datasource.changePassword(f.prepareDatasourceCredentials(o,this._datasource.type),!0)))throw new Error("Datasource not capable of changing password at this time");yield d.storeSourceOfflineCopy(this._vaultManager._cacheStorage,this.id,null);const a=c.default.fromCredentials(this._credentials,e);l.getCredentials(a.id).masterPassword=r,yield this._updateVaultCredentials(a),s&&(yield this.lock()),n&&(yield this._datasource.changePassword(f.prepareDatasourceCredentials(o,this._datasource.type),!1)),this.emit("passwordChanged"),this.emit("updated")}))}canBeUpdated(){return this.status===t.STATUS_UNLOCKED&&!1===this._vault.format.dirty}checkOfflineCopy(){return d.sourceHasOfflineCopy(this._vaultManager._cacheStorage,this.id)}dehydrate(){return this._enqueueStateChange(()=>n(this,void 0,void 0,(function*(){const e={v:2,id:this.id,name:this.name,type:this.type,status:t.STATUS_LOCKED,colour:this.colour,order:this.order,meta:this.meta,credentials:null};if(this.status===t.STATUS_PENDING)throw new a.Layerr("Failed dehydrating source: Source in pending state: "+this.id);return this.status===t.STATUS_LOCKED?e.credentials=this._credentials:e.credentials=yield this._credentials.toSecureString(),JSON.stringify(e)})))}getOfflineContent(){return this.checkOfflineCopy().then(t=>t?d.getSourceOfflineArchive(this._vaultManager._cacheStorage,this.id):null)}localDiffersFromRemote(){return this.status!==t.STATUS_UNLOCKED?Promise.reject(new a.Layerr(`Failed diffing source: Source not unlocked (${this.status}): ${this.id}`)):"function"==typeof this._datasource.localDiffersFromRemote?this._datasource.localDiffersFromRemote(f.prepareDatasourceCredentials(this._credentials,this._datasource.type),this.vault.format.history):("text"!==this._datasource.type&&this._datasource.setContent(""),this._datasource.load(f.prepareDatasourceCredentials(this._credentials,this._datasource.type)).then(({Format:t,history:e})=>{if(t!==this.vault.format.getFormat())throw new Error("Loaded format does not match that of current vault");return t.historiesDiffer(this.vault.format.history,e)}))}lock(){return n(this,void 0,void 0,(function*(){if(this.status!==t.STATUS_UNLOCKED)throw new a.Layerr(`Failed locking source: Source in invalid state (${this.status}): ${this.id}`);yield this._enqueueStateChange(()=>n(this,void 0,void 0,(function*(){this._status=t.STATUS_PENDING;const e=this._credentials,r=this._vault,n=this._datasource,i=this._attachmentManager;try{const e=yield this._credentials.toSecureString();this._credentials=e,this._datasource=null,this._vault=null,this._attachmentManager=null,this._status=t.STATUS_LOCKED,this.emit("locked")}catch(o){throw this._credentials=e,this._datasource=n,this._vault=r,this._status=t.STATUS_UNLOCKED,this._attachmentManager=i,new a.Layerr(o,"Failed locking source")}})))}))}mergeFromRemote(){return n(this,void 0,void 0,(function*(){"text"!==this._datasource.type&&this._datasource.setContent("");const{Format:t,history:e}=yield this._datasource.load(f.prepareDatasourceCredentials(this._credentials,this._datasource.type));if(t!==this._vault.format.getFormat())throw new Error("Format loaded during merge did not match current");const r=t.vaultFromMergedHistories(this._vault.format.history,e);return this._vault._updateFormat(r.format),this._vault}))}save(){return n(this,void 0,void 0,(function*(){yield this._enqueueStateChange(()=>n(this,void 0,void 0,(function*(){(yield this.localDiffersFromRemote())&&(yield this.mergeFromRemote()),yield this._datasource.save(this._vault.format.history,f.prepareDatasourceCredentials(this._credentials,this._datasource.type)),this._vault.format.dirty=!1,yield this._updateInsights()})),"saving"),this.emit("updated")}))}supportsAttachments(){return this.status===t.STATUS_UNLOCKED&&this._datasource.supportsAttachments()}unlock(e,r={}){return n(this,void 0,void 0,(function*(){if(!c.default.isCredentials(e))throw new a.Layerr("Failed unlocking source: Invalid credentials passed to source: "+this.id);const{initialiseRemote:i=!1,loadOfflineCopy:o=!1,storeOfflineCopy:s=!0}=r;if(this.status!==t.STATUS_LOCKED)throw new a.Layerr(`Failed unlocking source: Source in invalid state (${this.status}): ${this.id}`);const{masterPassword:h}=l.getCredentials(e.id),p=this._credentials;this._status=t.STATUS_PENDING,yield this._enqueueStateChange(()=>{let e=null;return this.getOfflineContent().then(t=>(t&&o&&(e=t),function(t,e){if(/^v1\n/.test(t)){const[,r]=t.split("\n");return c.default.fromSecureString(r,e)}return c.default.fromSecureString(t,e)}(this._credentials,h))).then(r=>{const a=this._credentials=r,l=this._datasource=f.credentialsToDatasource(c.default.fromCredentials(a,h));"string"==typeof e&&l.setContent(e),l.on("updated",()=>{this._waitNonPending().then(()=>n(this,void 0,void 0,(function*(){this.status===t.STATUS_UNLOCKED&&(yield this._updateCredentialsFromDatasource()),this.emit("updated")}))).catch(t=>{console.error("Error updating datasource credentials for vault: "+this.id,t)})});const p=u.default.createWithDefaults();return(i?l.save(p.format.history,a).then(()=>{this._vault=p}):l.load(a).then(({Format:t,history:e})=>{this._vault=u.default.createFromHistory(e,t)})).then(()=>{if(s)return d.storeSourceOfflineCopy(this._vaultManager._cacheStorage,this.id,l._content);o&&(this.vault.format._readOnly=!0)}).then(()=>{this._status=t.STATUS_UNLOCKED,this.emit("unlocked"),this._attachmentManager=new g.default(this)})}).catch(e=>{throw this._status=t.STATUS_LOCKED,this._vault=null,this._datasource=null,this._credentials=p,this._attachmentManager=null,new a.Layerr(e,"Failed unlocking source")})})}))}update({skipDiff:t=!1}={}){return n(this,void 0,void 0,(function*(){yield this._enqueueStateChange(()=>(t?Promise.resolve(!1):this.localDiffersFromRemote()).then(t=>{if(t)return this.mergeFromRemote()}),"updating"),this.emit("updated")}))}write(){return n(this,void 0,void 0,(function*(){yield this._enqueueStateChange(()=>n(this,void 0,void 0,(function*(){yield this._datasource.save(this._vault.format.history,f.prepareDatasourceCredentials(this._credentials,this._datasource.type)),this._vault.format.dirty=!1,yield this._updateInsights()})),"saving"),this.emit("updated")}))}_applyShares(){}_enqueueStateChange(t,e){const r=e?[t,void 0,e]:[t];return this._queue.channel("state").enqueue(...r)}_unloadShares(){const t=this.vault.format.getFormat().extractSharesFromHistory(this.vault.format.history),{base:e}=t;delete t.base,this.vault.format.erase(),this.vault.format.execute(e),Object.keys(t).forEach(e=>{const r=this._shares.find(t=>t.id===e);if(!r)throw new Error("Failed updating extracted share: No share found in workspace for ID: "+e);r.updateHistory(t[e])})}_updateCredentialsFromDatasource(){return n(this,void 0,void 0,(function*(){if(this.status!==t.STATUS_UNLOCKED)throw new a.Layerr("Failed updating source credentials: Source is not unlocked: "+this.id);const{masterPassword:e}=l.getCredentials(this._credentials.id);this._credentials=c.default.fromCredentials(this._datasource.credentials,e)}))}_updateInsights(){return n(this,void 0,void 0,(function*(){if(this.status!==t.STATUS_UNLOCKED)throw new a.Layerr("Failed updating vault insights: Source is not unlocked: "+this.id);const e=p.generateVaultInsights(this.vault);yield this._datasource.updateInsights(e)}))}_updateVaultCredentials(e){return n(this,void 0,void 0,(function*(){if(this.status!==t.STATUS_UNLOCKED)throw new a.Layerr("Failed updating vault credentials: Source is not unlocked: "+this.id);this._credentials=e,yield this.write()}))}_waitNonPending(){return new Promise(e=>{if(this.status!==t.STATUS_PENDING)return e();const r=()=>{this.removeListener("unlocked",r),this.removeListener("locked",r),e()};this.on("unlocked",r),this.on("locked",r)})}}return t.STATUS_LOCKED=y.VaultSourceStatus.Locked,t.STATUS_PENDING=y.VaultSourceStatus.Pending,t.STATUS_UNLOCKED=y.VaultSourceStatus.Unlocked,t})();e.default=b},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=r(31),s=i(r(12)),a=i(r(11)),u=i(r(8)),c=r(6),l=r(62);e.default=class{constructor(t){this._source=t}static newAttachmentID(){return o.v4()}getAttachment(t,e){return n(this,void 0,void 0,(function*(){if(this._checkAttachmentSupport(),!(yield this.getAttachmentDetails(t,e)))throw new Error("Attachment not available: "+e);const r=yield this._getAttachmentsCredentials(),n=yield this._source._datasource.getAttachment(this._source.vault.id,e);return l.decryptAttachment(n,r)}))}getAttachmentDetails(t,e){return n(this,void 0,void 0,(function*(){this._checkAttachmentSupport();const r=`${a.default.Attributes.AttachmentPrefix}${e}`,n=t.getAttribute(r);return n?JSON.parse(n):null}))}listAttachments(t){return n(this,void 0,void 0,(function*(){this._checkAttachmentSupport();const e=t.getAttribute();return Object.keys(e).filter(t=>0===t.indexOf(a.default.Attributes.AttachmentPrefix)).map(t=>JSON.parse(e[t]))}))}removeAttachment(t,e){return n(this,void 0,void 0,(function*(){this._checkAttachmentSupport();const r=`${a.default.Attributes.AttachmentPrefix}${e}`;yield this._source._datasource.removeAttachment(this._source.vault.id,e),t.deleteAttribute(r)}))}setAttachment(t,e,r,i,o,s=new Date){return n(this,void 0,void 0,(function*(){if(this._checkAttachmentSupport(),!i||!o)throw new Error(`Attachment properties required: name/type => ${i}/${o}`);const n=`${a.default.Attributes.AttachmentPrefix}${e}`,u=yield this.getAttachmentDetails(t,e),c=yield this._getAttachmentsCredentials(),h=yield l.encryptAttachment(r,c),d=l.getBufferSize(h),f=l.getBufferSize(r),p=u?Math.max(0,d-u.sizeEncrypted):d,g=yield this._source._datasource.getAvailableStorage();if(null!==g&&p>g)throw new Error(`Not enough space to update attachment: needed = ${p} B, available = ${g} B`);const y=s.toUTCString(),m={id:e,name:i,type:o,sizeOriginal:f,sizeEncrypted:d,created:y,updated:y};yield this._source._datasource.putAttachment(this._source.vault.id,e,h,m),t.setAttribute(n,JSON.stringify(m))}))}_checkAttachmentSupport(){if(!this._source.supportsAttachments())throw new Error("Attachments not supported on source: "+this._source.id)}_getAttachmentsCredentials(){return n(this,void 0,void 0,(function*(){const{vault:t}=this._source;let e=t.getAttribute(u.default.Attribute.AttachmentsKey);if(!e){const r=c.getSharedAppEnv().getProperty("crypto/v1/randomString");e=yield r(48),t.setAttribute(u.default.Attribute.AttachmentsKey,e),yield this._source.save()}return s.default.fromPassword(e)}))}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBufferSize=e.encryptAttachment=e.decryptAttachment=e.ATTACHMENT_EXT=void 0;const n=r(6),i=r(0);e.ATTACHMENT_EXT="bcatt",e.decryptAttachment=function(t,e){const{masterPassword:r}=i.getCredentials(e.id);return n.getSharedAppEnv().getProperty("crypto/v1/decryptBuffer")(t,r)},e.encryptAttachment=function(t,e){const{masterPassword:r}=i.getCredentials(e.id);return n.getSharedAppEnv().getProperty("crypto/v1/encryptBuffer")(t,r)},e.getBufferSize=function(t){return void 0!==t.byteLength?t.byteLength:t.length}},function(t,e){},function(t,e,r){const{sequence:n}=r(126),i=()=>{};function o(t){return{original:t,methods:[t],final:!1}}t.exports=class{constructor(){this._configuration={registry:{},getEmptyAction:"null"},this.__type__="@@HOTPATCHER"}get configuration(){return this._configuration}get getEmptyAction(){return this.configuration.getEmptyAction}set getEmptyAction(t){this.configuration.getEmptyAction=t}control(t,e=!1){if(!t||"@@HOTPATCHER"!==t.__type__)throw new Error("Failed taking control of target HotPatcher instance: Invalid type or object");return Object.keys(t.configuration.registry).forEach(r=>{this.configuration.registry.hasOwnProperty(r)?e&&(this.configuration.registry[r]=Object.assign({},t.configuration.registry[r])):this.configuration.registry[r]=Object.assign({},t.configuration.registry[r])}),t._configuration=this.configuration,this}execute(t,...e){return(this.get(t)||i)(...e)}get(t){const e=this.configuration.registry[t];if(!e)switch(this.getEmptyAction){case"null":return null;case"throw":throw new Error("Failed handling method request: No method provided for override: "+t);default:throw new Error("Failed handling request which resulted in an empty method: Invalid empty-action specified: "+this.getEmptyAction)}return n(...e.methods)}isPatched(t){return!!this.configuration.registry[t]}patch(t,e,{chain:r=!1}={}){if(this.configuration.registry[t]&&this.configuration.registry[t].final)throw new Error(`Failed patching '${t}': Method marked as being final`);if("function"!=typeof e)throw new Error(`Failed patching '${t}': Provided method is not a function`);if(r)this.configuration.registry[t]?this.configuration.registry[t].methods.push(e):this.configuration.registry[t]=o(e);else if(this.isPatched(t)){const{original:r}=this.configuration.registry[t];this.configuration.registry[t]=Object.assign(o(e),{original:r})}else this.configuration.registry[t]=o(e);return this}patchInline(t,e,...r){return this.isPatched(t)||this.patch(t,e),this.execute(t,...r)}plugin(t,...e){return e.forEach(e=>{this.patch(t,e,{chain:!0})}),this}restore(t){if(!this.isPatched(t))throw new Error("Failed restoring method: No method present for key: "+t);if("function"!=typeof this.configuration.registry[t].original)throw new Error("Failed restoring method: Original method not found or of invalid type for key: "+t);this.configuration.registry[t].methods=[this.configuration.registry[t].original]}setFinal(t){if(!this.configuration.registry.hasOwnProperty(t))throw new Error(`Failed marking '${t}' as final: No method found for key`);return this.configuration.registry[t].final=!0,this}}},function(t,e,r){"use strict";r.r(e),r.d(e,"isBrowser",(function(){return i}));var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i="object"===("undefined"==typeof window?"undefined":n(window))&&"object"===("undefined"==typeof document?"undefined":n(document))&&9===document.nodeType;e.default=i},function(t,e){t.exports={ERR_ABORTED:50,ERR_REQUEST_FAILED:51,ERR_STATUS_INVALID:52}},function(t,e,r){const{Layerr:n}=r(10);t.exports={handleError:function(t){if(t.responseHeaders&&t.responseHeaders["www-authenticate"])throw new n({cause:t,info:{authFailure:/error=invalid_token/.test(t.responseHeaders["www-authenticate"])}},"Request failed");throw new n(t,"Request failed")}}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(9)),o=r(146),s=n(r(148));let a;class u extends i.default{constructor(){super(),this._handlers={}}static getSharedManager(){return a||(a=new u,void 0!==s.default._bcupAuthMgr&&console.warn("Detected multiple Buttercup authentication managers for datasources: Multiple copies of the same library may have been bundled together"),s.default._bcupAuthMgr=!0),a}executeAuthHandlers(t,e){const r=this._handlers[t];return Array.isArray(r)?Promise.resolve().then(()=>o.forEachAsync(r,t=>t(e))).then(()=>{this.emit("authHandlersExecuted",{datasource:e,datasourceType:t})}):Promise.reject(new Error("Failed executing auth handlers: No handlers registered for datasource type: "+t))}registerHandler(t,e){if("function"!=typeof e)throw new Error("Failed registering handler: Argument was not a function");this._handlers[t]=this._handlers[t]||[],this._handlers[t].push(e)}}e.default=u},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=r(10),s=r(30),a=i(r(9)),u=r(23),c=(i(r(150)),r(151)),l=r(16),h=r(152);class d extends a.default{constructor(t,e,r,n){super(),this._accessToken=r,this._refreshToken=n,this._lastDigest=null,this._lastDigestTime=null,this._clientID=t,this._clientSecret=e,this.request=s.request}static exchangeAuthCodeForTokens(t,e,r,n){const i=u.Base64.encode(`${e}:${r}`),a=encodeURIComponent(n),l={url:c.OAUTH_TOKEN_URI,method:"POST",headers:{Authorization:"Basic "+i,"Content-Type":"application/x-www-form-urlencoded"},body:`grant_type=authorization_code&code=${t}&redirect_uri=${a}`};return s.request(l).then(t=>{const{data:{access_token:e,refresh_token:r,token_type:n}}=t;if(!/^[Bb]earer$/.test(n))throw new Error("Invalid token type: "+n);if(!e||!r)throw new Error("Not all expected tokens were returned by the server");return{accessToken:e,refreshToken:r}}).catch(t=>{throw new o.Layerr(t,"Failed exchanging auth code for tokens")})}static generateAuthorisationURL(t){const e=encodeURIComponent(c.OAUTH_REDIRECT_URI);return`${c.OAUTH_AUTHORISE_URI}?response_type=code&client_id=${t}&redirect_uri=${e}`}get accessToken(){return this._accessToken}get digest(){return this._lastDigest}get refreshToken(){return this._refreshToken}changePassword(t,e){return n(this,void 0,void 0,(function*(){const r={url:c.API_OWN_PASS_CHANGE,method:"PUT",headers:{Authorization:"Bearer "+this.accessToken,"Content-Type":"application/json"},body:JSON.stringify({password:t,passwordToken:e})};return this.request(r).then(t=>{const{data:e}=t;if("ok"!==e.status)throw new Error("Invalid password change status")}).catch(r=>this._handleRequestFailure(r).then(()=>this.changePassword(t,e))).catch(t=>{throw new o.Layerr(t,"Failed changing password")})}))}deleteAttachment(t){const e={url:c.API_ATTACHMENT.replace("[ATTACHMENT_ID]",t),method:"DELETE",headers:{Authorization:"Bearer "+this.accessToken}};return this.request(e).then(t=>{const{data:e}=t;if("ok"!==e.status)throw new Error("Invalid delete-attachment response")}).catch(e=>this._handleRequestFailure(e).then(()=>this.deleteAttachment(t))).catch(t=>{throw new o.Layerr(t,"Failed deleting attachment")})}fetchAttachment(t){const e={url:c.API_ATTACHMENT.replace("[ATTACHMENT_ID]",t),method:"GET",headers:{Authorization:"Bearer "+this.accessToken},responseType:"buffer"};return this.request(e).then(t=>{const{headers:e,data:r}=t,{"x-mb-att-name":n,"x-mb-att-size":i,"x-mb-att-type":o}=e;return{name:n,size:parseInt(i,10),type:o,data:h.isTypedArray(r)?r.buffer:r}}).catch(e=>this._handleRequestFailure(e).then(()=>this.fetchAttachment(t))).catch(t=>{throw new o.Layerr(t,"Failed fetching attachment")})}fetchAttachmentDetails(t){const e={url:c.API_ATTACHMENT.replace("[ATTACHMENT_ID]",t),method:"HEAD",headers:{Authorization:"Bearer "+this.accessToken}};return this.request(e).then(t=>{const{headers:{"x-mb-att-name":e,"x-mb-att-size":r,"x-mb-att-type":n}}=t;return{name:e,size:parseInt(r,10),type:n}}).catch(e=>this._handleRequestFailure(e).then(()=>this.fetchAttachmentDetails(t))).catch(t=>{throw new o.Layerr(t,"Failed fetching attachment details")})}fetchShares(t){if(t.length<=0)return Promise.resolve({});const e={url:`${c.API_SHARES}?ids=${t.join(",")}`,method:"GET",headers:{Authorization:"Bearer "+this.accessToken},responseType:"text"};return this.request(e).then(t=>function(t){const e={},r=t.split("\n");for(;r.length>0;){const n=r.shift();if(!/^\<--\(/.test(n))continue;let i;try{i=JSON.parse(n.replace(/^\<--\(/,"").replace(/\)--\>$/,""))}catch(t){throw new o.Layerr(t,"Invalid share metadata")}if(!i.id)throw new Error("Multiplexed share definition invalid:\n\t"+n);e[i.id]=Object.assign(i,{contents:r.shift()})}return e}(t.data)).catch(e=>this._handleRequestFailure(e).then(()=>this.fetchShares(t))).catch(t=>{throw new o.Layerr(t,"Failed retrieving shares")})}fetchUserVault(){const t={url:c.API_OWN_ARCHIVE,method:"GET",headers:{Authorization:"Bearer "+this.accessToken},responseType:"text"};return this.request(t).then(t=>{const{data:e,headers:r}=t,n=parseInt(r["x-mb-updateid"],10);if(!n)throw new Error("Invalid vault response: Invalid update ID header");return{archive:e,updateID:n}}).catch(t=>this._handleRequestFailure(t).then(()=>this.fetchUserVault())).catch(t=>{throw new o.Layerr(t,"Could not retrieve vault")})}fetchUserVaultDetails(){const t={url:c.API_OWN_ARCHIVE_DETAILS,method:"GET",headers:{Authorization:"Bearer "+this.accessToken}};return this.request(t).then(t=>{const{data:{details:{id:e,updateID:r,created:n,lastUpdate:i}}}=t;return{id:e,updateID:r,created:n,lastUpdate:i}}).catch(t=>this._handleRequestFailure(t).then(()=>this.fetchUserVaultDetails())).catch(t=>{throw new o.Layerr(t,"Could not retrieve vault details")})}retrieveDigest(){const t={url:c.API_OWN_DIGEST,method:"GET",headers:{Authorization:"Bearer "+this.accessToken}};return this.request(t).then(t=>{const{data:e}=t;if("ok"!==e.status)throw new Error("Invalid digest response");return this._lastDigest=e,this._lastDigestTime=Date.now(),e}).catch(t=>this._handleRequestFailure(t).then(()=>this.retrieveDigest())).catch(t=>{throw new o.Layerr(t,"Failed retrieving digest information")})}retrieveUsersList(){return n(this,void 0,void 0,(function*(){yield this.updateDigestIfRequired();const t=this.digest.organisations.map(t=>t.id);return t.length<=0?[]:Promise.all(t.map(t=>this.retrieveUsersListForOrganisation(t))).then(t=>t.reduce((t,e)=>[...t,...e],[])).catch(t=>{throw new o.Layerr(t,"Failed retrieving users list")})}))}retrieveUsersListForOrganisation(t){const e={url:c.API_ORG_USERS.replace("[ORG_ID]",t),method:"GET",headers:{Authorization:"Bearer "+this.accessToken}};return this.request(e).then(t=>{const{data:e}=t;if("ok"!==e.status||!e.users)throw new Error("Invalid users list response");return e.users}).catch(e=>this._handleRequestFailure(e).then(()=>this.retrieveUsersListForOrganisation(t))).catch(t=>{throw new o.Layerr(t,"Failed retrieving organisation users")})}testPasswordChange(t){return n(this,void 0,void 0,(function*(){const e={url:c.API_OWN_PASS_CHANGE_VERIFY,method:"POST",headers:{Authorization:"Bearer "+this.accessToken,"Content-Type":"application/json"},body:JSON.stringify({passwordToken:t})};return this.request(e).then(t=>{const{data:e}=t;if("ok"!==e.status)throw new Error("Password change not possible: Potentially invalid account state or token")}).catch(e=>this._handleRequestFailure(e).then(()=>this.testPasswordChange(t))).catch(t=>{throw new o.Layerr(t,"Failed checking password-change availability")})}))}updateDigestIfRequired(){return n(this,void 0,void 0,(function*(){(!this._lastDigest||Date.now()-this._lastDigestTime>=1e4)&&(yield this.retrieveDigest())}))}uploadAttachment(t,e,r,i){return n(this,void 0,void 0,(function*(){const n={"Content-Disposition":'form-data; name="attachment"; filename='+JSON.stringify(e),Authorization:"Bearer "+this.accessToken};let s;s=new FormData,s.append("attachment",new Blob([i]),e),s.append("name",e),s.append("type",r);const a={url:c.API_ATTACHMENT.replace("[ATTACHMENT_ID]",t),method:"POST",headers:n,body:s};return this.request(a).then(t=>{const{data:e}=t;if("ok"!==e.status)throw new Error("Server rejected attachment upload")}).catch(n=>this._handleRequestFailure(n).then(()=>this.uploadAttachment(t,e,r,i))).catch(t=>{throw new o.Layerr(t,"Failed uploading attachment")})}))}writeInsights(t){return n(this,void 0,void 0,(function*(){yield this.updateDigestIfRequired();const{avgPassLen:e=null,duplicatePasswords:r=null,entries:n=null,groups:i=null,longPassLen:s=null,shortPassLen:a=null,trashEntries:u=null,trashGroups:l=null,usernames:h=null,weakPasswords:d=null}=t,f={url:c.API_INSIGHTS,method:"PUT",headers:{Authorization:"Bearer "+this.accessToken,"Content-Type":"application/json"},body:JSON.stringify({insights:{avgPassLen:e,duplicatePasswords:r,entries:n,groups:i,longPassLen:s,shortPassLen:a,trashEntries:u,trashGroups:l,usernames:h,weakPasswords:d},vaultID:this.digest.archive_id})};return this.request(f).then(t=>{const{data:e}=t;if("ok"!==e.status)throw new Error("Invalid insights update response")}).catch(e=>this._handleRequestFailure(e).then(()=>this.writeInsights(t))).catch(t=>{throw new o.Layerr(t,"Failed updating vault/account insights")})}))}writeUserArchive(t,e,r){return n(this,void 0,void 0,(function*(){const n={url:c.API_OWN_ARCHIVE,method:"PUT",headers:{Authorization:"Bearer "+this.accessToken,"Content-Type":"text/plain","x-mb-updateid":""+e,"x-mb-newupdateid":""+r},body:t},i=l.detectFormat(t);if(!i||!i.isEncrypted(t))throw new Error("Vault contents not in expected encrypted form");return this.request(n).then(t=>{const{data:e}=t;if("ok"!==e.status)throw new Error("Invalid vault update response: Changes may not have been saved")}).catch(n=>this._handleRequestFailure(n).then(()=>this.writeUserArchive(t,e,r))).catch(t=>{throw new o.Layerr(t,"Failed uploading vault contents")})}))}_handleRequestFailure(t){return n(this,void 0,void 0,(function*(){if(t.responseHeaders&&"object"==typeof t.responseHeaders&&t.responseHeaders["x-mb-oauth"])switch(t.responseHeaders["x-mb-oauth"]){case"token_expired":return this._performTokenRefresh();default:throw new o.Layerr({cause:t,info:{"x-mb-oauth":t.responseHeaders["x-mb-oauth"]}},"Unrecognised authorisation failure type: "+t.responseHeaders["x-mb-oauth"])}throw t}))}_performTokenRefresh(){const t=u.Base64.encode(`${this._clientID}:${this._clientSecret}`),e={url:c.OAUTH_TOKEN_URI,method:"POST",headers:{Authorization:"Basic "+t,"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=refresh_token&refresh_token="+this.refreshToken};return this.request(e).then(t=>{const{data:{access_token:e,token_type:r}}=t;if(!/^[Bb]earer$/.test(r))throw new Error("Invalid token type: "+r);if(!e)throw new Error("Access token was not returned by the server");this._accessToken=e,this.emit("tokensUpdated")}).catch(t=>{throw new o.Layerr(t,"Failed exchanging refresh token for new access token")})}}e.default=d},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e},s=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;const a=r(32),u=r(73);let c=!1;e.init=function(){if(c)return;c=!0;const t=a.getSharedAppEnv();u.applyWebConfiguration(t)};var l=r(90);Object.defineProperty(e,"LocalFileDatasource",{enumerable:!0,get:function(){return l.default}});var h=r(112);Object.defineProperty(e,"LocalStorageInterface",{enumerable:!0,get:function(){return h.default}}),e.localFileClient=o(r(54)),s(r(113),e)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createAppEnv=void 0;const n=r(33);function i(t,e={}){const{defaultValue:r=null,failIfNotExist:n=!0}=e;if(void 0!==this.properties[t])return this.properties[t];if(n)throw new Error(`Unable to get application environment property: '${t}' does not exist`);return r}function o(t){return void 0!==this.properties[t]}function s(t){const e=a.bind(this);for(const r in t)e(r,t[r])}function a(t,e){if(void 0!==this.properties[t])throw new Error(`Unable to set application environment property: '${t}' already exists`);n.assignObjImmutableProp(this.properties,t,e)}e.createAppEnv=function(){const t={},e={properties:{}};return n.assignObjImmutableProp(t,"getProperty",i.bind(e)),n.assignObjImmutableProp(t,"hasProperty",o.bind(e)),n.assignObjImmutableProp(t,"setProperties",s.bind(e)),n.assignObjImmutableProp(t,"setProperty",a.bind(e)),t}},function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.getGlobal=void 0,e.getGlobal=function(){if("undefined"!=typeof window)return window;if(void 0!==t)return t;if("undefined"!=typeof self)return self;throw new Error("Unable to detect any global variable/context")}}).call(this,r(21))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.applyWebConfiguration=void 0;const n=r(74),i=r(77),o=r(86),s=r(87),a=r(88);e.applyWebConfiguration=function(t){t.setProperties(n.getCryptoResources()),t.setProperties(i.getCompressionResources()),t.setProperties(o.getCompressionResources()),t.setProperties(s.getEnvironmentResources()),t.setProperties(a.getNetResources())}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCryptoResources=void 0;const n=r(75),i=r(76);let o=null;function s(t,e){return n.createSession().decrypt(t,e)}function a(t,e){const r=n.createSession();return o>0&&r.setDerivationRounds(o),r.encrypt(t,e)}function u(t){return Promise.resolve().then(()=>{const e=i.CRYPTO_RANDOM_STRING_CHARS.length;return new Uint16Array(t).reduce((t,r)=>{const n=Math.floor(r/65535*e);return`${t}${i.CRYPTO_RANDOM_STRING_CHARS[n]}`},"")})}function c(t=null){o=t}e.getCryptoResources=function(){return{"crypto/v1/decryptBuffer":s,"crypto/v1/encryptBuffer":a,"crypto/v1/decryptText":s,"crypto/v1/encryptText":a,"crypto/v1/randomString":u,"crypto/v1/setDerivationRounds":c}}},function(t,e,r){window,t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";var n;r.r(e),function(t){t.CBC="cbc",t.GCM="gcm"}(n||(n={}));var i=n.CBC,o=25e4,s=[n.CBC,n.GCM];function a(t){if(-1===s.indexOf(t))throw new Error("Invalid encryption/decryption method: ".concat(t))}function u(t,e,r){return r?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,l(e).apply(this,arguments))}var r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,t),(r=[{key:"decrypt",value:function(t,e){try{var r="string"==typeof t?this.options.unpack_text(t):this.options.unpack_data(t),n=r.salt,i=r.rounds,o=r.method,s=this.options["decryption_".concat(o)];return u(this._deriveKey(e,n,i,o),(function(t){return s(r,t)}))}catch(t){return Promise.reject(t)}}},{key:"encrypt",value:function(t,e){try{var r=this,n=r.options,i=n.generateIV,o=n.method,s=r.options["encryption_".concat(o)];return u(Promise.all([r._deriveNewKey(e),i()]),(function(e){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),2!==r.length);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e),i=n[0],o=n[1];return u(s(t,i,o),(function(e){return"string"==typeof t?r.options.pack_text(e):r.options.pack_data(e)}))}))}catch(t){return Promise.reject(t)}}},{key:"_deriveKey",value:function(t,e,r,i){var o=this.options,s=o.derivationRounds,a=o.method,u=o.pbkdf2,c=i||a,l=this.options.deriveKey;return(c===n.GCM?function(){return l(u,t,e,r||s,!1)}:function(){return l(u,t,e,r||s)})()}},{key:"_deriveNewKey",value:function(t){try{var e=this,r=e.options;return u((0,r.generateSalt)(r.saltLength),(function(r){return e._deriveKey(t,r)}))}catch(t){return Promise.reject(t)}}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,r),e}(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseOptions=Object.assign({},e),this._options=e}var e;return(e=[{key:"overrideDecryption",value:function(t,e){return a(t),this._options["decryption_".concat(t)]=e||this._baseOptions["decryption_".concat(t)],this}},{key:"overrideEncryption",value:function(t,e){return a(t),this._options["encryption_".concat(t)]=e||this._baseOptions["encryption_".concat(t)],this}},{key:"overrideIVGeneration",value:function(t){return this._options.generateIV=t||this._baseOptions.generateIV,this}},{key:"overrideKeyDerivation",value:function(t){return this._options.deriveKey=t||this._baseOptions.deriveKey,this}},{key:"overridePBKDF2",value:function(t){return this._options.pbkdf2=t||this._baseOptions.pbkdf2,this}},{key:"overrideSaltGeneration",value:function(t){return this._options.generateSalt=t||this._baseOptions.generateSalt,this}},{key:"reset",value:function(){return this._options=this._baseOptions,this}},{key:"setDerivationRounds",value:function(t){return void 0===t?this._options.derivationRounds=o:"number"==typeof t&&(this._options.derivationRounds=t),this}},{key:"use",value:function(t){return a(t),this._options.method=t,this}},{key:"options",get:function(){return Object.assign({},this._options)}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,e),t}());function f(t){var e=Array.from(new Uint8Array(t)).map((function(t){return String.fromCharCode(t)})).join("");return btoa(e)}function p(t){for(var e,r=new Uint8Array(t),n="",i=0;i<r.byteLength;i+=1)(e=r[i].toString(16)).length<2&&(e="0"+e),n+=e;return n}function g(t){return(new TextDecoder).decode(t)}function y(t){for(var e=atob(t),r=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n+=1)r[n]=e.charCodeAt(n);return r.buffer}function m(t){if(t.length<=0)throw new Error("Failed concatenating array buffers: At least one must be passed");var e=t.reduce((function(t,e){return t+e.byteLength}),0),r=new Uint8Array(e),n=0;return t.forEach((function(t){r.set(new Uint8Array(t),n),n+=t.byteLength})),r.buffer}function v(t){var e=t.match(/[\da-f]{2}/gi).map((function(t){return parseInt(t,16)}));return new Uint8Array(e).buffer}function _(t){return(new TextEncoder).encode(t)}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function w(t,e,r){return r?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function E(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}var A=E((function(t,e,r,n){!function(){if(!window.TextEncoder||!window.TextDecoder)throw new Error("TextEncoder is not available")}();var i=window.crypto.subtle,o={name:"PBKDF2",hash:"SHA-256",salt:_(e),iterations:r},s=n/8/2;return w(i.importKey("raw",_(t),{name:"PBKDF2"},!1,["deriveBits"]),(function(t){return w(i.deriveBits(o,t,n),(function(t){return w(Promise.all([i.importKey("raw",t.slice(0,s),"AES-CBC",!0,["encrypt","decrypt"]),i.importKey("raw",t.slice(s,2*s),"AES-CBC",!0,["encrypt","decrypt"])]),(function(t){var e=b(t,2),r=e[0],n=e[1];return w(Promise.all([i.exportKey("raw",r),i.exportKey("raw",n)]),(function(t){var e,r,n=b(t,2),i=n[0],o=n[1];return e=m([i,o]),r=e.toString||function(){},e.toString=function(t){return"hex"===t?p(e):r.call(e,t)},e}))}))}))}))})),x=E((function(t,e,r,n){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(!e)throw new Error("Failed deriving key: Password must be provided");if(!r)throw new Error("Failed deriving key: Salt must be provided");if(!n||n<=0)throw new Error("Failed deriving key: Rounds must be greater than 0");var o=i?8*(T+S):8*T;return w(t(e,r,n,o),(function(t){var e=t.toString("hex"),o=e.length,s=v(i?e.substr(0,o/2):e);return{salt:r,key:s,rounds:n,hmac:i?v(e.substr(o/2,o/2)):null}}))})),S=32,T=32;function P(t,e,r){return r?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function O(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}var C=O((function(t){if(t<=0)throw new Error("Failed generating salt: Invalid length supplied: ".concat(t));for(var e=B(),r="";r.length<t;){var n=new Uint8Array(3);e.getRandomValues(n);var i=n.reduce((function(t,e){return t+String.fromCharCode(e)}),"");(r+=btoa(i)).length>t&&(r=r.substr(0,t))}return r})),I=O((function(){var t=new Uint8Array(16);return B().getRandomValues(t),t.buffer})),k=O((function(t,e,r){var i=B(),o=e.rounds,s=new Uint8Array(r),a=p(r),u="string"==typeof t,c=u?_(t):t;return P(i.subtle.importKey("raw",e.key,{name:N},!1,["encrypt"]),(function(t){return P(i.subtle.encrypt({name:N,iv:s,additionalData:_("".concat(a).concat(e.salt))},t,c),(function(t){var r,i,s=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),2!==r.length);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}((i=M/8,[(r=t).slice(0,r.byteLength-i),r.slice(r.byteLength-i)])),c=s[0],l=p(s[1]),h=u?f(c):c;return{method:n.GCM,iv:a,salt:e.salt,rounds:o,content:h,auth:l}}))}))})),D=O((function(t,e,r){var i=B(),o=e.rounds,s=e.salt,a=new Uint16Array(r),u=p(r),c="string"==typeof t,l=c?_(t):t;return P(i.subtle.importKey("raw",e.key,{name:R},!1,["encrypt"]),(function(t){return P(i.subtle.importKey("raw",e.hmac,{name:L,hash:U},!1,["sign"]),(function(e){return P(i.subtle.encrypt({name:R,iv:a},t,l),(function(t){var r=c?f(t):t,i=c?_("".concat(r).concat(u).concat(s)):m([r,_(u),_(s)]);return P(window.crypto.subtle.sign(L,e,i),(function(t){var e=p(t);return{method:n.CBC,auth:e,iv:u,salt:s,rounds:o,content:r}}))}))}))}))})),j=O((function(t,e){var r=B(),n=t.auth,i=t.content,o=t.iv,s=t.salt,a=v(o),u=v(n),c="string"==typeof i,l=m(c?[y(i),u]:[i,u]);return P(r.subtle.importKey("raw",e.key,{name:N},!1,["decrypt"]),(function(t){return P(r.subtle.decrypt({name:N,iv:a,additionalData:_("".concat(o).concat(s))},t,l),(function(t){return c?g(t):t}))}))})),F=O((function(t,e){var r=B(),n=t.auth,i=t.content,o=t.iv,s=t.salt,a=v(o),u=_(o),c=_(s),l=v(n),h="string"==typeof i,d=h?y(i):i;return P(r.subtle.importKey("raw",e.key,{name:R},!1,["decrypt"]),(function(t){return P(r.subtle.importKey("raw",e.hmac,{name:L,hash:U},!1,["verify"]),(function(e){var n=h?_("".concat(i).concat(o).concat(s)):m([d,u,c]);return P(r.subtle.verify(L,e,l,n),(function(e){if(!e)throw new Error("Authentication failed while decrypting content");return P(r.subtle.decrypt({name:R,iv:a},t,d),(function(t){return h?g(t):t}))}))}))}))})),R="AES-CBC",N="AES-GCM",M=128,U="SHA-256",L="HMAC";function B(){return window.crypto||window.msCrypto}function G(){return"iocane/1".split("").map((function(t){return t.charCodeAt(0)}))}function V(t){return[t.content,t.iv,t.salt,t.auth,t.rounds,t.method].join("$")}function z(t){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),6!==r.length);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(t.split("$")),r=e[0],n=e[1],o=e[2],s=e[3],a=e[4],u=e[5];return{content:r,iv:n,salt:o,auth:s,rounds:a?parseInt(a,10):1e3,method:u||i}}function H(t){var e=new Uint8Array(G()).buffer,r=t.content,n=t.iv,i=t.salt,o=t.auth,s=t.rounds,a=t.method;return m([e].concat(function(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}([r,n,i,o,s,a].reduce((function(t,e){var r,n,i;if("string"==typeof e||"number"==typeof e)r=_("".concat(e));else{if(!(e instanceof ArrayBuffer))throw new Error("Failed packing data: Invalid component type: ".concat(typeof e));r=e}return t.push((n=r.byteLength,i=new ArrayBuffer(4),new DataView(i).setUint32(0,n,!1),i)),t.push(r),t}),[]))))}function q(t){var e=new Uint8Array(G()).buffer,r=e.byteLength;if(!function(t,e){if(t.byteLength!==e.byteLength)return!1;for(var r=new Uint8Array(t),n=new Uint8Array(e),i=0;i<t.byteLength;i+=1)if(r[i]!==n[i])return!1;return!0}(t.slice(0,r),e))throw new Error("Failed unpacking data: Signature mismatch");for(var n=r,i=[],o=new DataView(t);n<t.byteLength;){var s=o.getUint32(n);n+=4;var a=t.slice(n,n+s);n+=s,i.push(a)}var u=i[0],c=i[1],l=i[2],h=i[3],d=i[4],f=i[5];return{content:u,iv:g(c),salt:g(l),auth:g(h),rounds:parseInt(g(d),10),method:g(f)}}function $(){return new d({decryption_cbc:F,decryption_gcm:j,derivationRounds:o,deriveKey:x,encryption_cbc:D,encryption_gcm:k,generateIV:I,generateSalt:C,method:i,pack_data:H,pack_text:V,pbkdf2:A,saltLength:12,unpack_data:q,unpack_text:z})}r.d(e,"createSession",(function(){return $}))}])},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRYPTO_RANDOM_STRING_CHARS=void 0,e.CRYPTO_RANDOM_STRING_CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789~-_=+[]{}|;:,.<>?!@#$%^&*()"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCompressionResources=void 0;const n=r(34);function i(t){return n.gzip(t,{level:9,to:"string"})}function o(t){return n.ungzip(t,{to:"string"})}e.getCompressionResources=function(){return{"compression/v1/compressText":i,"compression/v1/decompressText":o}}},function(t,e,r){"use strict";var n=r(79),i=r(5),o=r(37),s=r(22),a=r(38),u=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==r)throw new Error(s[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var l;if(l="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(r=n.deflateSetDictionary(this.strm,l)))throw new Error(s[r]);this._dict_set=!0}}function l(t,e){var r=new c(e);if(r.push(t,!0),r.err)throw r.msg||s[r.err];return r.result}c.prototype.push=function(t,e){var r,s,a=this.strm,c=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=o.string2buf(t):"[object ArrayBuffer]"===u.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(c),a.next_out=0,a.avail_out=c),1!==(r=n.deflate(a,s))&&0!==r)return this.onEnd(r),this.ended=!0,!1;0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((a.avail_in>0||0===a.avail_out)&&1!==r);return 4===s?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==s||(this.onEnd(0),a.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=c,e.deflate=l,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,l(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,l(t,e)}},function(t,e,r){"use strict";var n,i=r(5),o=r(80),s=r(35),a=r(36),u=r(22);function c(t,e){return t.msg=u[e],e}function l(t){return(t<<1)-(t>4?9:0)}function h(t){for(var e=t.length;--e>=0;)t[e]=0}function d(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function f(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,d(t.strm)}function p(t,e){t.pending_buf[t.pending++]=e}function g(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function y(t,e){var r,n,i=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,c=t.window,l=t.w_mask,h=t.prev,d=t.strstart+258,f=c[o+s-1],p=c[o+s];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do{if(c[(r=e)+s]===p&&c[r+s-1]===f&&c[r]===c[o]&&c[++r]===c[o+1]){o+=2,r++;do{}while(c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&o<d);if(n=258-(d-o),o=d-258,n>s){if(t.match_start=e,s=n,n>=a)break;f=c[o+s-1],p=c[o+s]}}}while((e=h[e&l])>u&&0!=--i);return s<=t.lookahead?s:t.lookahead}function m(t){var e,r,n,o,u,c,l,h,d,f,p=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-262)){i.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=r=t.hash_size;do{n=t.head[--e],t.head[e]=n>=p?n-p:0}while(--r);e=r=p;do{n=t.prev[--e],t.prev[e]=n>=p?n-p:0}while(--r);o+=p}if(0===t.strm.avail_in)break;if(c=t.strm,l=t.window,h=t.strstart+t.lookahead,d=o,f=void 0,(f=c.avail_in)>d&&(f=d),r=0===f?0:(c.avail_in-=f,i.arraySet(l,c.input,c.next_in,f,h),1===c.state.wrap?c.adler=s(c.adler,l,f,h):2===c.state.wrap&&(c.adler=a(c.adler,l,f,h)),c.next_in+=f,c.total_in+=f,f),t.lookahead+=r,t.lookahead+t.insert>=3)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+3-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function v(t,e){for(var r,n;;){if(t.lookahead<262){if(m(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-262&&(t.match_length=y(t,r)),t.match_length>=3)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(f(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(f(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}function _(t,e){for(var r,n,i;;){if(t.lookahead<262){if(m(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-262&&(t.match_length=y(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(f(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&f(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(f(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}function b(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),h(this.dyn_ltree),h(this.dyn_dtree),h(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),h(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),h(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function E(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):c(t,-2)}function A(t){var e,r=E(t);return 0===r&&((e=t.state).window_size=2*e.w_size,h(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),r}function x(t,e,r,n,o,s){if(!t)return-2;var a=1;if(-1===e&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),o<1||o>9||8!==r||n<8||n>15||e<0||e>9||s<0||s>4)return c(t,-2);8===n&&(n=9);var u=new w;return t.state=u,u.strm=t,u.wrap=a,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=s,u.method=r,A(t)}n=[new b(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(m(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,f(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(f(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(f(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(f(t,!1),t.strm.avail_out),1)})),new b(4,4,8,4,v),new b(4,5,16,8,v),new b(4,6,32,32,v),new b(4,4,16,16,_),new b(8,16,32,32,_),new b(8,16,128,128,_),new b(8,32,128,256,_),new b(32,128,258,1024,_),new b(32,258,258,4096,_)],e.deflateInit=function(t,e){return x(t,e,8,15,8,0)},e.deflateInit2=x,e.deflateReset=A,e.deflateResetKeep=E,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},e.deflate=function(t,e){var r,i,s,u;if(!t||!t.state||e>5||e<0)return t?c(t,-2):-2;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return c(t,0===t.avail_out?-5:-2);if(i.strm=t,r=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,p(i,31),p(i,139),p(i,8),i.gzhead?(p(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),p(i,255&i.gzhead.time),p(i,i.gzhead.time>>8&255),p(i,i.gzhead.time>>16&255),p(i,i.gzhead.time>>24&255),p(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),p(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(p(i,255&i.gzhead.extra.length),p(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=a(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(p(i,0),p(i,0),p(i,0),p(i,0),p(i,0),p(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),p(i,3),i.status=113);else{var y=8+(i.w_bits-8<<4)<<8;y|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(y|=32),y+=31-y%31,i.status=113,g(i,y),0!==i.strstart&&(g(i,t.adler>>>16),g(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),d(t),s=i.pending,i.pending!==i.pending_buf_size));)p(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),d(t),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,p(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),d(t),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,p(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(t.adler=a(t.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&d(t),i.pending+2<=i.pending_buf_size&&(p(i,255&t.adler),p(i,t.adler>>8&255),t.adler=0,i.status=113)):i.status=113),0!==i.pending){if(d(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&l(e)<=l(r)&&4!==e)return c(t,-5);if(666===i.status&&0!==t.avail_in)return c(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var v=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(m(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(f(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(f(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var r,n,i,s,a=t.window;;){if(t.lookahead<=258){if(m(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=a[i=t.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){s=t.strstart+258;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);t.match_length=258-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(f(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(f(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(f(t,!1),0===t.strm.avail_out)?1:2}(i,e):n[i.level].func(i,e);if(3!==v&&4!==v||(i.status=666),1===v||3===v)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===v&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(h(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),d(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(p(i,255&t.adler),p(i,t.adler>>8&255),p(i,t.adler>>16&255),p(i,t.adler>>24&255),p(i,255&t.total_in),p(i,t.total_in>>8&255),p(i,t.total_in>>16&255),p(i,t.total_in>>24&255)):(g(i,t.adler>>>16),g(i,65535&t.adler)),d(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},e.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?c(t,-2):(t.state=null,113===e?c(t,-3):0):-2},e.deflateSetDictionary=function(t,e){var r,n,o,a,u,c,l,d,f=e.length;if(!t||!t.state)return-2;if(2===(a=(r=t.state).wrap)||1===a&&42!==r.status||r.lookahead)return-2;for(1===a&&(t.adler=s(t.adler,e,f,0)),r.wrap=0,f>=r.w_size&&(0===a&&(h(r.head),r.strstart=0,r.block_start=0,r.insert=0),d=new i.Buf8(r.w_size),i.arraySet(d,e,f-r.w_size,r.w_size,0),e=d,f=r.w_size),u=t.avail_in,c=t.next_in,l=t.input,t.avail_in=f,t.next_in=0,t.input=e,m(r);r.lookahead>=3;){n=r.strstart,o=r.lookahead-2;do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--o);r.strstart=n,r.lookahead=2,m(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=c,t.input=l,t.avail_in=u,r.wrap=a,0},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,r){"use strict";var n=r(5);function i(t){for(var e=t.length;--e>=0;)t[e]=0}var o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c=new Array(576);i(c);var l=new Array(60);i(l);var h=new Array(512);i(h);var d=new Array(256);i(d);var f=new Array(29);i(f);var p,g,y,m=new Array(30);function v(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function _(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function b(t){return t<256?h[t]:h[256+(t>>>7)]}function w(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function E(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function A(t,e,r){E(t,r[2*e],r[2*e+1])}function x(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function S(t,e,r){var n,i,o=new Array(16),s=0;for(n=1;n<=15;n++)o[n]=s=s+r[n-1]<<1;for(i=0;i<=e;i++){var a=t[2*i+1];0!==a&&(t[2*i]=x(o[a]++,a))}}function T(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function P(t){t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function O(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function C(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&O(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!O(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function I(t,e,r){var n,i,a,u,c=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],i=t.pending_buf[t.l_buf+c],c++,0===n?A(t,i,e):(A(t,(a=d[i])+256+1,e),0!==(u=o[a])&&E(t,i-=f[a],u),A(t,a=b(--n),r),0!==(u=s[a])&&E(t,n-=m[a],u))}while(c<t.last_lit);A(t,256,e)}function k(t,e){var r,n,i,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,u=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<u;r++)0!==o[2*r]?(t.heap[++t.heap_len]=c=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=s[2*i+1]);for(e.max_code=c,r=t.heap_len>>1;r>=1;r--)C(t,o,r);i=u;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],C(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,C(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,o,s,a,u=e.dyn_tree,c=e.max_code,l=e.stat_desc.static_tree,h=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)(o=u[2*u[2*(n=t.heap[r])+1]+1]+1)>p&&(o=p,g++),u[2*n+1]=o,n>c||(t.bl_count[o]++,s=0,n>=f&&(s=d[n-f]),a=u[2*n],t.opt_len+=a*(o+s),h&&(t.static_len+=a*(l[2*n+1]+s)));if(0!==g){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(o=p;0!==o;o--)for(n=t.bl_count[o];0!==n;)(i=t.heap[--r])>c||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}}(t,e),S(o,c,t.bl_count)}function D(t,e,r){var n,i,o=-1,s=e[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=e[2*(n+1)+1],++a<u&&i===s||(a<c?t.bl_tree[2*i]+=a:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,o=i,0===s?(u=138,c=3):i===s?(u=6,c=3):(u=7,c=4))}function j(t,e,r){var n,i,o=-1,s=e[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),n=0;n<=r;n++)if(i=s,s=e[2*(n+1)+1],!(++a<u&&i===s)){if(a<c)do{A(t,i,t.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(A(t,i,t.bl_tree),a--),A(t,16,t.bl_tree),E(t,a-3,2)):a<=10?(A(t,17,t.bl_tree),E(t,a-3,3)):(A(t,18,t.bl_tree),E(t,a-11,7));a=0,o=i,0===s?(u=138,c=3):i===s?(u=6,c=3):(u=7,c=4)}}i(m);var F=!1;function R(t,e,r,i){E(t,0+(i?1:0),3),function(t,e,r,i){P(t),w(t,r),w(t,~r),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r)}e._tr_init=function(t){F||(function(){var t,e,r,n,i,u=new Array(16);for(r=0,n=0;n<28;n++)for(f[n]=r,t=0;t<1<<o[n];t++)d[r++]=n;for(d[r-1]=n,i=0,n=0;n<16;n++)for(m[n]=i,t=0;t<1<<s[n];t++)h[i++]=n;for(i>>=7;n<30;n++)for(m[n]=i<<7,t=0;t<1<<s[n]-7;t++)h[256+i++]=n;for(e=0;e<=15;e++)u[e]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,u[8]++;for(;t<=255;)c[2*t+1]=9,t++,u[9]++;for(;t<=279;)c[2*t+1]=7,t++,u[7]++;for(;t<=287;)c[2*t+1]=8,t++,u[8]++;for(S(c,287,u),t=0;t<30;t++)l[2*t+1]=5,l[2*t]=x(t,5);p=new v(c,o,257,286,15),g=new v(l,s,0,30,15),y=new v(new Array(0),a,0,19,7)}(),F=!0),t.l_desc=new _(t.dyn_ltree,p),t.d_desc=new _(t.dyn_dtree,g),t.bl_desc=new _(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,T(t)},e._tr_stored_block=R,e._tr_flush_block=function(t,e,r,n){var i,o,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),k(t,t.l_desc),k(t,t.d_desc),s=function(t){var e;for(D(t,t.dyn_ltree,t.l_desc.max_code),D(t,t.dyn_dtree,t.d_desc.max_code),k(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*u[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==e?R(t,e,r,n):4===t.strategy||o===i?(E(t,2+(n?1:0),3),I(t,c,l)):(E(t,4+(n?1:0),3),function(t,e,r,n){var i;for(E(t,e-257,5),E(t,r-1,5),E(t,n-4,4),i=0;i<n;i++)E(t,t.bl_tree[2*u[i]+1],3);j(t,t.dyn_ltree,e-1),j(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),I(t,t.dyn_ltree,t.dyn_dtree)),T(t),n&&P(t)},e._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(d[r]+256+1)]++,t.dyn_dtree[2*b(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){E(t,2,3),A(t,256,c),function(t){16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,r){"use strict";var n=r(82),i=r(5),o=r(37),s=r(39),a=r(22),u=r(38),c=r(85),l=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==s.Z_OK)throw new Error(a[r]);if(this.header=new c,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=n.inflateSetDictionary(this.strm,e.dictionary))!==s.Z_OK))throw new Error(a[r])}function d(t,e){var r=new h(e);if(r.push(t,!0),r.err)throw r.msg||a[r.err];return r.result}h.prototype.push=function(t,e){var r,a,u,c,h,d=this.strm,f=this.options.chunkSize,p=this.options.dictionary,g=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?d.input=o.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(f),d.next_out=0,d.avail_out=f),(r=n.inflate(d,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(r=n.inflateSetDictionary(this.strm,p)),r===s.Z_BUF_ERROR&&!0===g&&(r=s.Z_OK,g=!1),r!==s.Z_STREAM_END&&r!==s.Z_OK)return this.onEnd(r),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&r!==s.Z_STREAM_END&&(0!==d.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(d.output,d.next_out),c=d.next_out-u,h=o.buf2string(d.output,u),d.next_out=c,d.avail_out=f-c,c&&i.arraySet(d.output,d.output,u,c,0),this.onData(h)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(g=!0)}while((d.avail_in>0||0===d.avail_out)&&r!==s.Z_STREAM_END);return r===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),d.avail_out=0,!0)},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=h,e.inflate=d,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},e.ungzip=d},function(t,e,r){"use strict";var n=r(5),i=r(35),o=r(36),s=r(83),a=r(84);function u(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function c(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):-2}function h(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,l(t)):-2}function d(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,h(t))):-2}function f(t,e){var r,n;return t?(n=new c,t.state=n,n.window=null,0!==(r=d(t,e))&&(t.state=null),r):-2}var p,g,y=!0;function m(t){if(y){var e;for(p=new n.Buf32(512),g=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(1,t.lens,0,288,p,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(2,t.lens,0,32,g,0,t.work,{bits:5}),y=!1}t.lencode=p,t.lenbits=9,t.distcode=g,t.distbits=5}function v(t,e,r,i){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),i>=s.wsize?(n.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((o=s.wsize-s.wnext)>i&&(o=i),n.arraySet(s.window,e,r-i,o,s.wnext),(i-=o)?(n.arraySet(s.window,e,r-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}e.inflateReset=h,e.inflateReset2=d,e.inflateResetKeep=l,e.inflateInit=function(t){return f(t,15)},e.inflateInit2=f,e.inflate=function(t,e){var r,c,l,h,d,f,p,g,y,_,b,w,E,A,x,S,T,P,O,C,I,k,D,j,F=0,R=new n.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(r=t.state).mode&&(r.mode=13),d=t.next_out,l=t.output,p=t.avail_out,h=t.next_in,c=t.input,f=t.avail_in,g=r.hold,y=r.bits,_=f,b=p,k=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;y<16;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}if(2&r.wrap&&35615===g){r.check=0,R[0]=255&g,R[1]=g>>>8&255,r.check=o(r.check,R,2,0),g=0,y=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&g)<<8)+(g>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&g)){t.msg="unknown compression method",r.mode=30;break}if(y-=4,I=8+(15&(g>>>=4)),0===r.wbits)r.wbits=I;else if(I>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<I,t.adler=r.check=1,r.mode=512&g?10:12,g=0,y=0;break;case 2:for(;y<16;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}if(r.flags=g,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=g>>8&1),512&r.flags&&(R[0]=255&g,R[1]=g>>>8&255,r.check=o(r.check,R,2,0)),g=0,y=0,r.mode=3;case 3:for(;y<32;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}r.head&&(r.head.time=g),512&r.flags&&(R[0]=255&g,R[1]=g>>>8&255,R[2]=g>>>16&255,R[3]=g>>>24&255,r.check=o(r.check,R,4,0)),g=0,y=0,r.mode=4;case 4:for(;y<16;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}r.head&&(r.head.xflags=255&g,r.head.os=g>>8),512&r.flags&&(R[0]=255&g,R[1]=g>>>8&255,r.check=o(r.check,R,2,0)),g=0,y=0,r.mode=5;case 5:if(1024&r.flags){for(;y<16;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}r.length=g,r.head&&(r.head.extra_len=g),512&r.flags&&(R[0]=255&g,R[1]=g>>>8&255,r.check=o(r.check,R,2,0)),g=0,y=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((w=r.length)>f&&(w=f),w&&(r.head&&(I=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,c,h,w,I)),512&r.flags&&(r.check=o(r.check,c,w,h)),f-=w,h+=w,r.length-=w),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===f)break t;w=0;do{I=c[h+w++],r.head&&I&&r.length<65536&&(r.head.name+=String.fromCharCode(I))}while(I&&w<f);if(512&r.flags&&(r.check=o(r.check,c,w,h)),f-=w,h+=w,I)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===f)break t;w=0;do{I=c[h+w++],r.head&&I&&r.length<65536&&(r.head.comment+=String.fromCharCode(I))}while(I&&w<f);if(512&r.flags&&(r.check=o(r.check,c,w,h)),f-=w,h+=w,I)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;y<16;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}if(g!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}g=0,y=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;y<32;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}t.adler=r.check=u(g),g=0,y=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=d,t.avail_out=p,t.next_in=h,t.avail_in=f,r.hold=g,r.bits=y,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){g>>>=7&y,y-=7&y,r.mode=27;break}for(;y<3;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}switch(r.last=1&g,y-=1,3&(g>>>=1)){case 0:r.mode=14;break;case 1:if(m(r),r.mode=20,6===e){g>>>=2,y-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}g>>>=2,y-=2;break;case 14:for(g>>>=7&y,y-=7&y;y<32;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}if((65535&g)!=(g>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&g,g=0,y=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(w=r.length){if(w>f&&(w=f),w>p&&(w=p),0===w)break t;n.arraySet(l,c,h,w,d),f-=w,h+=w,p-=w,d+=w,r.length-=w;break}r.mode=12;break;case 17:for(;y<14;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}if(r.nlen=257+(31&g),g>>>=5,y-=5,r.ndist=1+(31&g),g>>>=5,y-=5,r.ncode=4+(15&g),g>>>=4,y-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;y<3;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}r.lens[N[r.have++]]=7&g,g>>>=3,y-=3}for(;r.have<19;)r.lens[N[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,D={bits:r.lenbits},k=a(0,r.lens,0,19,r.lencode,0,r.work,D),r.lenbits=D.bits,k){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;S=(F=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,T=65535&F,!((x=F>>>24)<=y);){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}if(T<16)g>>>=x,y-=x,r.lens[r.have++]=T;else{if(16===T){for(j=x+2;y<j;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}if(g>>>=x,y-=x,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}I=r.lens[r.have-1],w=3+(3&g),g>>>=2,y-=2}else if(17===T){for(j=x+3;y<j;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}y-=x,I=0,w=3+(7&(g>>>=x)),g>>>=3,y-=3}else{for(j=x+7;y<j;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}y-=x,I=0,w=11+(127&(g>>>=x)),g>>>=7,y-=7}if(r.have+w>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;w--;)r.lens[r.have++]=I}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,D={bits:r.lenbits},k=a(1,r.lens,0,r.nlen,r.lencode,0,r.work,D),r.lenbits=D.bits,k){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,D={bits:r.distbits},k=a(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,D),r.distbits=D.bits,k){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(f>=6&&p>=258){t.next_out=d,t.avail_out=p,t.next_in=h,t.avail_in=f,r.hold=g,r.bits=y,s(t,b),d=t.next_out,l=t.output,p=t.avail_out,h=t.next_in,c=t.input,f=t.avail_in,g=r.hold,y=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;S=(F=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,T=65535&F,!((x=F>>>24)<=y);){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}if(S&&0==(240&S)){for(P=x,O=S,C=T;S=(F=r.lencode[C+((g&(1<<P+O)-1)>>P)])>>>16&255,T=65535&F,!(P+(x=F>>>24)<=y);){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}g>>>=P,y-=P,r.back+=P}if(g>>>=x,y-=x,r.back+=x,r.length=T,0===S){r.mode=26;break}if(32&S){r.back=-1,r.mode=12;break}if(64&S){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&S,r.mode=22;case 22:if(r.extra){for(j=r.extra;y<j;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}r.length+=g&(1<<r.extra)-1,g>>>=r.extra,y-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;S=(F=r.distcode[g&(1<<r.distbits)-1])>>>16&255,T=65535&F,!((x=F>>>24)<=y);){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}if(0==(240&S)){for(P=x,O=S,C=T;S=(F=r.distcode[C+((g&(1<<P+O)-1)>>P)])>>>16&255,T=65535&F,!(P+(x=F>>>24)<=y);){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}g>>>=P,y-=P,r.back+=P}if(g>>>=x,y-=x,r.back+=x,64&S){t.msg="invalid distance code",r.mode=30;break}r.offset=T,r.extra=15&S,r.mode=24;case 24:if(r.extra){for(j=r.extra;y<j;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}r.offset+=g&(1<<r.extra)-1,g>>>=r.extra,y-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===p)break t;if(w=b-p,r.offset>w){if((w=r.offset-w)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}w>r.wnext?(w-=r.wnext,E=r.wsize-w):E=r.wnext-w,w>r.length&&(w=r.length),A=r.window}else A=l,E=d-r.offset,w=r.length;w>p&&(w=p),p-=w,r.length-=w;do{l[d++]=A[E++]}while(--w);0===r.length&&(r.mode=21);break;case 26:if(0===p)break t;l[d++]=r.length,p--,r.mode=21;break;case 27:if(r.wrap){for(;y<32;){if(0===f)break t;f--,g|=c[h++]<<y,y+=8}if(b-=p,t.total_out+=b,r.total+=b,b&&(t.adler=r.check=r.flags?o(r.check,l,b,d-b):i(r.check,l,b,d-b)),b=p,(r.flags?g:u(g))!==r.check){t.msg="incorrect data check",r.mode=30;break}g=0,y=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;y<32;){if(0===f)break t;f--,g+=c[h++]<<y,y+=8}if(g!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}g=0,y=0}r.mode=29;case 29:k=1;break t;case 30:k=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=d,t.avail_out=p,t.next_in=h,t.avail_in=f,r.hold=g,r.bits=y,(r.wsize||b!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&v(t,t.output,t.next_out,b-t.avail_out)?(r.mode=31,-4):(_-=t.avail_in,b-=t.avail_out,t.total_in+=_,t.total_out+=b,r.total+=b,r.wrap&&b&&(t.adler=r.check=r.flags?o(r.check,l,b,t.next_out-b):i(r.check,l,b,t.next_out-b)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===_&&0===b||4===e)&&0===k&&(k=-5),k)},e.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},e.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?-2:(r.head=e,e.done=!1,0):-2},e.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?-2:11===r.mode&&i(1,e,n,0)!==r.check?-3:v(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,0):-2},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,r){"use strict";t.exports=function(t,e){var r,n,i,o,s,a,u,c,l,h,d,f,p,g,y,m,v,_,b,w,E,A,x,S,T;r=t.state,n=t.next_in,S=t.input,i=n+(t.avail_in-5),o=t.next_out,T=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),u=r.dmax,c=r.wsize,l=r.whave,h=r.wnext,d=r.window,f=r.hold,p=r.bits,g=r.lencode,y=r.distcode,m=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;t:do{p<15&&(f+=S[n++]<<p,p+=8,f+=S[n++]<<p,p+=8),_=g[f&m];e:for(;;){if(f>>>=b=_>>>24,p-=b,0==(b=_>>>16&255))T[o++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=g[(65535&_)+(f&(1<<b)-1)];continue e}if(32&b){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&_,(b&=15)&&(p<b&&(f+=S[n++]<<p,p+=8),w+=f&(1<<b)-1,f>>>=b,p-=b),p<15&&(f+=S[n++]<<p,p+=8,f+=S[n++]<<p,p+=8),_=y[f&v];r:for(;;){if(f>>>=b=_>>>24,p-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=y[(65535&_)+(f&(1<<b)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(E=65535&_,p<(b&=15)&&(f+=S[n++]<<p,(p+=8)<b&&(f+=S[n++]<<p,p+=8)),(E+=f&(1<<b)-1)>u){t.msg="invalid distance too far back",r.mode=30;break t}if(f>>>=b,p-=b,E>(b=o-s)){if((b=E-b)>l&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(A=0,x=d,0===h){if(A+=c-b,b<w){w-=b;do{T[o++]=d[A++]}while(--b);A=o-E,x=T}}else if(h<b){if(A+=c+h-b,(b-=h)<w){w-=b;do{T[o++]=d[A++]}while(--b);if(A=0,h<w){w-=b=h;do{T[o++]=d[A++]}while(--b);A=o-E,x=T}}}else if(A+=h-b,b<w){w-=b;do{T[o++]=d[A++]}while(--b);A=o-E,x=T}for(;w>2;)T[o++]=x[A++],T[o++]=x[A++],T[o++]=x[A++],w-=3;w&&(T[o++]=x[A++],w>1&&(T[o++]=x[A++]))}else{A=o-E;do{T[o++]=T[A++],T[o++]=T[A++],T[o++]=T[A++],w-=3}while(w>2);w&&(T[o++]=T[A++],w>1&&(T[o++]=T[A++]))}break}}break}}while(n<i&&o<a);n-=w=p>>3,f&=(1<<(p-=w<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=o<a?a-o+257:257-(o-a),r.hold=f,r.bits=p}},function(t,e,r){"use strict";var n=r(5),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,r,u,c,l,h,d){var f,p,g,y,m,v,_,b,w,E=d.bits,A=0,x=0,S=0,T=0,P=0,O=0,C=0,I=0,k=0,D=0,j=null,F=0,R=new n.Buf16(16),N=new n.Buf16(16),M=null,U=0;for(A=0;A<=15;A++)R[A]=0;for(x=0;x<u;x++)R[e[r+x]]++;for(P=E,T=15;T>=1&&0===R[T];T--);if(P>T&&(P=T),0===T)return c[l++]=20971520,c[l++]=20971520,d.bits=1,0;for(S=1;S<T&&0===R[S];S++);for(P<S&&(P=S),I=1,A=1;A<=15;A++)if(I<<=1,(I-=R[A])<0)return-1;if(I>0&&(0===t||1!==T))return-1;for(N[1]=0,A=1;A<15;A++)N[A+1]=N[A]+R[A];for(x=0;x<u;x++)0!==e[r+x]&&(h[N[e[r+x]]++]=x);if(0===t?(j=M=h,v=19):1===t?(j=i,F-=257,M=o,U-=257,v=256):(j=s,M=a,v=-1),D=0,x=0,A=S,m=l,O=P,C=0,g=-1,y=(k=1<<P)-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){_=A-C,h[x]<v?(b=0,w=h[x]):h[x]>v?(b=M[U+h[x]],w=j[F+h[x]]):(b=96,w=0),f=1<<A-C,S=p=1<<O;do{c[m+(D>>C)+(p-=f)]=_<<24|b<<16|w|0}while(0!==p);for(f=1<<A-1;D&f;)f>>=1;if(0!==f?(D&=f-1,D+=f):D=0,x++,0==--R[A]){if(A===T)break;A=e[r+h[x]]}if(A>P&&(D&y)!==g){for(0===C&&(C=P),m+=S,I=1<<(O=A-C);O+C<T&&!((I-=R[O+C])<=0);)O++,I<<=1;if(k+=1<<O,1===t&&k>852||2===t&&k>592)return 1;c[g=D&y]=P<<24|O<<16|m-l|0}}return 0!==D&&(c[m+D]=A-C<<24|64<<16|0),d.bits=P,0}},function(t,e,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.getCompressionResources=void 0;const i=r(34),o=r(15);function s(t){return n(this,void 0,void 0,(function*(){return Promise.resolve().then(()=>{const e=i.gzip(t,{level:9});return o.bytesToBase64(e)})}))}function a(t){return n(this,void 0,void 0,(function*(){return Promise.resolve().then(()=>i.ungzip(o.base64ToBytes(t),{to:"string"}))}))}e.getCompressionResources=function(){return{"compression/v2/compressText":s,"compression/v2/decompressText":a}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnvironmentResources=void 0,e.getEnvironmentResources=function(){return{"env/v1/isClosedEnv":()=>!1}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getNetResources=void 0;const n=r(89);e.getNetResources=function(){return{"net/webdav/v1/newClient":n.createClient}}},function(t,e,r){window,t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=26)}([function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(11),o=Object.prototype.toString;function s(t){return"[object Array]"===o.call(t)}function a(t){return void 0===t}function u(t){return null!==t&&"object"===n(t)}function c(t){return"[object Function]"===o.call(t)}function l(t,e){if(null!=t)if("object"!==n(t)&&(t=[t]),s(t))for(var r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:function(t){return null!==t&&!a(t)&&null!==t.constructor&&!a(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:u,isUndefined:a,isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:c,isStream:function(t){return u(t)&&c(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function t(){var e={};function r(r,i){"object"===n(e[i])&&"object"===n(r)?e[i]=t(e[i],r):e[i]=r}for(var i=0,o=arguments.length;i<o;i++)l(arguments[i],r);return e},deepMerge:function t(){var e={};function r(r,i){"object"===n(e[i])&&"object"===n(r)?e[i]=t(e[i],r):"object"===n(r)?e[i]=t({},r):e[i]=r}for(var i=0,o=arguments.length;i<o;i++)l(arguments[i],r);return e},extend:function(t,e,r){return l(e,(function(e,n){t[n]=r&&"function"==typeof e?i(e,r):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(10),o=r(43),s=r(44),a=r(4).merge;t.exports={axios:i,encodePath:function(t){var e=t.replace(/\//g,"__PATH_SEPARATOR_POSIX__").replace(/\\\\/g,"__PATH_SEPARATOR_WINDOWS__");return encodeURIComponent(e).split("__PATH_SEPARATOR_WINDOWS__").join("\\\\").split("__PATH_SEPARATOR_POSIX__").join("/")},joinURL:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return o(e.reduce((function(t,e,r){return(0===r||"/"!==e||"/"===e&&"/"!==t[t.length-1])&&t.push(e),t}),[]))},prepareRequestOptions:function(t,e){e.httpAgent&&(t.httpAgent=e.httpAgent),e.httpsAgent&&(t.httpsAgent=e.httpsAgent),e.data&&(t.data=e.data),e.headers&&"object"===n(e.headers)&&(t.headers=a(t.headers||{},e.headers)),"boolean"==typeof e.withCredentials&&(t.withCredentials=e.withCredentials),e.maxContentLength&&(t.maxContentLength=e.maxContentLength),e.onUploadProgress&&"function"==typeof e.onUploadProgress&&(t.onUploadProgress=e.onUploadProgress),e._digest&&(t._digest=e._digest,t.validateStatus=function(t){return t>=200&&t<300||401==t})},request:function(t){return s(t)}}},function(t,e,r){var n=r(58);t.exports={handleResponseCode:function(t){var e,r=parseInt(t.status,10);if(r>=400)throw(e=new Error("Invalid response: "+r+" "+t.statusText)).status=r,e;return t},processGlobFilter:function(t,e){return t.filter((function(t){return n(t.filename,e,{matchBase:!0})}))},processResponsePayload:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r?{data:e,headers:t.headers||{}}:e}}},function(t,e,r){"use strict";var n="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=new RegExp("^"+n+"$");e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,r){if(e)for(var n=Object.keys(e),i=n.length,o=0;o<i;o++)t[n[o]]="strict"===r?[e[n[o]]]:e[n[o]]},e.getValue=function(t){return e.isExist(t)?t:""},e.buildOptions=function(t,e,r){var n={};if(!t)return e;for(var i=0;i<r.length;i++)void 0!==t[r[i]]?n[r[i]]=t[r[i]]:n[r[i]]=e[r[i]];return n},e.isName=function(t){return!(null==i.exec(t))},e.getAllMatches=function(t,e){for(var r=[],n=e.exec(t);n;){for(var i=[],o=n.length,s=0;s<o;s++)i.push(n[s]);r.push(i),n=e.exec(t)}return r},e.nameRegexp=n},function(t,e){function r(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return function(t){if("object"!==i(t)||null===t||"[object Object]"!=Object.prototype.toString.call(t))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t)?Object.assign({},t):Object.setPrototypeOf(Object.assign({},t),Object.getPrototypeOf(t))}function s(t,e){var n=o(t);return Object.keys(e).forEach((function(t){n.hasOwnProperty(t)?Array.isArray(e[t])?n[t]=Array.isArray(n[t])?[].concat(r(n[t]),r(e[t])):r(e[t]):"object"===i(e[t])&&e[t]?n[t]="object"===i(n[t])&&n[t]?s(n[t],e[t]):o(e[t]):n[t]=e[t]:n[t]=e[t]})),n}t.exports={merge:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=null,i=[].concat(e);i.length>0;){var a=i.shift();n=n?s(n,a):o(a)}return n}}},function(t,e,r){var n=r(47),i=n.decode,o=n.encode;t.exports={decodeHTMLEntities:function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value},fromBase64:function(t){return i(t)},toBase64:function(t){return o(t)}}},function(t,e,r){"use strict";var n=r(3),i=r(3).buildOptions,o=r(64),s="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,n.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var a={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(t,e){return t},attrValueProcessor:function(t,e){return t},stopNodes:[]};e.defaultOptions=a;var u=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function c(t,e,r){var n=t[7]||r,i=t[12];return i&&(e.trimValues&&(i=i.trim()),i=d(i=e.tagValueProcessor(i,n),e.parseNodeValue,e.parseTrueNumberOnly)),i}function l(t){return"]]>"===t[4]?4:"/"===t[10]?2:void 0!==t[8]&&"/"===t[8].substr(t[8].length-1)?3:1}function h(t,e){if(e.ignoreNameSpace){var r=t.split(":"),n="/"===t.charAt(0)?"/":"";if("xmlns"===r[0])return"";2===r.length&&(t=n+r[1])}return t}function d(t,e,r){var i;return e&&"string"==typeof t?(""===t.trim()||isNaN(t)?i="true"===t||"false"!==t&&t:(-1!==t.indexOf("0x")?i=Number.parseInt(t,16):-1!==t.indexOf(".")?(i=Number.parseFloat(t),t=t.replace(/0+$/,"")):i=Number.parseInt(t,10),r&&(i=String(i)===t?i:t)),i):n.isExist(t)?t:""}e.props=u;var f=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function p(t,e){if(!e.ignoreAttributes&&"string"==typeof t){t=t.replace(/\r?\n/g," ");for(var r=n.getAllMatches(t,f),i=r.length,o={},s=0;s<i;s++){var a=h(r[s][1],e);a.length&&(void 0!==r[s][4]?(e.trimValues&&(r[s][4]=r[s][4].trim()),r[s][4]=e.attrValueProcessor(r[s][4],a),o[e.attributeNamePrefix+a]=d(r[s][4],e.parseAttributeValue,e.parseTrueNumberOnly)):e.allowBooleanAttributes&&(o[e.attributeNamePrefix+a]=!0))}if(!Object.keys(o).length)return;if(e.attrNodeName){var u={};return u[e.attrNodeName]=o,u}return o}}e.getTraversalObj=function(t,e){e=i(e,a,u),t=t.replace(/<!--[\s\S]*?-->/g,"");for(var r=new o("!xml"),h=r,d=new RegExp(s,"g"),f=d.exec(t),g=d.exec(t);f;){var y=l(f);if(2===y)h.parent&&f[12]&&(h.parent.val=n.getValue(h.parent.val)+""+c(f,e,h.parent.tagname)),e.stopNodes.length&&e.stopNodes.includes(h.tagname)&&(h.child=[],null==h.attrsMap&&(h.attrsMap={}),h.val=t.substr(h.startIndex+1,f.index-h.startIndex-1)),h=h.parent;else if(4===y)if(e.cdataTagName){var m=new o(e.cdataTagName,h,f[3]);m.attrsMap=p(f[8],e),h.addChild(m),h.val=n.getValue(h.val)+e.cdataPositionChar,f[12]&&(h.val+=c(f,e))}else h.val=(h.val||"")+(f[3]||"")+c(f,e);else if(3===y){h&&f[12]&&(h.val=n.getValue(h.val)+""+c(f,e));var v=new o(e.ignoreNameSpace?f[7]:f[5],h,"");f[8]&&f[8].length>0&&(f[8]=f[8].substr(0,f[8].length-1)),v.attrsMap=p(f[8],e),h.addChild(v)}else{var _=new o(e.ignoreNameSpace?f[7]:f[5],h,c(f,e));e.stopNodes.length&&e.stopNodes.includes(_.tagname)&&(_.startIndex=f.index+f[1].length),_.attrsMap=p(f[8],e),h.addChild(_),h=_}f=g,g=d.exec(t)}return r}},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u,c=[],l=!1,h=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&f())}function f(){if(!l){var t=a(d);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new p(t,e)),1!==c.length||l||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){var n=r(51);function i(t){var e=t;return"/"!==e[0]&&(e="/"+e),/^.+\/$/.test(e)&&(e=e.substr(0,e.length-1)),decodeURIComponent(e)}t.exports={extractURLPath:function(t){var e=new n(t).pathname;return e.length<=0&&(e="/"),i(e)},normaliseHREF:function(t){return t.replace(/^https?:\/\/[^\/]+/,"")},normalisePath:i}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(62),o=r(69),s=r(5).decodeHTMLEntities;function a(t,e,r){var n=o.get(t,e);return"array"===r&&!1===Array.isArray(n)?[n]:"object"===r&&Array.isArray(n)?n[0]:n}t.exports={parseXML:function(t){return new Promise((function(e){e(function(t){var e=t.multistatus;if(!e)throw new Error("Invalid response: No root multistatus found");var r={};return r.multistatus=Array.isArray(e)?e[0]:e,o.set(r,"multistatus.response",a(r,"multistatus.response","array")),o.set(r,"multistatus.response",o.get(r,"multistatus.response").map((function(t){return function(t){var e=Object.assign({},t);return o.set(e,"propstat",a(e,"propstat","object")),o.set(e,"propstat.prop",a(e,"propstat.prop","object")),e}(t)}))),r}(i.parse(t,{arrayMode:!1,ignoreNameSpace:!0})))}))},prepareFileFromProps:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=r(24),a=t.getlastmodified,u=void 0===a?null:a,c=t.getcontentlength,l=void 0===c?"0":c,h=t.resourcetype,d=void 0===h?null:h,f=t.getcontenttype,p=void 0===f?null:f,g=t.getetag,y=void 0===g?null:g,m=d&&"object"===n(d)&&void 0!==d.collection?"directory":"file",v=s(e),_={filename:v,basename:o.basename(v),lastmod:u,size:parseInt(l,10),type:m,etag:"string"==typeof y?y.replace(/"/g,""):null};return"file"===m&&(_.mime=p&&"string"==typeof p?p.split(";")[0]:""),i&&(_.props=t),_},translateDiskSpace:function(t){switch(t.toString()){case"-3":return"unlimited";case"-2":case"-1":return"unknown";default:return parseInt(t,10)}}}},function(t,e,r){t.exports=r(27)},function(t,e,r){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}}},function(t,e,r){"use strict";var n=r(0);function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,r){if(!e)return t;var o;if(r)o=r(e);else if(n.isURLSearchParams(e))o=e.toString();else{var s=[];n.forEach(e,(function(t,e){null!=t&&(n.isArray(t)?e+="[]":t=[t],n.forEach(t,(function(t){n.isDate(t)?t=t.toISOString():n.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))})))})),o=s.join("&")}if(o){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,r){"use strict";(function(e){var n=r(0),i=r(32),o={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a,u={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(a=r(15)),a),transformRequest:[function(t,e){return i(e,"Accept"),i(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t)?t:n.isArrayBufferView(t)?t.buffer:n.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):n.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),n.forEach(["post","put","patch"],(function(t){u.headers[t]=n.merge(o)})),t.exports=u}).call(this,r(7))},function(t,e,r){"use strict";var n=r(0),i=r(33),o=r(12),s=r(35),a=r(38),u=r(39),c=r(16);t.exports=function(t){return new Promise((function(e,l){var h=t.data,d=t.headers;n.isFormData(h)&&delete d["Content-Type"];var f=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",g=t.auth.password||"";d.Authorization="Basic "+btoa(p+":"+g)}var y=s(t.baseURL,t.url);if(f.open(t.method.toUpperCase(),o(y,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in f?a(f.getAllResponseHeaders()):null,n={data:t.responseType&&"text"!==t.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:t,request:f};i(e,l,n),f=null}},f.onabort=function(){f&&(l(c("Request aborted",t,"ECONNABORTED",f)),f=null)},f.onerror=function(){l(c("Network Error",t,null,f)),f=null},f.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),l(c(e,t,"ECONNABORTED",f)),f=null},n.isStandardBrowserEnv()){var m=r(40),v=(t.withCredentials||u(y))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;v&&(d[t.xsrfHeaderName]=v)}if("setRequestHeader"in f&&n.forEach(d,(function(t,e){void 0===h&&"content-type"===e.toLowerCase()?delete d[e]:f.setRequestHeader(e,t)})),n.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){f&&(f.abort(),l(t),f=null)})),void 0===h&&(h=null),f.send(h)}))}},function(t,e,r){"use strict";var n=r(34);t.exports=function(t,e,r,i,o){var s=new Error(t);return n(s,e,r,i,o)}},function(t,e,r){"use strict";var n=r(0);t.exports=function(t,e){e=e||{};var r={},i=["url","method","params","data"],o=["headers","auth","proxy"],s=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];n.forEach(i,(function(t){void 0!==e[t]&&(r[t]=e[t])})),n.forEach(o,(function(i){n.isObject(e[i])?r[i]=n.deepMerge(t[i],e[i]):void 0!==e[i]?r[i]=e[i]:n.isObject(t[i])?r[i]=n.deepMerge(t[i]):void 0!==t[i]&&(r[i]=t[i])})),n.forEach(s,(function(n){void 0!==e[n]?r[n]=e[n]:void 0!==t[n]&&(r[n]=t[n])}));var a=i.concat(o).concat(s),u=Object.keys(e).filter((function(t){return-1===a.indexOf(t)}));return n.forEach(u,(function(n){void 0!==e[n]?r[n]=e[n]:void 0!==t[n]&&(r[n]=t[n])})),r}},function(t,e,r){"use strict";function n(t){this.message=t}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,e,r){var n=r(45),i=null;t.exports={getPatcher:function(){return i||(i=new n),i}}},function(t,e,r){var n=r(5).toBase64,i=r(49),o=i.md5,s=i.ha1Compute;t.exports={generateBasicAuthHeader:function(t,e){var r=n("".concat(t,":").concat(e));return"Basic ".concat(r)},generateTokenAuthHeader:function(t){return"".concat(t.token_type," ").concat(t.access_token)},generateDigestAuthHeader:function(t,e){var r=t.url.replace("//",""),n=-1==r.indexOf("/")?"/":r.slice(r.indexOf("/")),i=t.method?t.method.toUpperCase():"GET",a=!!/(^|,)\s*auth\s*($|,)/.test(e.qop)&&"auth",u="00000000".concat(e.nc).slice(-8),c=(e.cnonce,s(e.algorithm,e.username,e.realm,e.password,e.nonce,e.cnonce)),l=o("".concat(i,":").concat(n)),h=o(a?"".concat(c,":").concat(e.nonce,":").concat(u,":").concat(e.cnonce,":").concat(a,":").concat(l):"".concat(c,":").concat(e.nonce,":").concat(l)),d={username:e.username,realm:e.realm,nonce:e.nonce,uri:n,qop:a,response:h,nc:u,cnonce:e.cnonce,algorithm:e.algorithm,opaque:e.opaque},f=[];for(var p in d)d[p]&&("qop"===p||"nc"===p||"algorithm"===p?f.push("".concat(p,"=").concat(d[p])):f.push("".concat(p,'="').concat(d[p],'"')));return"Digest ".concat(f.join(", "))}}},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":r(window))&&(n=window)}t.exports=n},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e){},function(t,e,r){"use strict";(function(e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(55),o=function(t){return"string"==typeof t};function s(t,e){for(var r=[],n=0;n<t.length;n++){var i=t[n];i&&"."!==i&&(".."===i?r.length&&".."!==r[r.length-1]?r.pop():e&&r.push(".."):r.push(i))}return r}var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,u={};function c(t){return a.exec(t).slice(1)}u.resolve=function(){for(var t="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var i=n>=0?arguments[n]:e.cwd();if(!o(i))throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,r="/"===i.charAt(0))}return(r?"/":"")+(t=s(t.split("/"),!r).join("/"))||"."},u.normalize=function(t){var e=u.isAbsolute(t),r="/"===t.substr(-1);return(t=s(t.split("/"),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t},u.isAbsolute=function(t){return"/"===t.charAt(0)},u.join=function(){for(var t="",e=0;e<arguments.length;e++){var r=arguments[e];if(!o(r))throw new TypeError("Arguments to path.join must be strings");r&&(t+=t?"/"+r:r)}return u.normalize(t)},u.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r+1)}t=u.resolve(t).substr(1),e=u.resolve(e).substr(1);for(var n=r(t.split("/")),i=r(e.split("/")),o=Math.min(n.length,i.length),s=o,a=0;a<o;a++)if(n[a]!==i[a]){s=a;break}var c=[];for(a=s;a<n.length;a++)c.push("..");return(c=c.concat(i.slice(s))).join("/")},u._makeLong=function(t){return t},u.dirname=function(t){var e=c(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},u.basename=function(t,e){var r=c(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},u.extname=function(t){return c(t)[3]},u.format=function(t){if(!i.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+n(t));var e=t.root||"";if(!o(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+n(t.root));return(t.dir?t.dir+u.sep:"")+(t.base||"")},u.parse=function(t){if(!o(t))throw new TypeError("Parameter 'pathString' must be a string, not "+n(t));var e=c(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return e[1]=e[1]||"",e[2]=e[2]||"",e[3]=e[3]||"",{root:e[0],dir:e[0]+e[1].slice(0,e[1].length-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},u.sep="/",u.delimiter=":",t.exports=u}).call(this,r(7))},function(t,e,r){r(4).merge;var n=r(2),i=n.handleResponseCode,o=n.processResponsePayload,s=r(9),a=s.parseXML,u=s.prepareFileFromProps,c=r(8),l=r(1),h=l.encodePath,d=l.joinURL,f=l.prepareRequestOptions,p=l.request;function g(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=null;try{n=t.multistatus.response[0]}catch(t){}if(!n)throw new Error("Failed getting item stat: bad response");var i=n,o=i.propstat.prop,s=c.normalisePath(e);return u(o,s,r)}t.exports={getStat:function(t,e){var r={url:d(e.remoteURL,h(t)),method:"PROPFIND",headers:{Accept:"text/plain",Depth:0},responseType:"text"},n=null;return f(r,e),p(r).then(i).then((function(t){return n=t,t.data})).then(a).then((function(r){return g(r,t,e.details)})).then((function(t){return o(n,t,e.details)}))},parseStat:g}},function(t,e,r){var n=r(1).axios,i=r(50).createClient,o=r(19).getPatcher;t.exports={axios:n,createClient:i,getPatcher:o}},function(t,e,r){"use strict";var n=r(0),i=r(11),o=r(28),s=r(17);function a(t){var e=new o(t),r=i(o.prototype.request,e);return n.extend(r,o.prototype,e),n.extend(r,e),r}var u=a(r(14));u.Axios=o,u.create=function(t){return a(s(u.defaults,t))},u.Cancel=r(18),u.CancelToken=r(41),u.isCancel=r(13),u.all=function(t){return Promise.all(t)},u.spread=r(42),t.exports=u,t.exports.default=u},function(t,e,r){"use strict";var n=r(0),i=r(12),o=r(29),s=r(30),a=r(17);function u(t){this.defaults=t,this.interceptors={request:new o,response:new o}}u.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[s,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)r=r.then(e.shift(),e.shift());return r},u.prototype.getUri=function(t){return t=a(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(t){u.prototype[t]=function(e,r){return this.request(n.merge(r||{},{method:t,url:e}))}})),n.forEach(["post","put","patch"],(function(t){u.prototype[t]=function(e,r,i){return this.request(n.merge(i||{},{method:t,url:e,data:r}))}})),t.exports=u},function(t,e,r){"use strict";var n=r(0);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){n.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},function(t,e,r){"use strict";var n=r(0),i=r(31),o=r(13),s=r(14);function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return a(t),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return a(t),e.data=i(e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(a(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,r){"use strict";var n=r(0);t.exports=function(t,e,r){return n.forEach(r,(function(r){t=r(t,e)})),t}},function(t,e,r){"use strict";var n=r(0);t.exports=function(t,e){n.forEach(t,(function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])}))}},function(t,e,r){"use strict";var n=r(16);t.exports=function(t,e,r){var i=r.config.validateStatus;!i||i(r.status)?t(r):e(n("Request failed with status code "+r.status,r.config,null,r.request,r))}},function(t,e,r){"use strict";t.exports=function(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,r){"use strict";var n=r(36),i=r(37);t.exports=function(t,e){return t&&!n(e)?i(t,e):e}},function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,r){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,r){"use strict";var n=r(0),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,o,s={};return t?(n.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=n.trim(t.substr(0,o)).toLowerCase(),r=n.trim(t.substr(o+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([r]):s[e]?s[e]+", "+r:r}})),s):s}},function(t,e,r){"use strict";var n=r(0);t.exports=n.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=i(window.location.href),function(e){var r=n.isString(e)?i(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},function(t,e,r){"use strict";var n=r(0);t.exports=n.isStandardBrowserEnv()?{write:function(t,e,r,i,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(i)&&a.push("path="+i),n.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,r){"use strict";var n=r(18);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var r=this;t((function(t){r.reason||(r.reason=new n(t),e(r.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},function(t,e,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,r){var n,i,o;function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}o=function(){function t(t){var e=[];if(0===t.length)return"";if("string"!=typeof t[0])throw new TypeError("Url must be a string. Received "+t[0]);if(t[0].match(/^[^/:]+:\/*$/)&&t.length>1){var r=t.shift();t[0]=r+t[0]}t[0].match(/^file:\/\/\//)?t[0]=t[0].replace(/^([^/:]+):\/*/,"$1:///"):t[0]=t[0].replace(/^([^/:]+):\/*/,"$1://");for(var n=0;n<t.length;n++){var i=t[n];if("string"!=typeof i)throw new TypeError("Url must be a string. Received "+i);""!==i&&(n>0&&(i=i.replace(/^[\/]+/,"")),i=n<t.length-1?i.replace(/[\/]+$/,""):i.replace(/[\/]+$/,"/"),e.push(i))}var o=e.join("/"),s=(o=o.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return s.shift()+(s.length>0?"?":"")+s.join("&")}return function(){return t("object"===s(arguments[0])?arguments[0]:[].slice.call(arguments))}},t.exports?t.exports=o():void 0===(i="function"==typeof(n=o)?n.call(e,r,e,t):n)||(t.exports=i)},function(t,e,r){var n=r(10),i=r(4).merge,o=r(19).getPatcher,s=r(20).generateDigestAuthHeader;function a(t){return o().patchInline("request",(function(t){return n(t)}),t)}t.exports=function(t){if(!t._digest)return a(t);var e=t._digest;return delete t._digest,e.hasDigestAuth&&(t=i(t,{headers:{Authorization:s(t,e)}})),a(t).then((function(r){if(401==r.status){if(e.hasDigestAuth=function(t,e){var r=t.headers["www-authenticate"]||"";if("digest"!==r.split(/\s/)[0].toLowerCase())return!1;for(var n=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi;;){var i=n.exec(r);if(!i)break;e[i[1]]=i[2]||i[3]}return e.nc++,e.cnonce=function(){for(var t="",e=0;e<32;++e)t+="abcdef0123456789"[Math.floor(Math.random()*"abcdef0123456789".length)];return t}(),!0}(r,e),e.hasDigestAuth)return a(t=i(t,{headers:{Authorization:s(t,e)}})).then((function(t){return 401==t.status?e.hasDigestAuth=!1:e.nc++,t}))}else e.nc++;return r}))}},function(t,e,r){function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var i=r(46).sequence,o=function(){};function s(t){return{original:t,methods:[t],final:!1}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._configuration={registry:{},getEmptyAction:"null"},this.__type__="@@HOTPATCHER"}var e;return(e=[{key:"control",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t||"@@HOTPATCHER"!==t.__type__)throw new Error("Failed taking control of target HotPatcher instance: Invalid type or object");return Object.keys(t.configuration.registry).forEach((function(n){e.configuration.registry.hasOwnProperty(n)?r&&(e.configuration.registry[n]=Object.assign({},t.configuration.registry[n])):e.configuration.registry[n]=Object.assign({},t.configuration.registry[n])})),t._configuration=this.configuration,this}},{key:"execute",value:function(t){for(var e=this.get(t)||o,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return e.apply(void 0,n)}},{key:"get",value:function(t){var e=this.configuration.registry[t];if(!e)switch(this.getEmptyAction){case"null":return null;case"throw":throw new Error("Failed handling method request: No method provided for override: ".concat(t));default:throw new Error("Failed handling request which resulted in an empty method: Invalid empty-action specified: ".concat(this.getEmptyAction))}return i.apply(void 0,function(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.methods))}},{key:"isPatched",value:function(t){return!!this.configuration.registry[t]}},{key:"patch",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.chain,i=void 0!==n&&n;if(this.configuration.registry[t]&&this.configuration.registry[t].final)throw new Error("Failed patching '".concat(t,"': Method marked as being final"));if("function"!=typeof e)throw new Error("Failed patching '".concat(t,"': Provided method is not a function"));if(i)this.configuration.registry[t]?this.configuration.registry[t].methods.push(e):this.configuration.registry[t]=s(e);else if(this.isPatched(t)){var o=this.configuration.registry[t].original;this.configuration.registry[t]=Object.assign(s(e),{original:o})}else this.configuration.registry[t]=s(e);return this}},{key:"patchInline",value:function(t,e){this.isPatched(t)||this.patch(t,e);for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return this.execute.apply(this,[t].concat(n))}},{key:"plugin",value:function(t){for(var e=this,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.forEach((function(r){e.patch(t,r,{chain:!0})})),this}},{key:"restore",value:function(t){if(!this.isPatched(t))throw new Error("Failed restoring method: No method present for key: ".concat(t));if("function"!=typeof this.configuration.registry[t].original)throw new Error("Failed restoring method: Original method not found or of invalid type for key: ".concat(t));this.configuration.registry[t].methods=[this.configuration.registry[t].original]}},{key:"setFinal",value:function(t){if(!this.configuration.registry.hasOwnProperty(t))throw new Error("Failed marking '".concat(t,"' as final: No method found for key"));return this.configuration.registry[t].final=!0,this}},{key:"configuration",get:function(){return this._configuration}},{key:"getEmptyAction",get:function(){return this.configuration.getEmptyAction},set:function(t){this.configuration.getEmptyAction=t}}])&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,e),t}();t.exports=a},function(t,e){t.exports={sequence:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(0===e.length)throw new Error("Failed creating sequence: No functions provided");return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var i=r,o=this;e.length>0;){var s=e.shift();i=[s.apply(o,i)]}return i[0]}}}},function(t,e,r){(function(t,n){var i;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */!function(s){var a="object"==o(e)&&e,u="object"==o(t)&&t&&t.exports==a&&t,c="object"==(void 0===n?"undefined":o(n))&&n;c.global!==c&&c.window!==c||(s=c);var l=function(t){this.message=t};(l.prototype=new Error).name="InvalidCharacterError";var h=function(t){throw new l(t)},d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=/[\t\n\f\r ]/g,p={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&h("The string to be encoded contains characters outside of the Latin1 range.");for(var e,r,n,i,o=t.length%3,s="",a=-1,u=t.length-o;++a<u;)e=t.charCodeAt(a)<<16,r=t.charCodeAt(++a)<<8,n=t.charCodeAt(++a),s+=d.charAt((i=e+r+n)>>18&63)+d.charAt(i>>12&63)+d.charAt(i>>6&63)+d.charAt(63&i);return 2==o?(e=t.charCodeAt(a)<<8,r=t.charCodeAt(++a),s+=d.charAt((i=e+r)>>10)+d.charAt(i>>4&63)+d.charAt(i<<2&63)+"="):1==o&&(i=t.charCodeAt(a),s+=d.charAt(i>>2)+d.charAt(i<<4&63)+"=="),s},decode:function(t){var e=(t=String(t).replace(f,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&h("Invalid character: the string to be decoded is not correctly encoded.");for(var r,n,i=0,o="",s=-1;++s<e;)n=d.indexOf(t.charAt(s)),r=i%4?64*r+n:n,i++%4&&(o+=String.fromCharCode(255&r>>(-2*i&6)));return o},version:"0.1.0"};if("object"==o(r(22))&&r(22))void 0===(i=function(){return p}.call(e,r,e,t))||(t.exports=i);else if(a&&!a.nodeType)if(u)u.exports=p;else for(var g in p)p.hasOwnProperty(g)&&(a[g]=p[g]);else s.base64=p}(this)}).call(this,r(48)(t),r(21))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){var n=r(23).createHash;function i(t){return n("md5").update(t).digest("hex")}t.exports={md5:i,ha1Compute:function(t,e,r,n,o,s){var a=i("".concat(e,":").concat(r,":").concat(n));return t&&"md5-sess"===t.toLowerCase()?i("".concat(a,":").concat(o,":").concat(s)):a}}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(20),o=r(8),s=r(4).merge,a=r(54),u=r(70),c=r(71),l=r(72),h=r(73),d=r(74),f=r(75),p=r(76),g=r(77),y=r(78),m=r(25);t.exports={createClient:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||"object"!==n(e))throw new Error("Options must be an object, if specified");var r=e.username,v=e.password,_=e.httpAgent,b=e.httpsAgent,w=e.token,E=void 0===w?null:w,A=e.digest,x=void 0!==A&&A,S={headers:{},remotePath:o.extractURLPath(t),remoteURL:t,httpAgent:_,httpsAgent:b};return x?S._digest={username:r,password:v,nc:0,algorithm:"md5",hasDigestAuth:!1}:r?S.headers.Authorization=i.generateBasicAuthHeader(r,v):E&&"object"===n(E)&&(S.headers.Authorization=i.generateTokenAuthHeader(E)),{copyFile:function(t,e,r){var n=s(S,r||{});return g.copyFile(t,e,n)},createDirectory:function(t,e){var r=s(S,e||{});return u.createDirectory(t,r)},createReadStream:function(t,e){throw new Error("createReadStream not implemented in web environment")},createWriteStream:function(t,e){throw new Error("createWriteStream not implemented in web environment")},customRequest:function(t,e,r){var n=s(S,r||{});return c.customRequest(t,e,n)},deleteFile:function(t,e){var r=s(S,e||{});return l.deleteFile(t,r)},exists:function(t,e){var r=s(S,e||{});return h.pathExists(t,r)},getDirectoryContents:function(t,e){var r=s(S,e||{});return a.getDirectoryContents(t,r)},getFileContents:function(t,e){var r=s(S,e||{});if(r.format=r.format||"binary",["binary","text"].indexOf(r.format)<0)throw new Error("Unknown format: "+r.format);return"text"===r.format?d.getFileContentsString(t,r):d.getFileContentsBuffer(t,r)},getFileDownloadLink:function(t,e){var r=s(S,e||{});return d.getFileLink(t,r)},getFileUploadLink:function(t,e){var r=s(S,e||{});return y.getFileUploadLink(t,r)},getQuota:function(t){var e=s(S,t||{});return f.getQuota(e)},moveFile:function(t,e,r){var n=s(S,r||{});return p.moveFile(t,e,n)},putFileContents:function(t,e,r){var n=s(S,r||{});return y.putFileContents(t,e,n)},stat:function(t,e){var r=s(S,e||{});return m.getStat(t,r)}}}}},function(t,e,r){"use strict";(function(e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(52),o=r(53),s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,u=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function c(t){return(t||"").toString().replace(u,"")}var l=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function d(t){var r,i=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).location||{},o={},a=n(t=t||i);if("blob:"===t.protocol)o=new p(unescape(t.pathname),{});else if("string"===a)for(r in o=new p(t,{}),h)delete o[r];else if("object"===a){for(r in t)r in h||(o[r]=t[r]);void 0===o.slashes&&(o.slashes=s.test(t.href))}return o}function f(t){t=c(t);var e=a.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function p(t,e,r){if(t=c(t),!(this instanceof p))return new p(t,e,r);var s,a,u,h,g,y,m=l.slice(),v=n(e),_=this,b=0;for("object"!==v&&"string"!==v&&(r=e,e=null),r&&"function"!=typeof r&&(r=o.parse),e=d(e),s=!(a=f(t||"")).protocol&&!a.slashes,_.slashes=a.slashes||s&&e.slashes,_.protocol=a.protocol||e.protocol||"",t=a.rest,a.slashes||(m[3]=[/(.*)/,"pathname"]);b<m.length;b++)"function"!=typeof(h=m[b])?(u=h[0],y=h[1],u!=u?_[y]=t:"string"==typeof u?~(g=t.indexOf(u))&&("number"==typeof h[2]?(_[y]=t.slice(0,g),t=t.slice(g+h[2])):(_[y]=t.slice(g),t=t.slice(0,g))):(g=u.exec(t))&&(_[y]=g[1],t=t.slice(0,g.index)),_[y]=_[y]||s&&h[3]&&e[y]||"",h[4]&&(_[y]=_[y].toLowerCase())):t=h(t);r&&(_.query=r(_.query)),s&&e.slashes&&"/"!==_.pathname.charAt(0)&&(""!==_.pathname||""!==e.pathname)&&(_.pathname=function(t,e){if(""===t)return e;for(var r=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=r.length,i=r[n-1],o=!1,s=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),s++):s&&(0===n&&(o=!0),r.splice(n,1),s--);return o&&r.unshift(""),"."!==i&&".."!==i||r.push(""),r.join("/")}(_.pathname,e.pathname)),i(_.port,_.protocol)||(_.host=_.hostname,_.port=""),_.username=_.password="",_.auth&&(h=_.auth.split(":"),_.username=h[0]||"",_.password=h[1]||""),_.origin=_.protocol&&_.host&&"file:"!==_.protocol?_.protocol+"//"+_.host:"null",_.href=_.toString()}p.prototype={set:function(t,e,r){var n=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(r||o.parse)(e)),n[t]=e;break;case"port":n[t]=e,i(e,n.protocol)?e&&(n.host=n.hostname+":"+e):(n.host=n.hostname,n[t]="");break;case"hostname":n[t]=e,n.port&&(e+=":"+n.port),n.host=e;break;case"host":n[t]=e,/:\d+$/.test(e)?(e=e.split(":"),n.port=e.pop(),n.hostname=e.join(":")):(n.hostname=e,n.port="");break;case"protocol":n.protocol=e.toLowerCase(),n.slashes=!r;break;case"pathname":case"hash":if(e){var s="pathname"===t?"/":"#";n[t]=e.charAt(0)!==s?s+e:e}else n[t]=e;break;default:n[t]=e}for(var a=0;a<l.length;a++){var u=l[a];u[4]&&(n[u[1]]=n[u[1]].toLowerCase())}return n.origin=n.protocol&&n.host&&"file:"!==n.protocol?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},toString:function(t){t&&"function"==typeof t||(t=o.stringify);var e,r=this,i=r.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var s=i+(r.slashes?"//":"");return r.username&&(s+=r.username,r.password&&(s+=":"+r.password),s+="@"),s+=r.host+r.pathname,(e="object"===n(r.query)?t(r.query):r.query)&&(s+="?"!==e.charAt(0)?"?"+e:e),r.hash&&(s+=r.hash),s}},p.extractProtocol=f,p.location=d,p.trimLeft=c,p.qs=o,t.exports=p}).call(this,r(21))},function(t,e,r){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty;function i(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}e.stringify=function(t,e){e=e||"";var r,i,o=[];for(i in"string"!=typeof e&&(e="?"),t)if(n.call(t,i)){if((r=t[i])||null!=r&&!isNaN(r)||(r=""),i=encodeURIComponent(i),r=encodeURIComponent(r),null===i||null===r)continue;o.push(i+"="+r)}return o.length?e+o.join("&"):""},e.parse=function(t){for(var e,r=/([^=?&]+)=?([^&]*)/g,n={};e=r.exec(t);){var o=i(e[1]),s=i(e[2]);null===o||null===s||o in n||(n[o]=s)}return n}},function(t,e,r){var n=r(24),i=(r(4).merge,r(2)),o=i.handleResponseCode,s=i.processGlobFilter,a=i.processResponsePayload,u=r(8),c=u.normaliseHREF,l=u.normalisePath,h=r(9),d=h.parseXML,f=h.prepareFileFromProps,p=r(1),g=p.encodePath,y=p.joinURL,m=p.prepareRequestOptions,v=p.request;t.exports={getDirectoryContents:function(t,e){var r={url:y(e.remoteURL,g(t),"/"),method:"PROPFIND",headers:{Accept:"text/plain",Depth:e.deep?"infinity":1},responseType:"text"},i=null;return m(r,e),v(r).then(o).then((function(t){return i=t,t.data})).then(d).then((function(r){return function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=n.join(e,r,"/"),s=n.join(e,"/"),a=t.multistatus.response;return a.filter((function(t){var e=t.href;return(e=n.join(l(c(e)),"/"))!==s&&e!==o})).map((function(t){var e=c(t.href),r=t.propstat.prop,o=l("/"===s?e:n.relative(s,e));return f(r,o,i)}))}(r,e.remotePath,t,e.details)})).then((function(t){return a(i,t,e.details)})).then((function(t){return e.glob?s(t,e.glob):t}))}}},function(t,e,r){(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},o=/%[sdj%]/g;e.format=function(t){if(!v(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(u(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,i=n.length,s=String(t).replace(o,(function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}})),a=n[r];r<i;a=n[++r])y(a)||!w(a)?s+=" "+a:s+=" "+u(a);return s},e.deprecate=function(r,n){if(void 0!==t&&!0===t.noDeprecation)return r;if(void 0===t)return function(){return e.deprecate(r,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),i=!0}return r.apply(this,arguments)}};var s,a={};function u(t,r){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(r)?n.showHidden=r:r&&e._extend(n,r),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),h(n,t,n.depth)}function c(t,e){var r=u.styles[e];return r?"["+u.colors[r][0]+"m"+t+"["+u.colors[r][1]+"m":t}function l(t,e){return t}function h(t,r,n){if(t.customInspect&&r&&x(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return v(i)||(i=h(t,i,n)),i}var o=function(t,e){if(_(e))return t.stylize("undefined","undefined");if(v(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return m(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}(t,r);if(o)return o;var s=Object.keys(r),a=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),A(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return d(r);if(0===s.length){if(x(r)){var u=r.name?": "+r.name:"";return t.stylize("[Function"+u+"]","special")}if(b(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(E(r))return t.stylize(Date.prototype.toString.call(r),"date");if(A(r))return d(r)}var c,l="",w=!1,S=["{","}"];return p(r)&&(w=!0,S=["[","]"]),x(r)&&(l=" [Function"+(r.name?": "+r.name:"")+"]"),b(r)&&(l=" "+RegExp.prototype.toString.call(r)),E(r)&&(l=" "+Date.prototype.toUTCString.call(r)),A(r)&&(l=" "+d(r)),0!==s.length||w&&0!=r.length?n<0?b(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),c=w?function(t,e,r,n,i){for(var o=[],s=0,a=e.length;s<a;++s)C(e,String(s))?o.push(f(t,e,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(f(t,e,r,n,i,!0))})),o}(t,r,n,a,s):s.map((function(e){return f(t,r,n,a,e,w)})),t.seen.pop(),function(t,e,r){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}(c,l,S)):S[0]+l+S[1]}function d(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,i,o){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),C(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(u.value)<0?(a=y(r)?h(t,u.value,null):h(t,u.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),_(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function y(t){return null===t}function m(t){return"number"==typeof t}function v(t){return"string"==typeof t}function _(t){return void 0===t}function b(t){return w(t)&&"[object RegExp]"===S(t)}function w(t){return"object"===n(t)&&null!==t}function E(t){return w(t)&&"[object Date]"===S(t)}function A(t){return w(t)&&("[object Error]"===S(t)||t instanceof Error)}function x(t){return"function"==typeof t}function S(t){return Object.prototype.toString.call(t)}function T(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(r){if(_(s)&&(s=t.env.NODE_DEBUG||""),r=r.toUpperCase(),!a[r])if(new RegExp("\\b"+r+"\\b","i").test(s)){var n=t.pid;a[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,n,t)}}else a[r]=function(){};return a[r]},e.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=g,e.isNull=y,e.isNullOrUndefined=function(t){return null==t},e.isNumber=m,e.isString=v,e.isSymbol=function(t){return"symbol"===n(t)},e.isUndefined=_,e.isRegExp=b,e.isObject=w,e.isDate=E,e.isError=A,e.isFunction=x,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"===n(t)||void 0===t},e.isBuffer=r(56);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var t=new Date,e=[T(t.getHours()),T(t.getMinutes()),T(t.getSeconds())].join(":");return[t.getDate(),P[t.getMonth()],e].join(" ")}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",O(),e.format.apply(e,arguments))},e.inherits=r(57),e._extend=function(t,e){if(!e||!w(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var I="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function k(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(I&&t[I]){var e;if("function"!=typeof(e=t[I]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,I,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise((function(t,n){e=t,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,i)}catch(t){r(t)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),I&&Object.defineProperty(e,I,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,i(t))},e.promisify.custom=I,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,r).then((function(e){t.nextTick(s,null,e)}),(function(e){t.nextTick(k,e,s)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,i(e)),r}}).call(this,r(7))},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return t&&"object"===r(t)&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){t.exports=l,l.Minimatch=h;var n={sep:"/"};try{n=r(23)}catch(t){}var i=l.GLOBSTAR=h.GLOBSTAR={},o=r(59),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="().*{}+?[]^$\\!".split("").reduce((function(t,e){return t[e]=!0,t}),{}),u=/\/+/;function c(t,e){t=t||{},e=e||{};var r={};return Object.keys(e).forEach((function(t){r[t]=e[t]})),Object.keys(t).forEach((function(e){r[e]=t[e]})),r}function l(t,e,r){if("string"!=typeof e)throw new TypeError("glob pattern string required");return r||(r={}),!(!r.nocomment&&"#"===e.charAt(0))&&(""===e.trim()?""===t:new h(e,r).match(t))}function h(t,e){if(!(this instanceof h))return new h(t,e);if("string"!=typeof t)throw new TypeError("glob pattern string required");e||(e={}),t=t.trim(),"/"!==n.sep&&(t=t.split(n.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function d(t,e){if(e||(e=this instanceof h?this.options:{}),void 0===(t=void 0===t?this.pattern:t))throw new TypeError("undefined pattern");return e.nobrace||!t.match(/\{.*\}/)?[t]:o(t)}l.filter=function(t,e){return e=e||{},function(r,n,i){return l(r,t,e)}},l.defaults=function(t){if(!t||!Object.keys(t).length)return l;var e=l,r=function(r,n,i){return e.minimatch(r,n,c(t,i))};return r.Minimatch=function(r,n){return new e.Minimatch(r,c(t,n))},r},h.defaults=function(t){return t&&Object.keys(t).length?l.defaults(t).Minimatch:h},h.prototype.debug=function(){},h.prototype.make=function(){if(!this._made){var t=this.pattern,e=this.options;if(e.nocomment||"#"!==t.charAt(0))if(t){this.parseNegate();var r=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error),this.debug(this.pattern,r),r=this.globParts=r.map((function(t){return t.split(u)})),this.debug(this.pattern,r),r=r.map((function(t,e,r){return t.map(this.parse,this)}),this),this.debug(this.pattern,r),r=r.filter((function(t){return-1===t.indexOf(!1)})),this.debug(this.pattern,r),this.set=r}else this.empty=!0;else this.comment=!0}},h.prototype.parseNegate=function(){var t=this.pattern,e=!1,r=0;if(!this.options.nonegate){for(var n=0,i=t.length;n<i&&"!"===t.charAt(n);n++)e=!e,r++;r&&(this.pattern=t.substr(r)),this.negate=e}},l.braceExpand=function(t,e){return d(t,e)},h.prototype.braceExpand=d,h.prototype.parse=function(t,e){if(t.length>65536)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&"**"===t)return i;if(""===t)return"";var n,o="",u=!!r.nocase,c=!1,l=[],h=[],d=!1,p=-1,g=-1,y="."===t.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",m=this;function v(){if(n){switch(n){case"*":o+="[^/]*?",u=!0;break;case"?":o+="[^/]",u=!0;break;default:o+="\\"+n}m.debug("clearStateChar %j %j",n,o),n=!1}}for(var _,b=0,w=t.length;b<w&&(_=t.charAt(b));b++)if(this.debug("%s\t%s %s %j",t,b,o,_),c&&a[_])o+="\\"+_,c=!1;else switch(_){case"/":return!1;case"\\":v(),c=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",t,b,o,_),d){this.debug("  in class"),"!"===_&&b===g+1&&(_="^"),o+=_;continue}m.debug("call clearStateChar %j",n),v(),n=_,r.noext&&v();continue;case"(":if(d){o+="(";continue}if(!n){o+="\\(";continue}l.push({type:n,start:b-1,reStart:o.length,open:s[n].open,close:s[n].close}),o+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,o),n=!1;continue;case")":if(d||!l.length){o+="\\)";continue}v(),u=!0;var E=l.pop();o+=E.close,"!"===E.type&&h.push(E),E.reEnd=o.length;continue;case"|":if(d||!l.length||c){o+="\\|",c=!1;continue}v(),o+="|";continue;case"[":if(v(),d){o+="\\"+_;continue}d=!0,g=b,p=o.length,o+=_;continue;case"]":if(b===g+1||!d){o+="\\"+_,c=!1;continue}if(d){var A=t.substring(g+1,b);try{RegExp("["+A+"]")}catch(t){var x=this.parse(A,f);o=o.substr(0,p)+"\\["+x[0]+"\\]",u=u||x[1],d=!1;continue}}u=!0,d=!1,o+=_;continue;default:v(),c?c=!1:!a[_]||"^"===_&&d||(o+="\\"),o+=_}for(d&&(A=t.substr(g+1),x=this.parse(A,f),o=o.substr(0,p)+"\\["+x[0],u=u||x[1]),E=l.pop();E;E=l.pop()){var S=o.slice(E.reStart+E.open.length);this.debug("setting tail",o,E),S=S.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(t,e,r){return r||(r="\\"),e+e+r+"|"})),this.debug("tail=%j\n   %s",S,S,E,o);var T="*"===E.type?"[^/]*?":"?"===E.type?"[^/]":"\\"+E.type;u=!0,o=o.slice(0,E.reStart)+T+"\\("+S}v(),c&&(o+="\\\\");var P=!1;switch(o.charAt(0)){case".":case"[":case"(":P=!0}for(var O=h.length-1;O>-1;O--){var C=h[O],I=o.slice(0,C.reStart),k=o.slice(C.reStart,C.reEnd-8),D=o.slice(C.reEnd-8,C.reEnd),j=o.slice(C.reEnd);D+=j;var F=I.split("(").length-1,R=j;for(b=0;b<F;b++)R=R.replace(/\)[+*?]?/,"");var N="";""===(j=R)&&e!==f&&(N="$"),o=I+k+j+N+D}if(""!==o&&u&&(o="(?=.)"+o),P&&(o=y+o),e===f)return[o,u];if(!u)return function(t){return t.replace(/\\(.)/g,"$1")}(t);var M=r.nocase?"i":"";try{var U=new RegExp("^"+o+"$",M)}catch(t){return new RegExp("$.")}return U._glob=t,U._src=o,U};var f={};l.makeRe=function(t,e){return new h(t,e||{}).makeRe()},h.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,r=e.noglobstar?"[^/]*?":e.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",n=e.nocase?"i":"",o=t.map((function(t){return t.map((function(t){return t===i?r:"string"==typeof t?function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(t):t._src})).join("\\/")})).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,n)}catch(t){this.regexp=!1}return this.regexp},l.match=function(t,e,r){var n=new h(e,r=r||{});return t=t.filter((function(t){return n.match(t)})),n.options.nonull&&!t.length&&t.push(e),t},h.prototype.match=function(t,e){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;var r=this.options;"/"!==n.sep&&(t=t.split(n.sep).join("/")),t=t.split(u),this.debug(this.pattern,"split",t);var i,o,s=this.set;for(this.debug(this.pattern,"set",s),o=t.length-1;o>=0&&!(i=t[o]);o--);for(o=0;o<s.length;o++){var a=s[o],c=t;if(r.matchBase&&1===a.length&&(c=[i]),this.matchOne(c,a,e))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},h.prototype.matchOne=function(t,e,r){var n=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var o=0,s=0,a=t.length,u=e.length;o<a&&s<u;o++,s++){this.debug("matchOne loop");var c,l=e[s],h=t[o];if(this.debug(e,l,h),!1===l)return!1;if(l===i){this.debug("GLOBSTAR",[e,l,h]);var d=o,f=s+1;if(f===u){for(this.debug("** at the end");o<a;o++)if("."===t[o]||".."===t[o]||!n.dot&&"."===t[o].charAt(0))return!1;return!0}for(;d<a;){var p=t[d];if(this.debug("\nglobstar while",t,d,e,f,p),this.matchOne(t.slice(d),e.slice(f),r))return this.debug("globstar found match!",d,a,p),!0;if("."===p||".."===p||!n.dot&&"."===p.charAt(0)){this.debug("dot detected!",t,d,e,f);break}this.debug("globstar swallow a segment, and continue"),d++}return!(!r||(this.debug("\n>>> no match, partial?",t,d,e,f),d!==a))}if("string"==typeof l?(c=n.nocase?h.toLowerCase()===l.toLowerCase():h===l,this.debug("string match",l,h,c)):(c=h.match(l),this.debug("pattern match",l,h,c)),!c)return!1}if(o===a&&s===u)return!0;if(o===a)return r;if(s===u)return o===a-1&&""===t[o];throw new Error("wtf?")}},function(t,e,r){var n=r(60),i=r(61);t.exports=function(t){return t?("{}"===t.substr(0,2)&&(t="\\{\\}"+t.substr(2)),function t(e,r){var o=[],s=i("{","}",e);if(!s||/\$$/.test(s.pre))return[e];var u,c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),h=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),y=c||h,m=s.body.indexOf(",")>=0;if(!y&&!m)return s.post.match(/,.*\}/)?(e=s.pre+"{"+s.body+a+s.post,t(e)):[e];if(y)u=s.body.split(/\.\./);else if(1===(u=function t(e){if(!e)return[""];var r=[],n=i("{","}",e);if(!n)return e.split(",");var o=n.pre,s=n.body,a=n.post,u=o.split(",");u[u.length-1]+="{"+s+"}";var c=t(a);return a.length&&(u[u.length-1]+=c.shift(),u.push.apply(u,c)),r.push.apply(r,u),r}(s.body)).length&&1===(u=t(u[0],!1).map(d)).length)return(b=s.post.length?t(s.post,!1):[""]).map((function(t){return s.pre+u[0]+t}));var v,_=s.pre,b=s.post.length?t(s.post,!1):[""];if(y){var w=l(u[0]),E=l(u[1]),A=Math.max(u[0].length,u[1].length),x=3==u.length?Math.abs(l(u[2])):1,S=p;E<w&&(x*=-1,S=g);var T=u.some(f);v=[];for(var P=w;S(P,E);P+=x){var O;if(h)"\\"===(O=String.fromCharCode(P))&&(O="");else if(O=String(P),T){var C=A-O.length;if(C>0){var I=new Array(C+1).join("0");O=P<0?"-"+I+O.slice(1):I+O}}v.push(O)}}else v=n(u,(function(e){return t(e,!1)}));for(var k=0;k<v.length;k++)for(var D=0;D<b.length;D++){var j=_+v[k]+b[D];(!r||y||j)&&o.push(j)}return o}(function(t){return t.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(u).split("\\.").join(c)}(t),!0).map(h)):[]};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",u="\0COMMA"+Math.random()+"\0",c="\0PERIOD"+Math.random()+"\0";function l(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function h(t){return t.split(o).join("\\").split(s).join("{").split(a).join("}").split(u).join(",").split(c).join(".")}function d(t){return"{"+t+"}"}function f(t){return/^-?0\d/.test(t)}function p(t,e){return t<=e}function g(t,e){return t>=e}},function(t,e){t.exports=function(t,e){for(var n=[],i=0;i<t.length;i++){var o=e(t[i],i);r(o)?n.push.apply(n,o):n.push(o)}return n};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";function n(t,e,r){t instanceof RegExp&&(t=i(t,r)),e instanceof RegExp&&(e=i(e,r));var n=o(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function i(t,e){var r=e.match(t);return r?r[0]:null}function o(t,e,r){var n,i,o,s,a,u=r.indexOf(t),c=r.indexOf(e,u+1),l=u;if(u>=0&&c>0){for(n=[],o=r.length;l>=0&&!a;)l==u?(n.push(l),u=r.indexOf(t,l+1)):1==n.length?a=[n.pop(),c]:((i=n.pop())<o&&(o=i,s=c),c=r.indexOf(e,l+1)),l=u<c&&u>=0?u:c;n.length&&(a=[o,s])}return a}t.exports=n,n.range=o},function(t,e,r){"use strict";var n=r(63),i=r(6),o=r(6),s=r(3).buildOptions,a=r(65);e.parse=function(t,e,r){if(r){!0===r&&(r={});var u=a.validate(t,r);if(!0!==u)throw Error(u.err.msg)}return e=s(e,o.defaultOptions,o.props),n.convertToJson(i.getTraversalObj(t,e),e)},e.convertTonimn=r(66).convert2nimn,e.getTraversalObj=i.getTraversalObj,e.convertToJson=n.convertToJson,e.convertToJsonString=r(67).convertToJsonString,e.validate=a.validate,e.j2xParser=r(68),e.parseToNimn=function(t,r,n){return e.convertTonimn(e.getTraversalObj(t,n),r,n)}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(3);e.convertToJson=function t(e,r){var o={};if(!(e.child&&!i.isEmptyObject(e.child)||e.attrsMap&&!i.isEmptyObject(e.attrsMap)))return i.isExist(e.val)?e.val:"";i.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==r.cdataPositionChar)&&("strict"===r.arrayMode?o[r.textNodeName]=[e.val]:o[r.textNodeName]=e.val),i.merge(o,e.attrsMap,r.arrayMode);for(var s=Object.keys(e.child),a=0;a<s.length;a++){var u=s[a];if(e.child[u]&&e.child[u].length>1)for(var c in o[u]=[],e.child[u])o[u].push(t(e.child[u][c],r));else if(!0===r.arrayMode){var l=t(e.child[u][0],r);"object"===n(l)?o[u]=[l]:o[u]=l}else"strict"===r.arrayMode?o[u]=[t(e.child[u][0],r)]:o[u]=t(e.child[u][0],r)}return o}},function(t,e,r){"use strict";t.exports=function(t,e,r){this.tagname=t,this.parent=e,this.child={},this.attrsMap={},this.val=r,this.addChild=function(t){Array.isArray(this.child[t.tagname])?this.child[t.tagname].push(t):this.child[t.tagname]=[t]}}},function(t,e,r){"use strict";var n=r(3),i={allowBooleanAttributes:!1},o=["allowBooleanAttributes"];function s(t,e){for(var r=e;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{var n=t.substr(r,e-r);if(e>5&&"xml"===n)return d("InvalidXml","XML declaration allowed only at the start of the document.",p(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function a(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){var r=1;for(e+=8;e<t.length;e++)if("<"===t[e])r++;else if(">"===t[e]&&0==--r)break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}function u(t,e){for(var r="",n="",i=!1;e<t.length;e++){if('"'===t[e]||"'"===t[e])if(""===n)n=t[e];else{if(n!==t[e])continue;n=""}else if(">"===t[e]&&""===n){i=!0;break}r+=t[e]}return""===n&&{value:r,index:e,tagClosed:i}}e.validate=function(t,e){e=n.buildOptions(e,i,o);var r,c=[],f=!1,g=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(var y=0;y<t.length;y++){if("<"!==t[y]){if(" "===t[y]||"\t"===t[y]||"\n"===t[y]||"\r"===t[y])continue;return d("InvalidChar","char '".concat(t[y],"' is not expected."),p(t,y))}if("?"===t[++y]){if((y=s(t,++y)).err)return y}else{if("!"===t[y]){y=a(t,y);continue}var m=!1;"/"===t[y]&&(m=!0,y++);for(var v="";y<t.length&&">"!==t[y]&&" "!==t[y]&&"\t"!==t[y]&&"\n"!==t[y]&&"\r"!==t[y];y++)v+=t[y];if("/"===(v=v.trim())[v.length-1]&&(v=v.substring(0,v.length-1),y--),r=v,!n.isName(r))return d("InvalidTag",0===v.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '".concat(v,"' is an invalid name."),p(t,y));var _=u(t,y);if(!1===_)return d("InvalidAttr","Attributes for '".concat(v,"' have open quote."),p(t,y));var b=_.value;if(y=_.index,"/"===b[b.length-1]){var w=l(b=b.substring(0,b.length-1),e);if(!0!==w)return d(w.err.code,w.err.msg,p(t,y-b.length+w.err.line));f=!0}else if(m){if(!_.tagClosed)return d("InvalidTag","Closing tag '".concat(v,"' doesn't have proper closing."),p(t,y));if(b.trim().length>0)return d("InvalidTag","Closing tag '".concat(v,"' can't have attributes or invalid starting."),p(t,y));var E=c.pop();if(v!==E)return d("InvalidTag","Closing tag '".concat(E,"' is expected inplace of '").concat(v,"'."),p(t,y));0==c.length&&(g=!0)}else{var A=l(b,e);if(!0!==A)return d(A.err.code,A.err.msg,p(t,y-b.length+A.err.line));if(!0===g)return d("InvalidXml","Multiple possible root nodes found.",p(t,y));c.push(v),f=!0}for(y++;y<t.length;y++){if("<"===t[y]){if("!"===t[y+1]){y=a(t,++y);continue}break}if("&"===t[y]){var x=h(t,y);if(-1==x)return d("InvalidChar","char '&' is not expected.",p(t,y));y=x}}"<"===t[y]&&y--}}return f?!(c.length>0)||d("InvalidXml","Invalid '".concat(JSON.stringify(c,null,4).replace(/\r?\n/g,""),"' found."),1):d("InvalidXml","Start tag expected.",1)};var c=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function l(t,e){for(var r=n.getAllMatches(t,c),i={},o=0;o<r.length;o++){if(0===r[o][1].length)return d("InvalidAttr","Attribute '".concat(r[o][2],"' has no space in starting."),g(t,r[o][0]));if(void 0===r[o][3]&&!e.allowBooleanAttributes)return d("InvalidAttr","boolean attribute '".concat(r[o][2],"' is not allowed."),g(t,r[o][0]));var s=r[o][2];if(!f(s))return d("InvalidAttr","Attribute '".concat(s,"' is an invalid name."),g(t,r[o][0]));if(i.hasOwnProperty(s))return d("InvalidAttr","Attribute '".concat(s,"' is repeated."),g(t,r[o][0]));i[s]=1}return!0}function h(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){var r=/\d/;for("x"===t[e]&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(r))break}return-1}(t,++e);for(var r=0;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(";"===t[e])break;return-1}return e}function d(t,e,r){return{err:{code:t,msg:e,line:r}}}function f(t){return n.isName(t)}function p(t,e){return t.substring(0,e).split(/\r?\n/).length}function g(t,e){return t.indexOf(e)+e.length}},function(t,e,r){"use strict";var n=function(t){return String.fromCharCode(t)},i={nilChar:n(176),missingChar:n(201),nilPremitive:n(175),missingPremitive:n(200),emptyChar:n(178),emptyValue:n(177),boundryChar:n(179),objStart:n(198),arrStart:n(204),arrayEnd:n(185)},o=[i.nilChar,i.nilPremitive,i.missingChar,i.missingPremitive,i.boundryChar,i.emptyChar,i.emptyValue,i.arrayEnd,i.objStart,i.arrStart],s=function(t){switch(t){case void 0:return i.missingPremitive;case null:return i.nilPremitive;case"":return i.emptyValue;default:return t}},a=function(t,e){return u(e[0])||u(t[t.length-1])||(t+=i.boundryChar),t+e},u=function(t){return-1!==o.indexOf(t)},c=r(6),l=r(3).buildOptions;e.convert2nimn=function(t,e,r){return function t(e,r,n){if("string"==typeof r)return e&&e[0]&&void 0!==e[0].val?s(e[0].val):s(e);var o,u=void 0===(o=e)?i.missingChar:null===o?i.nilChar:!(o.child&&0===Object.keys(o.child).length&&(!o.attrsMap||0===Object.keys(o.attrsMap).length))||i.emptyChar;if(!0===u){var c="";if(Array.isArray(r)){c+=i.arrStart;var l=r[0],h=e.length;if("string"==typeof l)for(var d=0;d<h;d++){var f=s(e[d].val);c=a(c,f)}else for(var p=0;p<h;p++){var g=t(e[p],l,n);c=a(c,g)}c+=i.arrayEnd}else{c+=i.objStart;var y=Object.keys(r);for(var m in Array.isArray(e)&&(e=e[0]),y){var v,_=y[m];v=!n.ignoreAttributes&&e.attrsMap&&e.attrsMap[_]?t(e.attrsMap[_],r[_],n):_===n.textNodeName?t(e.val,r[_],n):t(e.child[_],r[_],n),c=a(c,v)}}return c}return u}(t,e,r=l(r,c.defaultOptions,c.props))}},function(t,e,r){"use strict";var n=r(3),i=r(3).buildOptions,o=r(6);e.convertToJsonString=function(t,e){return(e=i(e,o.defaultOptions,o.props)).indentBy=e.indentBy||"",function t(e,r,i){for(var o,s="{",a=Object.keys(e.child),u=0;u<a.length;u++){var c=a[u];if(e.child[c]&&e.child[c].length>1){for(var l in s+='"'+c+'" : [ ',e.child[c])s+=t(e.child[c][l],r)+" , ";s=s.substr(0,s.length-1)+" ] "}else s+='"'+c+'" : '+t(e.child[c][0],r)+" ,"}return n.merge(s,e.attrsMap),n.isEmptyObject(s)?n.isExist(e.val)?e.val:"":(n.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==r.cdataPositionChar)&&(s+='"'+r.textNodeName+'" : '+(!0!==(o=e.val)&&!1!==o&&isNaN(o)?'"'+o+'"':o)),","===s[s.length-1]&&(s=s.substr(0,s.length-2)),s+"}")}(t,e)}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(3).buildOptions,o={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t}},s=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function a(t){this.options=i(t,o,s),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=g),this.options.cdataTagName?this.isCDATA=y:this.isCDATA=function(){return!1},this.replaceCDATAstr=u,this.replaceCDATAarr=c,this.options.format?(this.indentate=p,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=f,this.buildObjNode=h):(this.buildTextNode=d,this.buildObjNode=l),this.buildTextValNode=d,this.buildObjectNode=l}function u(t,e){return t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t?t+"<![CDATA["+e+"]]"+this.tagEndChar:t.replace(this.options.cdataPositionChar,"<![CDATA["+e+"]]"+this.tagEndChar)}function c(t,e){if(t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t)return t+"<![CDATA["+e.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(var r in e)t=t.replace(this.options.cdataPositionChar,"<![CDATA["+e[r]+"]]>");return t+this.newLine}function l(t,e,r,n){return r&&!t.includes("<")?this.indentate(n)+"<"+e+r+">"+t+"</"+e+this.tagEndChar:this.indentate(n)+"<"+e+r+this.tagEndChar+t+this.indentate(n)+"</"+e+this.tagEndChar}function h(t,e,r,n){return""!==t?this.buildObjectNode(t,e,r,n):this.indentate(n)+"<"+e+r+"/"+this.tagEndChar}function d(t,e,r,n){return this.indentate(n)+"<"+e+r+">"+this.options.tagValueProcessor(t)+"</"+e+this.tagEndChar}function f(t,e,r,n){return""!==t?this.buildTextValNode(t,e,r,n):this.indentate(n)+"<"+e+r+"/"+this.tagEndChar}function p(t){return this.options.indentBy.repeat(t)}function g(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}function y(t){return t===this.options.cdataTagName}a.prototype.parse=function(t){return this.j2x(t,0).val},a.prototype.j2x=function(t,e){for(var r="",i="",o=Object.keys(t),s=o.length,a=0;a<s;a++){var u=o[a];if(void 0===t[u]);else if(null===t[u])i+=this.indentate(e)+"<"+u+"/"+this.tagEndChar;else if(t[u]instanceof Date)i+=this.buildTextNode(t[u],u,"",e);else if("object"!==n(t[u])){var c=this.isAttribute(u);c?r+=" "+c+'="'+this.options.attrValueProcessor(""+t[u])+'"':this.isCDATA(u)?t[this.options.textNodeName]?i+=this.replaceCDATAstr(t[this.options.textNodeName],t[u]):i+=this.replaceCDATAstr("",t[u]):u===this.options.textNodeName?t[this.options.cdataTagName]||(i+=this.options.tagValueProcessor(""+t[u])):i+=this.buildTextNode(t[u],u,"",e)}else if(Array.isArray(t[u]))if(this.isCDATA(u))i+=this.indentate(e),t[this.options.textNodeName]?i+=this.replaceCDATAarr(t[this.options.textNodeName],t[u]):i+=this.replaceCDATAarr("",t[u]);else for(var l=t[u].length,h=0;h<l;h++){var d=t[u][h];if(void 0===d);else if(null===d)i+=this.indentate(e)+"<"+u+"/"+this.tagEndChar;else if("object"===n(d)){var f=this.j2x(d,e+1);i+=this.buildObjNode(f.val,u,f.attrStr,e)}else i+=this.buildTextNode(d,u,"",e)}else if(this.options.attrNodeName&&u===this.options.attrNodeName)for(var p=Object.keys(t[u]),g=p.length,y=0;y<g;y++)r+=" "+p[y]+'="'+this.options.attrValueProcessor(""+t[u][p[y]])+'"';else{var m=this.j2x(t[u],e+1);i+=this.buildObjNode(m.val,u,m.attrStr,e)}}return{attrStr:r,val:i}},t.exports=a},function(t,e,r){"use strict";
/**
      * @license nested-property https://github.com/cosmosio/nested-property
      *
      * The MIT License (MIT)
      *
      * Copyright (c) 2014-2020 Olivier Scherrer <pode.fr@gmail.com>
      */function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports={set:function(t,e,r){if(t&&"object"==n(t)){if("string"==typeof e&&""!==e){var i=e.split(".");return i.reduce((function(t,e,n){var o=Number.isInteger(Number(i[n+1]));return t[e]=t[e]||(o?[]:{}),i.length==n+1&&(t[e]=r),t[e]}),t)}return"number"==typeof e?(t[e]=r,t[e]):t}return t},get:function(t,e){return t&&"object"==n(t)?"string"==typeof e&&""!==e?e.split(".").reduce((function(t,e){return t&&t[e]}),t):"number"==typeof e?t[e]:t:t},has:function(t,e,r){return r=r||{},!(!t||"object"!=n(t))&&("string"==typeof e&&""!==e?e.split(".").reduce((function(t,e,i,o){return i==o.length-1?r.own?!(!t||!t.hasOwnProperty(e)):!(null===t||"object"!=n(t)||!(e in t)):t&&t[e]}),t):"number"==typeof e&&e in t)},hasOwn:function(t,e,r){return this.has(t,e,r||{own:!0})},isIn:function(t,e,r,i){if(i=i||{},t&&"object"==n(t)){if("string"==typeof e&&""!==e){var o,s=e.split("."),a=!1;return o=!!s.reduce((function(t,e){return a=a||t===r||!!t&&t[e]===r,t&&t[e]}),t),i.validPath?a&&o:a}return!1}return!1}}},function(t,e,r){var n=r(2),i=r(1),o=i.encodePath,s=i.joinURL,a=i.prepareRequestOptions,u=i.request;t.exports={createDirectory:function(t,e){var r={url:s(e.remoteURL,o(t)),method:"MKCOL"};return a(r,e),u(r).then(n.handleResponseCode)}}},function(t,e,r){var n=r(2).handleResponseCode,i=r(1),o=i.encodePath,s=i.joinURL,a=i.prepareRequestOptions,u=i.request;t.exports={customRequest:function(t,e,r){return e.url||(e.url=s(r.remoteURL,o(t),"/")),a(e,r),u(e).then(n)}}},function(t,e,r){var n=r(2),i=r(1),o=i.encodePath,s=i.joinURL,a=i.prepareRequestOptions,u=i.request;t.exports={deleteFile:function(t,e){var r={url:s(e.remoteURL,o(t)),method:"DELETE"};return a(r,e),u(r).then(n.handleResponseCode)}}},function(t,e,r){var n=r(25).getStat;t.exports={pathExists:function(t,e){return n(t,e).then((function(){return!0})).catch((function(t){if(t.response&&404===t.response.status)return!1;throw t}))}}},function(t,e,r){var n=r(2),i=n.handleResponseCode,o=n.processResponsePayload,s=r(1),a=s.encodePath,u=s.joinURL,c=s.prepareRequestOptions,l=s.request,h=r(5).fromBase64;t.exports={getFileContentsBuffer:function(t,e){var r={url:u(e.remoteURL,a(t)),method:"GET",responseType:"arraybuffer"};return c(r,e),l(r).then(i).then((function(t){return o(t,t.data,e.details)}))},getFileContentsString:function(t,e){var r={url:u(e.remoteURL,a(t)),method:"GET",responseType:"text"};return c(r,e),l(r).then(i).then((function(t){return o(t,t.data,e.details)}))},getFileLink:function(t,e){var r=u(e.remoteURL,a(t)),n=/^https:/i.test(r)?"https":"http";if(e.headers&&e.headers.Authorization){if(!1===/^Basic /i.test(e.headers.Authorization))throw new Error("Failed retrieving download link: Invalid authorisation method");var i=e.headers.Authorization.replace(/^Basic /i,"").trim(),o=h(i);r=r.replace(/^https?:\/\//,"".concat(n,"://").concat(o,"@"))}return r}}},function(t,e,r){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var o=r(2),s=o.handleResponseCode,a=o.processResponsePayload,u=r(1),c=(u.encodePath,u.joinURL),l=u.prepareRequestOptions,h=u.request,d=r(9),f=d.parseXML,p=d.translateDiskSpace;function g(t){try{var e=n(t.multistatus.response,1)[0].propstat.prop,r=e["quota-used-bytes"],i=e["quota-available-bytes"];return void 0!==r&&void 0!==i?{used:parseInt(r,10),available:p(i)}:null}catch(t){}return null}t.exports={getQuota:function(t){var e={url:c(t.remoteURL,"/"),method:"PROPFIND",headers:{Accept:"text/plain",Depth:0},responseType:"text"},r=null;return l(e,t),h(e).then(s).then((function(t){return r=t,t.data})).then(f).then(g).then((function(e){return a(r,e,t.details)}))}}},function(t,e,r){var n=r(2),i=r(1),o=i.encodePath,s=i.joinURL,a=i.prepareRequestOptions,u=i.request;t.exports={moveFile:function(t,e,r){var i={url:s(r.remoteURL,o(t)),method:"MOVE",headers:{Destination:s(r.remoteURL,o(e))}};return a(i,r),u(i).then(n.handleResponseCode)}}},function(t,e,r){var n=r(2),i=r(1),o=i.encodePath,s=i.joinURL,a=i.prepareRequestOptions,u=i.request;t.exports={copyFile:function(t,e,r){var i={url:s(r.remoteURL,o(t)),method:"COPY",headers:{Destination:s(r.remoteURL,o(e))}};return a(i,r),u(i).then(n.handleResponseCode)}}},function(t,e,r){var n=r(4).merge,i=r(2),o=r(1),s=o.encodePath,a=o.joinURL,u=o.prepareRequestOptions,c=o.request,l=r(5).fromBase64;t.exports={getFileUploadLink:function(t,e){var r=a(e.remoteURL,s(t)),n=/^https:/i.test(r+="?Content-Type=application/octet-stream")?"https":"http";if(e.headers&&e.headers.Authorization){if(!1===/^Basic /i.test(e.headers.Authorization))throw new Error("Failed retrieving download link: Invalid authorisation method");var i=e.headers.Authorization.replace(/^Basic /i,"").trim(),o=l(i);r=r.replace(/^https?:\/\//,"".concat(n,"://").concat(o,"@"))}return r},putFileContents:function(t,e,r){var o={"Content-Length":e.length},l=n({headers:{"Content-Type":"application/octet-stream"},overwrite:!0},{headers:o},r||{});!1===l.overwrite&&(l.headers["If-None-Match"]="*");var h={url:a(r.remoteURL,s(t)),method:"PUT",headers:l.headers,data:e};return u(h,r),c(h).then(i.handleResponseCode)}}}])},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(2),o=n(r(7)),s=r(0),a=r(54);class u extends o.default{constructor(t){super(t);const{data:e}=s.getCredentials(t.id),{datasource:r}=e,{path:n,token:o}=r;this._path=n,this._token=o,this.client=a.buildClient(o),this.type="localfile",i.fireInstantiationHandlers("localfile",this)}get path(){return this._path}get token(){return this._token}load(t){return new Promise((t,e)=>{this.client.readFile(this.path,(r,n)=>{if(r)return e(r);t(n)})}).then(e=>(this.setContent(e),super.load(t)))}save(t,e){return super.save(t,e).then(t=>new Promise((e,r)=>{this.client.writeFile(this.path,t,n=>{if(n)return r(n);e(t)})}))}supportsRemoteBypass(){return!1}}e.default=u,i.registerDatasource("localfile",u)},function(t,e,r){var n=e;n.utils=r(3),n.common=r(14),n.sha=r(93),n.ripemd=r(97),n.hmac=r(98),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},function(t,e,r){"use strict";e.sha1=r(94),e.sha224=r(95),e.sha256=r(41),e.sha384=r(96),e.sha512=r(42)},function(t,e,r){"use strict";var n=r(3),i=r(14),o=r(40),s=n.rotl32,a=n.sum32,u=n.sum32_5,c=o.ft_1,l=i.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(d,l),t.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=s(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],l=this.h[2],d=this.h[3],f=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),g=u(s(i,5),c(p,o,l,d),f,r[n],h[p]);f=d,d=l,l=s(o,30),o=i,i=g}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],l),this.h[3]=a(this.h[3],d),this.h[4]=a(this.h[4],f)},d.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},function(t,e,r){"use strict";var n=r(3),i=r(41);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(o,i),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},function(t,e,r){"use strict";var n=r(3),i=r(42);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(o,i),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},function(t,e,r){"use strict";var n=r(3),i=r(14),o=n.rotl32,s=n.sum32,a=n.sum32_3,u=n.sum32_4,c=i.BlockHash;function l(){if(!(this instanceof l))return new l;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function d(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function f(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}n.inherits(l,c),e.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],c=this.h[3],l=this.h[4],v=r,_=n,b=i,w=c,E=l,A=0;A<80;A++){var x=s(o(u(r,h(A,n,i,c),t[p[A]+e],d(A)),y[A]),l);r=l,l=c,c=o(i,10),i=n,n=x,x=s(o(u(v,h(79-A,_,b,w),t[g[A]+e],f(A)),m[A]),E),v=E,E=w,w=o(b,10),b=_,_=x}x=a(this.h[1],i,w),this.h[1]=a(this.h[2],c,E),this.h[2]=a(this.h[3],l,v),this.h[3]=a(this.h[4],r,_),this.h[4]=a(this.h[0],n,b),this.h[0]=x},l.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,e,r){"use strict";var n=r(3),i=r(13);function o(t,e,r){if(!(this instanceof o))return new o(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(e,r))}t.exports=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Layerr=void 0;const n=r(43),i=r(100);function o(t,e){const r=[...arguments];if(this instanceof o==0)throw new Error("Cannot invoke 'Layerr' like a function: It must be called with 'new'");const{options:n,shortMessage:s}=i.parseArguments(r);this.name="Layerr",n.name&&"string"==typeof n.name&&(this.name=n.name);let a=s;if(n.cause&&(Object.defineProperty(this,"_cause",{value:n.cause}),a=`${a}: ${n.cause.message}`),this.message=a,Object.defineProperty(this,"_info",{value:{}}),n.info&&"object"==typeof n.info&&Object.assign(this._info,n.info),Error.call(this,a),Error.captureStackTrace){const t=n.constructorOpt||this.constructor;Error.captureStackTrace(this,t)}return this}e.Layerr=o,n.inherit(o,Error),o.prototype.cause=function(){return o.cause(this)||void 0},o.prototype.toString=function(){let t=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(t=`${t}: ${this.message}`),t},o.cause=function(t){return n.assertError(t),n.isError(t._cause)?t._cause:null},o.fullStack=function(t){n.assertError(t);const e=o.cause(t);return e?`${t.stack}\ncaused by: ${o.fullStack(e)}`:t.stack},o.info=function(t){n.assertError(t);const e={},r=o.cause(t);return r&&Object.assign(e,o.info(r)),t._info&&Object.assign(e,t._info),e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseArguments=void 0;const n=r(43);e.parseArguments=function(t){let e,r="";if(0===t.length)e={};else if(n.isError(t[0]))e={cause:t[0]},r=t.slice(1).join(" ")||"";else if(t[0]&&"object"==typeof t[0])e=Object.assign({},t[0]),r=t.slice(1).join(" ")||"";else{if("string"!=typeof t[0])throw new Error("Invalid arguments passed to Layerr");e={},r=r=t.join(" ")||""}return{options:e,shortMessage:r}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.objectValues=void 0,e.objectValues=function(t){return Object.keys(t).map(e=>t[e])}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.removeSharePrefix=e.prependSharePrefix=e.moveGroupBetweenVaults=e.mergeHistories=void 0;const i=n(r(8)),o=/^\$[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}\s/;e.mergeHistories=function(t,e){return[]},e.moveGroupBetweenVaults=function(t,e){(e instanceof i.default?e:e.vault).format.cloneGroup(t._source,e instanceof i.default?"0":e.id),t.delete(!0)},e.prependSharePrefix=function(t,e){return t.map(t=>o.test(t)?t:`$${e} ${t}`)},e.removeSharePrefix=function(t){return t.map(t=>o.test(t)?t.replace(o,""):t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.executeTitleGroup=e.executeSetGroupAttribute=e.executeSetEntryProperty=e.executeSetEntryAttribute=e.executeSetArchiveAttribute=e.executePad=e.executeMoveGroup=e.executeMoveEntry=e.executeFormat=e.executeDeleteGroupAttribute=e.executeDeleteGroup=e.executeDeleteEntryProperty=e.executeDeleteEntryAttribute=e.executeDeleteEntry=e.executeDeleteArchiveAttribute=e.executeCreateGroup=e.executeCreateEntry=e.executeComment=e.executeArchiveID=void 0;const n=r(17),i=r(1);e.executeArchiveID=function(t,e,r){if(!e.shareID){if(t.id)throw new Error("Vault ID already set");t.id=r}},e.executeComment=function(){},e.executeCreateEntry=function(t,e,r,i){t.groups=t.groups||[];const o={id:i,properties:{title:""},shareID:e.shareID,parentID:r};e.permissions&&(o.permissions=e.permissions);const s=n.findGroupByID(t.groups,r);if(!s)throw new Error("Invalid group ID: "+r);s.entries=s.entries||[],s.entries.push(o)},e.executeCreateGroup=function(t,e,r,i){t.groups=t.groups||[];const o={id:i,title:"New group",shareID:e.shareID,parentID:r};if(e.permissions&&(o.permissions=e.permissions),"0"===r)t.groups.push(o);else{const e=n.findGroupByID(t.groups,r);if(!e)throw new Error("Invalid parent group ID: "+r);e.groups=e.groups||[],e.groups.push(o)}},e.executeDeleteArchiveAttribute=function(t,e,r){const n=t.attributes||{};if(!0!==n.hasOwnProperty(r))throw new Error("Vault contains no such attribute: "+r);if(!delete n[r])throw new Error("Failed deleting attribute: "+r)},e.executeDeleteEntry=function(t,e,r){t.groups=t.groups||[];const{group:i,index:o}=n.findGroupContainingEntryID(t.groups,r);if(!i)throw new Error("Failed deleting entry: Invalid entry ID: "+r);i.entries.splice(o,1)},e.executeDeleteEntryAttribute=function(t,e,r,o){t.groups=t.groups||[];const s=n.findEntryByID(t.groups,r);if(!s)throw new Error("Entry not found for ID");s.attributes=s.attributes||{};const a=s.attributes[o];if(!delete s.attributes[o])throw new Error("Failed deleting attribute");s.history=s.history||[],s.history.push(n.generateEntryLegacyHistoryItem(o,i.EntryPropertyType.Attribute,a,null))},e.executeDeleteEntryProperty=function(t,e,r,o){t.groups=t.groups||[];const s=n.findEntryByID(t.groups,r);if(!s)throw new Error("Entry not found for ID: "+r);s.properties=s.properties||{};const a=s.properties[o];if(!delete s.properties[o])throw new Error("Failed deleting property: "+o);s.history=s.history||[],s.history.push(n.generateEntryLegacyHistoryItem(o,i.EntryPropertyType.Property,a,null))},e.executeDeleteGroup=function(t,e,r){t.groups=t.groups||[];const{group:i,index:o}=n.findGroupContainingGroupID(t,r);if(!i)throw new Error("Invalid group ID: "+r);i.groups.splice(o,1)},e.executeDeleteGroupAttribute=function(t,e,r,i){t.groups=t.groups||[];const o=n.findGroupByID(t.groups,r);if(!o)throw new Error("Group not found for ID: "+r);if(o.attributes=o.attributes||{},!delete o.attributes[i])throw new Error("Failed deleting attribute: "+i)},e.executeFormat=function(t,e,r){if(!e.shareID){if(t.format)throw new Error("Format already set");t.format=r}},e.executeMoveEntry=function(t,e,r,i){t.groups=t.groups||[];const{group:o,index:s}=n.findGroupContainingEntryID(t.groups,r);if(!o)throw new Error("Invalid entry ID: "+r);const a=n.findGroupByID(t.groups,i);if(!a)throw new Error("Invalid group ID");const[u]=o.entries.splice(s,1);a.entries=a.entries||[],a.entries.push(u),u.parentID=i},e.executeMoveGroup=function(t,e,r,i){t.groups=t.groups||[];const{group:o,index:s}=n.findGroupContainingGroupID(t,r);if(!o)throw new Error("Invalid group ID: "+r);const a=1===i.length&&0===parseInt(i,10)?t:n.findGroupByID(t.groups,i);if(!a)throw new Error("Invalid target group ID: "+i);const[u]=o.groups.splice(s,1);a.groups=a.groups||[],a.groups.push(u),u.parentID=i},e.executePad=function(){},e.executeSetArchiveAttribute=function(t,e,r,n){t.attributes=t.attributes||{},t.attributes[r]=n},e.executeSetEntryAttribute=function(t,e,r,o,s){t.groups=t.groups||[];const a=n.findEntryByID(t.groups,r);if(!a)throw new Error("Entry not found for ID: "+r);a.attributes=a.attributes||{};const u="string"==typeof a.attributes[o]?a.attributes[o]:null;a.attributes[o]=s,a.history=a.history||[],a.history.push(n.generateEntryLegacyHistoryItem(o,i.EntryPropertyType.Attribute,u,s))},e.executeSetEntryProperty=function(t,e,r,o,s){t.groups=t.groups||[];const a=n.findEntryByID(t.groups,r);if(!a)throw new Error("Entry not found for ID: "+r);a.properties=a.properties||{};const u="string"==typeof a.properties[o]?a.properties[o]:null;a.properties[o]=s,a.history=a.history||[],a.history.push(n.generateEntryLegacyHistoryItem(o,i.EntryPropertyType.Property,u,s))},e.executeSetGroupAttribute=function(t,e,r,i,o){t.groups=t.groups||[];const s=n.findGroupByID(t.groups,r);if(!s)throw new Error("Group not found for ID: "+r);s.attributes=s.attributes||{},s.attributes[i]=o},e.executeTitleGroup=function(t,e,r,i){t.groups=t.groups||[];const o=n.findGroupByID(t.groups,r);if(!o)throw new Error("Group not found for ID: "+r);o.title=i}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(49),o=n(r(24));function s(t){const e=t.substr(0,3);return["cmm"].indexOf(e)>=0}let a=(()=>{class t{constructor(t){this.format=t}canBeFlattened(){return this.format.history.length>=t.FLATTENING_MIN_LINES}flatten(e=!1){const r=this.format.history,n=[],a=new o.default;let u,c=r.length-t.PRESERVE_LINES;if(c<=0||!this.canBeFlattened()){if(!e)return!1;c=r.length}for(let t=0;t<c;t+=1)u=r[t],s(u)&&n.push(u),a.execute(u);const l=i.describeVaultDataset(a.source,"0"),h=[...n,...l,...r.slice(c)];return this.format.erase(),this.format.execute(h),!0}}return t.FLATTENING_MIN_LINES=6e3,t.PRESERVE_LINES=5e3,t})();e.default=a},function(t,e,r){"use strict";function n(t){return 0===t.indexOf("b~>buttercup/a")}function i(t){const e="b~>buttercup/a".length;return t.substr(e,t.length-e)}Object.defineProperty(e,"__esModule",{value:!0}),e.vaultContentsEncrypted=e.stripSignature=e.sign=e.hasValidSignature=e.getSignature=e.getFormat=void 0,e.getFormat=function(){return"buttercup/a"},e.getSignature=function(){return"b~>buttercup/a"},e.hasValidSignature=n,e.sign=function(t){return n(t)?t:"b~>buttercup/a"+t},e.stripSignature=i,e.vaultContentsEncrypted=function(t){if("string"==typeof t&&n(t)){const e=i(t);return!1===/["\s\t\n~]/.test(e)}return!1}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(26),i=["string","number","boolean","undefined"];class o{constructor(t,e){this._vaultA=t,this._vaultB=e}static calculateHistoryDifferences(t,e){return function(t,e){const r=[...t],n=[...e],i=function(t,e){const r=t=>t&&t.length>=3?t.substr(0,3):"",n=t=>t.split(" ")[1];for(let i=t.length-1;i>=9;i-=1)if("pad"===r(t[i])){const o=n(t[i]);for(let t=e.length-1;t>=0;t-=1)if("pad"===r(e[t])&&n(e[t])===o)return{a:i,b:t}}return null}(r,n);return null===i?null:{original:r.splice(i.a+1,r.length),secondary:n.splice(i.b+1,n.length),common:r}}(t,e)}calculateDifferences(){return o.calculateHistoryDifferences(this._vaultA.format.history,this._vaultB.format.history)}vaultsDiffer(){const t=n.createVaultFacade(this._vaultA),e=n.createVaultFacade(this._vaultB);return delete t.id,delete e.id,delete t._tag,delete e._tag,function t(e,r){if(Array.isArray(e)&&Array.isArray(r)){if(!e.some((function(e){return!r.some((function(r){return!1===t(e,r)}))})))return r.some((function(r){return!e.some((function(e){return!1===t(r,e)}))}))}else if("object"==typeof e&&"object"==typeof r){if(null===e&&null===r)return!1;let i=(n=[...Object.keys(e),...Object.keys(r)]).filter((function(t,e){return n.indexOf(t)===e}));if(!i.some((function(t){return!(e.hasOwnProperty(t)&&r.hasOwnProperty(t))})))return i.some((function(n){return t(e[n],r[n])}))}else if(i.indexOf(typeof e)===i.indexOf(typeof r))return e!==r;var n;return!0}(t,e)}}e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(18),i=r(1);function o(t){return[n.createFieldDescriptor(t,"Title",i.EntryPropertyType.Property,"title")]}function s(t){return[...o(t),n.createFieldDescriptor(t,"Username",i.EntryPropertyType.Property,"username"),n.createFieldDescriptor(t,"Password",i.EntryPropertyType.Property,"password",{valueType:i.EntryPropertyValueType.Password})]}e.default={[i.EntryType.CreditCard]:function(t){return[...o(t),n.createFieldDescriptor(t,"Card Holder",i.EntryPropertyType.Property,"username"),n.createFieldDescriptor(t,"Card Number",i.EntryPropertyType.Property,"password",{formatting:{format:[{char:"\\d",repeat:4},{exactly:"-"},{char:"\\d",repeat:4},{exactly:"-"},{char:"\\d",repeat:4},{exactly:"-"},{char:"\\d",repeat:4}],placeholder:"DDDD-DDDD-DDDD-DDDD"}}),n.createFieldDescriptor(t,"Card Type",i.EntryPropertyType.Property,"type",{formatting:{options:{visa:"Visa",mastercard:"Mastercard",amex:"American Express",discover:"Discover",generic:"Generic"},defaultOption:"generic"}}),n.createFieldDescriptor(t,"CVV",i.EntryPropertyType.Property,"cvv",{formatting:{format:[{char:"\\d",repeat:4}],placeholder:"DDD or DDDD"},valueType:i.EntryPropertyValueType.Password}),n.createFieldDescriptor(t,"Valid From",i.EntryPropertyType.Property,"valid_from",{formatting:{format:[{char:"[01]",repeat:1},{char:"\\d",repeat:1},{exactly:"/"},{char:"2",repeat:1},{char:"\\d",repeat:3}],placeholder:"MM/YYYY"}}),n.createFieldDescriptor(t,"Expiry",i.EntryPropertyType.Property,"expiry",{formatting:{format:[{char:"[01]",repeat:1},{char:"\\d",repeat:1},{exactly:"/"},{char:"2",repeat:1},{char:"\\d",repeat:3}],placeholder:"MM/YYYY"}})]},[i.EntryType.Login]:s,[i.EntryType.Note]:function(t){return[...o(t),n.createFieldDescriptor(t,"Note",i.EntryPropertyType.Property,"note",{valueType:i.EntryPropertyValueType.Note})]},[i.EntryType.SSHKey]:function(t){return[...o(t),n.createFieldDescriptor(t,"Public key",i.EntryPropertyType.Property,"publicKey"),n.createFieldDescriptor(t,"Private key",i.EntryPropertyType.Property,"privateKey",{valueType:i.EntryPropertyValueType.Note})]},[i.EntryType.Website]:function(t){return[...s(t),n.createFieldDescriptor(t,"URL",i.EntryPropertyType.Property,"url")]}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.valuesDiffer=e.propertiesDiffer=e.historiesDiffer=void 0;const n=r(19);function i(t){return JSON.parse(t[0])}function o(t,e){const r=[...new Set([...Object.keys(t),...Object.keys(e)])];return 0!==r.length&&r.some(r=>s(t[r],e[r]))}function s(t,e){for(const r of["value","created","updated"])if(t[r]!==e[r])return!0;if(t.history.length!==e.history.length)return!0;if(0===t.history.length)return!1;const r=n.sortValueHistory([...t.history]),i=n.sortValueHistory([...e.history]);for(const t in r)if(r[t].value!==i[t].value||r[t].updated!==i[t].updated)return!0;return!1}e.historiesDiffer=function(t,e){const r=i(t),n=i(e);return r.e.length!==n.e.length||r.g.length!==n.g.length||!!o(r.a,n.a)||[[r,n],[n,r]].some(([t,e])=>!!(t.e.some(t=>{const r=e.e.find(e=>e.id===t.id);return!r||t.g!==r.g||o(t.p,r.p)||o(t.a,r.a)})&&t.e.length>0)||!!(t.g.some(t=>{const r=e.g.find(e=>e.id===t.id);return!r||t.g!==r.g||t.t!==r.t||o(t.a,r.a)})&&t.g.length>0))},e.propertiesDiffer=o,e.valuesDiffer=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeRawVaults=void 0;const n=r(19),i=r(1);function o(t){return{id:t.id,p:Object.assign({},t.p),a:Object.assign({},t.a),g:t.g}}function s(t){return{id:t.id,t:t.t,g:t.g,a:Object.assign({},t.a)}}function a(t,e,r){return[...new Set([...Object.keys(t),...Object.keys(e)])].reduce((i,o)=>(t[o]&&!e[o]||!t[o]&&e[o]?i[o]=n.cloneValue(t[o]||e[o]):i[o]=n.mergeValues(t[o],e[o],r),i),{})}e.mergeRawVaults=function(t,e){const r={id:t.id,a:a(t.a,e.a,i.EntryPropertyType.Attribute),g:[],e:[],c:t.c},n=t.g.filter(t=>!e.g.find(e=>e.id===t.id)),u=e.g.filter(e=>!t.g.find(t=>t.id===e.id));[...n,...u].forEach(t=>{r.g.push(s(t))}),t.g.forEach(t=>{if(n.indexOf(t)>=0)return;const o=e.g.find(e=>e.id===t.id),u=s(o);u.a=a(t.a,o.a,i.EntryPropertyType.Attribute),r.g.push(u)});const c=t.e.filter(t=>!e.e.find(e=>e.id===t.id)),l=e.e.filter(e=>!t.e.find(t=>t.id===e.id));return[...c,...l].forEach(t=>{r.e.push(o(t))}),t.e.forEach(t=>{if(c.indexOf(t)>=0)return;const n=e.e.find(e=>e.id===t.id),s=o(n);s.p=a(t.p,n.p,i.EntryPropertyType.Property),s.a=a(t.a,n.a,i.EntryPropertyType.Attribute),r.e.push(s)}),r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.valuesObjectToKeyValueObject=e.isFormatBGroup=e.isFormatBEntry=e.convertFormatAVault=e.convertFormatAGroup=e.convertFormatAEntry=void 0;const n=r(19),i=r(28),o=r(17);function s(t){return{id:t.id,a:u(t.attributes||{}),p:u(t.properties||{}),g:t.parentID}}function a(t){return{id:t.id,a:u(t.attributes||{}),t:t.title,g:t.parentID}}function u(t){return Object.keys(t).reduce((e,r)=>Object.assign(e,{[r]:n.newRawValue(t[r])}),{})}e.convertFormatAEntry=s,e.convertFormatAGroup=a,e.convertFormatAVault=function(t){return{id:t.id,a:u(t.attributes||{}),g:o.getAllGroups(t).map(t=>a(t)),e:o.getAllEntries(t).map(t=>s(t)),c:i.getDateString()}},e.isFormatBEntry=function(t){return void 0!==t.g},e.isFormatBGroup=function(t){return void 0!==t.g},e.valuesObjectToKeyValueObject=function(t){return Object.keys(t).reduce((e,r)=>t[r].deleted?e:Object.assign(e,{[r]:t[r].value}),{})}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(20));class o extends i.default{constructor(){super(...arguments),this._storage=window.localStorage}get storage(){return this._storage}getAllKeys(){return Promise.resolve(Object.keys(this.storage))}getValue(t){const e=this.storage.getItem(t);return Promise.resolve(e)}removeKey(t){return this.storage.removeItem(t),Promise.resolve()}setValue(t,e){return this.storage.setItem(t,e),Promise.resolve()}}e.default=o},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0});var o=r(114);Object.defineProperty(e,"VaultManager",{enumerable:!0,get:function(){return o.default}});var s=r(60);Object.defineProperty(e,"VaultSource",{enumerable:!0,get:function(){return s.default}});var a=r(8);Object.defineProperty(e,"Vault",{enumerable:!0,get:function(){return a.default}});var u=r(47);Object.defineProperty(e,"Group",{enumerable:!0,get:function(){return u.default}});var c=r(11);Object.defineProperty(e,"Entry",{enumerable:!0,get:function(){return c.default}});var l=r(61);Object.defineProperty(e,"AttachmentManager",{enumerable:!0,get:function(){return l.default}});var h=r(16);Object.defineProperty(e,"detectFormat",{enumerable:!0,get:function(){return h.detectFormat}}),Object.defineProperty(e,"getDefaultFormat",{enumerable:!0,get:function(){return h.getDefaultFormat}}),Object.defineProperty(e,"setDefaultFormat",{enumerable:!0,get:function(){return h.setDefaultFormat}});var d=r(24);Object.defineProperty(e,"VaultFormatA",{enumerable:!0,get:function(){return d.default}});var f=r(52);Object.defineProperty(e,"VaultFormatB",{enumerable:!0,get:function(){return f.default}});var p=r(7);Object.defineProperty(e,"TextDatasource",{enumerable:!0,get:function(){return p.default}});var g=r(120);Object.defineProperty(e,"MemoryDatasource",{enumerable:!0,get:function(){return g.default}});var y=r(121);Object.defineProperty(e,"FileDatasource",{enumerable:!0,get:function(){return y.default}});var m=r(123);Object.defineProperty(e,"WebDAVDatasource",{enumerable:!0,get:function(){return m.default}});var v=r(124);Object.defineProperty(e,"DropboxDatasource",{enumerable:!0,get:function(){return v.default}});var _=r(142);Object.defineProperty(e,"GoogleDriveDatasource",{enumerable:!0,get:function(){return _.default}});var b=r(149);Object.defineProperty(e,"MyButtercupDatasource",{enumerable:!0,get:function(){return b.default}});var w=r(69);Object.defineProperty(e,"MyButtercupClient",{enumerable:!0,get:function(){return w.default}});var E=r(68);Object.defineProperty(e,"DatasourceAuthManager",{enumerable:!0,get:function(){return E.default}});var A=r(2);Object.defineProperty(e,"registerDatasource",{enumerable:!0,get:function(){return A.registerDatasource}});var x=r(26);Object.defineProperty(e,"consumeGroupFacade",{enumerable:!0,get:function(){return x.consumeGroupFacade}}),Object.defineProperty(e,"consumeVaultFacade",{enumerable:!0,get:function(){return x.consumeVaultFacade}}),Object.defineProperty(e,"createGroupFacade",{enumerable:!0,get:function(){return x.createGroupFacade}}),Object.defineProperty(e,"createVaultFacade",{enumerable:!0,get:function(){return x.createVaultFacade}});var S=r(154);Object.defineProperty(e,"isOTPURI",{enumerable:!0,get:function(){return S.isOTPURI}}),Object.defineProperty(e,"isVaultFacade",{enumerable:!0,get:function(){return S.isVaultFacade}});var T=r(27);Object.defineProperty(e,"consumeEntryFacade",{enumerable:!0,get:function(){return T.consumeEntryFacade}}),Object.defineProperty(e,"createEntryFacade",{enumerable:!0,get:function(){return T.createEntryFacade}}),Object.defineProperty(e,"fieldsToProperties",{enumerable:!0,get:function(){return T.fieldsToProperties}});var P=r(18);Object.defineProperty(e,"createFieldDescriptor",{enumerable:!0,get:function(){return P.createFieldDescriptor}});var O=r(50);Object.defineProperty(e,"DEFAULT_ENTRY_TYPE",{enumerable:!0,get:function(){return O.DEFAULT_ENTRY_TYPE}}),Object.defineProperty(e,"DEFAULT_FIELD_TYPE",{enumerable:!0,get:function(){return O.DEFAULT_FIELD_TYPE}}),Object.defineProperty(e,"ENTRY_TYPES",{enumerable:!0,get:function(){return O.ENTRY_TYPES}}),Object.defineProperty(e,"FIELD_VALUE_TYPES",{enumerable:!0,get:function(){return O.FIELD_VALUE_TYPES}});var C=r(12);Object.defineProperty(e,"Credentials",{enumerable:!0,get:function(){return C.default}});var I=r(20);Object.defineProperty(e,"StorageInterface",{enumerable:!0,get:function(){return I.default}});var k=r(59);Object.defineProperty(e,"MemoryStorageInterface",{enumerable:!0,get:function(){return k.default}});var D=r(155);Object.defineProperty(e,"Search",{enumerable:!0,get:function(){return D.default}});var j=r(6);Object.defineProperty(e,"getSharedAppEnv",{enumerable:!0,get:function(){return j.getSharedAppEnv}});var F=r(4);Object.defineProperty(e,"generateUUID",{enumerable:!0,get:function(){return F.generateUUID}});var R=r(25);Object.defineProperty(e,"EntryURLType",{enumerable:!0,get:function(){return R.EntryURLType}}),Object.defineProperty(e,"getEntryURLs",{enumerable:!0,get:function(){return R.getEntryURLs}}),i(r(1),e)},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(r(9)),s=r(10),a=i(r(115)),u=i(r(56)),c=i(r(59)),l=i(r(60)),h=15e4,d=()=>{},f=/^bcup_vaultmgr_[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;let p=(()=>{class t extends o.default{constructor(t={}){super(),this._autoUpdateTimer=null,this._initialised=!1,this._queue=new u.default,this._sources=[];const{autoUpdate:e=!0,autoUpdateDelay:r=h,cacheStorage:n=new c.default,sourceStorage:i=new c.default}=t;this._cacheStorage=n,this._sourceStorage=i,this._autoUpdateEnabled=e,this._autoUpdateDelay=r}get sources(){return[...this._sources]}get unlockedSources(){return this._sources.filter(t=>t.status===l.default.STATUS_UNLOCKED)}addSource(t,e={}){return n(this,void 0,void 0,(function*(){const{order:r}=e;this._sources.find(e=>e.id===t.id)||(yield this.enqueueStateChange(()=>n(this,void 0,void 0,(function*(){t._vaultManager=this;const e="number"==typeof r?r:this.getNextOrder();this._sources.push(t),t.order=e,t.on("updated",()=>this.dehydrateSource(t)),t.on("updated",()=>this.emit("sourcesUpdated")),t.on("locked",()=>this.emit("sourcesUpdated")),t.on("unlocked",()=>this.emit("sourcesUpdated"));const n=yield t.dehydrate();yield this._storeDehydratedSource(t.id,n),this.emit("sourcesUpdated")}))))}))}dehydrate(){return n(this,void 0,void 0,(function*(){yield this.enqueueStateChange(()=>Promise.all(this._sources.map(t=>this.dehydrateSource(t))))}))}dehydrateSource(t){return n(this,void 0,void 0,(function*(){const e="string"==typeof t?this.getSourceForID(t):t,r=yield e.dehydrate();yield this._storeDehydratedSource(e.id,r)}))}enqueueStateChange(t){return this._queue.channel("state").enqueue(t)}getNextOrder(){return Math.max(...this._sources.map(t=>t._order),-1)+1}getSourceForID(t){return this._sources.find(e=>e.id&&e.id===t)||null}getUpdateableSources(){return this._sources.filter(t=>t.canBeUpdated())}initialise(){this._initialised||(this._startAutoUpdateTimer(),this._initialised=!0)}interruptAutoUpdate(t){return this.enqueueStateChange(d).then(()=>this._queue.channel("autoUpdateInterrupt").enqueue(()=>{const e=this._autoUpdateEnabled,r=this._autoUpdateDelay;this.toggleAutoUpdating(!1);const n=()=>{this.toggleAutoUpdating(e,r)};let i;try{i=t()}catch(t){throw n(),t}return a.default(i)?i.then(t=>(n(),t)).catch(t=>{throw n(),t}):(n(),i)}))}rehydrate(){return n(this,void 0,void 0,(function*(){yield this._migrateLegacyVaults();const t=yield this._sourceStorage.getAllKeys();yield Promise.all(t.filter(t=>f.test(t)).map(t=>n(this,void 0,void 0,(function*(){const e=yield this._sourceStorage.getValue(t),r=l.default.rehydrate(e);yield this.addSource(r,{order:r.order})})))),this.reorderSources(),this.emit("sourcesUpdated")}))}removeSource(t){return n(this,void 0,void 0,(function*(){yield this.enqueueStateChange(()=>n(this,void 0,void 0,(function*(){const e=this._sources.findIndex(e=>e.id===t);if(-1===e)throw new s.Layerr("Failed removing source: No source found for ID: "+t);this.sources[e].removeAllListeners(),this._sources.splice(e,1),this.emit("sourcesUpdated"),yield this._sourceStorage.removeKey("bcup_vaultmgr_"+t)})))}))}reorderSource(t,e){return n(this,void 0,void 0,(function*(){const r=this.getSourceForID(t);if(!r)throw new s.Layerr("Failed reordering source: No source found for ID: "+t);if(e===r._order)return;const n=r._order;r._order=e;const i=e<n;this.sources.forEach(r=>{r.id!==t&&(i&&r._order>=e?r._order+=1:!i&&r._order<=e&&(r._order-=1))}),this.reorderSources(),yield this.dehydrateSource(r)}))}reorderSources(){this._sources.sort((t,e)=>t._order>e._order?1:e._order>t._order?-1:0),this._sources.forEach((t,e)=>{t._order=e}),this.emit("sourcesUpdated")}toggleAutoUpdating(t=!this._autoUpdateEnabled,e=h){t?(this._autoUpdateDelay=e,this._startAutoUpdateTimer()):(this._autoUpdateDelay=null,clearTimeout(this._autoUpdateTimer),this._autoUpdateTimer=null)}_autoUpdateSources(){return this.emit("autoUpdateStart"),this.enqueueStateChange(()=>n(this,void 0,void 0,(function*(){const t=this.getUpdateableSources();t.length<=0||(yield Promise.all(t.map(t=>t.update().catch(e=>{console.error("Failed auto-updating source: "+t.id),this.emit("autoUpdateFailed",{source:t})}))),this.emit("autoUpdateStop"))})))}_migrateLegacyVaults(){return n(this,void 0,void 0,(function*(){const t=yield this._sourceStorage.getAllKeys();yield Promise.all(t.filter(t=>t&&0===t.indexOf("bcup_archivemgr_")).map(t=>n(this,void 0,void 0,(function*(){const e=yield this._sourceStorage.getValue(t);if(!e)return;const r=t.replace("bcup_archivemgr_","bcup_vaultmgr_");yield this._sourceStorage.setValue(r,e),yield this._sourceStorage.removeKey(t)}))))}))}_startAutoUpdateTimer(){clearTimeout(this._autoUpdateTimer),this._autoUpdateTimer=setTimeout(()=>{this._autoUpdateSources().then(()=>{this._autoUpdateEnabled&&this._startAutoUpdateTimer()})},this._autoUpdateDelay)}_storeDehydratedSource(t,e){return this._sourceStorage.setValue("bcup_vaultmgr_"+t,e)}}return t.STORAGE_KEY_PREFIX="bcup_vaultmgr_",t})();e.default=p},function(t,e){function r(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}t.exports=r,t.exports.default=r},function(t,e,r){const n=r(57),i=r(29),o=r(117);t.exports=class extends n{constructor(){super(),this._channels={}}get channels(){return this._channels}createChannel(t){if(this.channelExists(t))throw new Error("Cannot create channel: channel already exists: "+t);return this.channels[t]=new i(t),this.channels[t]}createParallelChannel(t,e){if(this.channelExists(t))throw new Error("Cannot create channel: channel already exists: "+t);const r=this.channels[t]=new o(t);return e&&(r.parallelism=e),r}channel(t){return!0!==this.channelExists(t)?this.createChannel(t):this.channels[t]}channelExists(t){return this.channels.hasOwnProperty(t)}}},function(t,e,r){const n=r(29);t.exports=class extends n{constructor(...t){super(...t),this._parallelism=2,this._runningTasks=[],this.canRunAcrossTaskTypes=!1}get isEmpty(){return super.isEmpty&&this._runningTasks.length<=0}get parallelism(){return this._parallelism}get runningTasks(){return this._runningTasks}set parallelism(t){const e=Math.max(t,1);this._parallelism=e}_runNextItem(){const t=()=>{this.isRunning=!1,this.emit("stopped")};let e=this.parallelism-this.runningTasks.length;if(!(e<=0))if(0!==this.runningTasks.length||0!==this.tasks.length)for(;e>0;){if(!this.canRunAcrossTaskTypes&&this.runningTasks.length>0&&this.tasks.length>0&&this.runningTasks[0].type!==this.tasks[0].type)return;e-=1;const r=this.retrieveNextItem();if(!r)return void t();this.runningTasks.push(r),r.execute().then(()=>{this.runningTasks.splice(this.runningTasks.indexOf(r),1),this._runNextItem()})}else t()}}},function(t,e,r){"use strict";function n(t,e){const r="bcup_archivecache_"+e;return t.getValue(r)}Object.defineProperty(e,"__esModule",{value:!0}),e.storeSourceOfflineCopy=e.sourceHasOfflineCopy=e.getSourceOfflineArchive=void 0,e.getSourceOfflineArchive=n,e.sourceHasOfflineCopy=function(t,e){return n(t,e).then(t=>!!t&&t.length>0)},e.storeSourceOfflineCopy=function(t,e,r){const n="bcup_archivecache_"+e;return t.setValue(n,r)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateVaultInsights=void 0;const n=/[0-9]+/,i=/[a-z]+/,o=/[^0-9a-zA-Z`~!@#$%^&*()=+\[\]{};:'",.<>\/?|\\_£€-]+/,s=/[`~!@#$%^&*()=+\[\]{};:'",.<>\/?|\\_£€-]+/,a=/[A-Z]+/;e.generateVaultInsights=function(t){let e=0,r=0,u=0,c=0,l=null,h=null,d=0;const f={},p=new Set,g=[],y=t=>{const u=t.getEntries();e+=1,r+=u.length,u.forEach(t=>{const e=t.getProperty("password");"string"==typeof e&&(g.push(e.length),(null===l||e.length>l)&&(l=e.length),(null===h||e.length<h)&&(h=e.length));const r=t.getProperty("username");["login","website"].includes(t.getType())&&(r&&p.add(r),e&&(f[e]=(f[e]||0)+1,function(t){return!t||t.length<10||!([n,i,o,s,a].filter(e=>e.test(t)).length>=3)}(e)&&(d+=1)))}),t.getGroups().forEach(t=>y(t))};t.getGroups().forEach(t=>y(t));const m=g.reduce((t,e)=>t+e,0)/g.length,v=t.getTrashGroup();if(v){const t=e=>{const r=e.getGroups();c+=r.length,r.forEach(e=>t(e)),u+=e.getEntries().length};t(v)}const _=Object.keys(f).reduce((t,e)=>t+(f[e]>1?f[e]:0),0);return{avgPassLen:m,entries:r,groups:e,longPassLen:l,shortPassLen:h,trashEntries:u,trashGroups:c,usernames:p.size,duplicatePasswords:_,weakPasswords:d}}},function(t,e,r){"use strict";(function(t){var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(r(7)),s=r(2),a=r(0);class u extends o.default{constructor(e){super(e);const{data:r}=a.getCredentials(e.id),{datasource:n}=r,{property:i}=n;this._property=i,this._store=t[i]=t[i]||{},this.type="memory",s.fireInstantiationHandlers("memory",this)}_ensureAttachmentsPaths(t){return n(this,void 0,void 0,(function*(){this._store.attachments=this._store.attachments||{},this._store.attachments[t]=this._store.attachments[t]||{}}))}getAttachment(t,e){return this._ensureAttachmentsPaths(t).then(()=>{if(!this._store.attachments[t][e])throw new Error("No attachment found for ID: "+e);return this._store.attachments[t][e]})}load(t){const e=Object.create(null,{load:{get:()=>super.load}});return n(this,void 0,void 0,(function*(){if(!this._store.vault)throw new Error("No vault in memory");return this.setContent(this._store.vault),e.load.call(this,t)}))}putAttachment(t,e,r,n){return this._ensureAttachmentsPaths(t).then(()=>{this._store.attachments[t][e]=r})}removeAttachment(t,e){return this._ensureAttachmentsPaths(t).then(()=>{this._store.attachments[t][e]=null,delete this._store.attachments[t][e]})}save(t,e){return super.save(t,e).then(t=>(this._store.vault=t,t))}supportsAttachments(){return!0}}e.default=u,s.registerDatasource("memory",u)}).call(this,r(21))},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(r(63)),s=i(r(63)),a=i(r(122)),u=i(r(7)),c=r(2),l=r(0),h=r(62);class d extends u.default{constructor(t){super(t);const{data:e}=l.getCredentials(t.id),{datasource:r}=e,{path:n}=r;this._filename=n,this.mkdir=a.default(o.default.mkdir),this.readFile=a.default(o.default.readFile),this.stat=a.default(o.default.stat),this.unlink=a.default(o.default.unlink),this.writeFile=a.default(o.default.writeFile),this.type="file",c.fireInstantiationHandlers("file",this)}get baseDir(){return s.default.dirname(this.path)}get path(){return this._filename}_ensureAttachmentsPaths(t){return n(this,void 0,void 0,(function*(){const e=s.default.join(this.baseDir,".buttercup",t);yield this.mkdir(e,{recursive:!0})}))}getAttachment(t,e){return n(this,void 0,void 0,(function*(){yield this._ensureAttachmentsPaths(t);const r=s.default.join(this.baseDir,".buttercup",t,`${e}.${h.ATTACHMENT_EXT}`);return this.readFile(r)}))}load(t){return this.hasContent?super.load(t):this.readFile(this.path,"utf8").then(e=>(this.setContent(e),super.load(t)))}putAttachment(t,e,r,i){return n(this,void 0,void 0,(function*(){yield this._ensureAttachmentsPaths(t);const n=s.default.join(this.baseDir,".buttercup",t,`${e}.${h.ATTACHMENT_EXT}`);yield this.writeFile(n,r)}))}removeAttachment(t,e){return n(this,void 0,void 0,(function*(){yield this._ensureAttachmentsPaths(t);const r=s.default.join(this.baseDir,".buttercup",t,`${e}.${h.ATTACHMENT_EXT}`);yield this.unlink(r)}))}save(t,e){return super.save(t,e).then(t=>this.writeFile(this.path,t))}supportsAttachments(){return!0}supportsRemoteBypass(){return!0}}e.default=d,c.registerDatasource("file",d)},function(t,e,r){"use strict";const n=(t,e,r,n)=>function(...i){return new(0,e.promiseModule)((o,s)=>{e.multiArgs?i.push((...t)=>{e.errorFirst?t[0]?s(t):(t.shift(),o(t)):o(t)}):e.errorFirst?i.push((t,e)=>{t?s(t):o(e)}):i.push(o);const a=this===r?n:this;Reflect.apply(t,a,i)})},i=new WeakMap;t.exports=(t,e)=>{e={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...e};const r=typeof t;if(null===t||"object"!==r&&"function"!==r)throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${null===t?"null":r}\``);const o=new WeakMap,s=new Proxy(t,{apply(t,r,i){const a=o.get(t);if(a)return Reflect.apply(a,r,i);const u=e.excludeMain?t:n(t,e,s,t);return o.set(t,u),Reflect.apply(u,r,i)},get(t,r){const a=t[r];if(!((t,r)=>{let n=i.get(t);if(n||(n={},i.set(t,n)),r in n)return n[r];const o=t=>"string"==typeof t||"symbol"==typeof r?r===t:t.test(r),s=Reflect.getOwnPropertyDescriptor(t,r),a=void 0===s||s.writable||s.configurable,u=(e.include?e.include.some(o):!e.exclude.some(o))&&a;return n[r]=u,u})(t,r)||a===Function.prototype[r])return a;const u=o.get(a);if(u)return u;if("function"==typeof a){const r=n(a,e,s,t);return o.set(a,r),r}return a}});return s}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(7)),o=r(2),s=r(6),a=r(0);class u extends i.default{constructor(t){super(t);const{data:e}=a.getCredentials(t.id),{datasource:r}=e,{endpoint:n,password:i,path:u,username:c}=r;this._path=u;const l=s.getSharedAppEnv().getProperty("net/webdav/v1/newClient");this._client="string"==typeof c&&"string"==typeof i?l(n,{username:c,password:i}):l(n),this.type="webdav",o.fireInstantiationHandlers("webdav",this)}get client(){return this._client}get path(){return this._path}load(t){return this.hasContent?super.load(t):this.client.getFileContents(this.path,{format:"text"}).then(e=>(this.setContent(e),super.load(t)))}save(t,e){return super.save(t,e).then(t=>this.client.putFileContents(this.path,t))}supportsRemoteBypass(){return!0}}e.default=u,o.registerDatasource("webdav",u)},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(125),o=n(r(7)),s=r(2),a=r(0);class u extends o.default{constructor(t){super(t);const{data:e}=a.getCredentials(t.id),{datasource:r}=e,{token:n,path:o}=r;this.path=o,this.token=n,this.client=i.createClient(n),this.type="dropbox",s.fireInstantiationHandlers("dropbox",this)}load(t){return this.hasContent?super.load(t):this.client.getFileContents(this.path).then(e=>(this.setContent(e),super.load(t)))}save(t,e){return super.save(t,e).then(t=>this.client.putFileContents(this.path,t))}supportsRemoteBypass(){return!0}}e.default=u,s.registerDatasource("dropbox",u)},function(t,e,r){const n=r(64),{request:i}=r(30),{deleteFile:o,getDirectoryContents:s,getFileContents:a,putFileContents:u}=r(139),{createFsInterface:c}=r(141);t.exports={createClient:function(t){const e=new n;return e.patch("request",i),{request:i,patcher:e,deleteFile:r=>o(r,t,e),getDirectoryContents:r=>s(r,t,e),getFileContents:r=>a(r,t,e),putFileContents:(r,n)=>u(r,n,t,e)}},createFsInterface:c}},function(t,e){t.exports={sequence:function(...t){if(0===t.length)throw new Error("Failed creating sequence: No functions provided");return function(...e){let r=e;const n=this;for(;t.length>0;)r=[t.shift().apply(n,r)];return r[0]}}}},function(t,e,r){const n=r(128),i=r(129),o=r(65).default,{createNewRequest:s}=(r(133),r(134)),{parseHeaders:a}=r(136),{ERR_ABORTED:u,ERR_REQUEST_FAILED:c,ERR_STATUS_INVALID:l}=r(66),{STATUSES:h}=r(138),d=/^application\/octet/,f=/^application\/json/,p={body:null,factory:s,headers:{},method:"GET",query:null,responseType:"auto",url:null},g=/application\/json/;function y(t){return!(!t||"object"!=typeof t||""+t!="[object FormData]")}function m(t){return t>=200&&t<400}t.exports={request:function(t){const e="string"==typeof t?{url:t}:t,r=Object.assign({},p,"object"==typeof e?e:{}),{body:s,factory:v,headers:_,method:b,nodeJsOptions:w=null,query:E,responseType:A,url:x,validateStatus:S=m,withCredentials:T}=r,P=function(t,e){if(e){const r=i.stringify(e);return r?`${t}?${r}`:t}return t}(x,E),O={},C=n(O);Object.keys(_).forEach(t=>{C.set(t,_[t])}),function(t,e){const{body:r}=t;!r||"object"!=typeof r||y(r)||e.get("content-type")||e.set("Content-Type","application/json")}(r,C);const I=v();return I.nodejsSet&&w&&"object"==typeof w&&I.nodejsSet(w),new Promise((function(t,e){const i=(t=c)=>{const r=I.response&&!g.test(I.getResponseHeader("Content-Type"))?`Request failed: ${I.status} ${I.statusText}: ${I.response}`:`Request failed: ${I.status} ${I.statusText}`,n=new Error(r);n.status=I.status,n.statusText=I.statusText,n.code=t,n.responseHeaders=a(I.getAllResponseHeaders()),n.responseBody=I.response,e(n)};I.addEventListener("load",()=>{if(!S(I.status))return i(l);var e,o;t((e=I,o=r,Promise.resolve().then(()=>{const t=a(e.getAllResponseHeaders()),r=n(t);if("auto"===o.responseType){const n=r.get("content-type");return d.test(n)?[e.response,t]:f.test(n)?[e.response&&"object"==typeof e.response?e.response:JSON.parse(e.responseText),t]:[e.responseText||e.response,t]}return[e.response,t]}).then(([t,r])=>({url:e.responseURL,method:o.method,headers:r,data:t,status:e.status,statusText:h[e.status]}))))}),I.addEventListener("error",()=>{i()}),I.addEventListener("abort",()=>{const t=new Error("Request failed: The request was aborted");t.status="",t.statusCode=0,t.code=u,e(t)}),I.open(b,P),"boolean"==typeof T&&(I.withCredentials=T),Object.keys(O).forEach(t=>{I.setRequestHeader(t,O[t])}),A&&("buffer"===A.toLowerCase()&&o?I.responseType="arraybuffer":I.responseType=A),null!==s?I.send(function(t,e){return"string"==typeof t?t:f.test(e.get("content-type"))?JSON.stringify(t||{}):!t||"object"!=typeof t||y(t)||e.get("content-type")?t:JSON.stringify(t)}(s,C)):I.send()}))}}},function(t,e){function r(t){this.dict=t||{}}r.prototype.set=function(t,e,r){if("object"!=typeof t){void 0===r&&(r=!0);var n=this.has(t);return!r&&n?this.dict[n]=this.dict[n]+","+e:this.dict[n||t]=e,n}for(var i in t)this.set(i,t[i],e)},r.prototype.has=function(t){for(var e=Object.keys(this.dict),r=(t=t.toLowerCase(),0);r<e.length;r++)if(e[r].toLowerCase()===t)return e[r];return!1},r.prototype.get=function(t){var e,r;t=t.toLowerCase();var n=this.dict;return Object.keys(n).forEach((function(i){r=i.toLowerCase(),t===r&&(e=n[i])})),e},r.prototype.swap=function(t){var e=this.has(t);if(e!==t){if(!e)throw new Error('There is no header than matches "'+t+'"');this.dict[t]=this.dict[e],delete this.dict[e]}},r.prototype.del=function(t){var e=this.has(t);return delete this.dict[e||t]},t.exports=function(t){return new r(t)},t.exports.httpify=function(t,e){var n=new r(e);return t.setHeader=function(t,e,r){if(void 0!==e)return n.set(t,e,r)},t.hasHeader=function(t){return n.has(t)},t.getHeader=function(t){return n.get(t)},t.removeHeader=function(t){return n.del(t)},t.headers=n.dict,n}},function(t,e,r){"use strict";const n=r(130),i=r(131),o=r(132);function s(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function a(t,e){return e.encode?e.strict?n(t):encodeURIComponent(t):t}function u(t,e){return e.decode?i(t):t}function c(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function l(t){const e=(t=c(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function h(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function d(t,e){s((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const r=function(t){let e;switch(t.arrayFormat){case"index":return(t,r,n)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=r):n[t]=r};case"bracket":return(t,r,n)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],r):n[t]=[r]:n[t]=r};case"comma":case"separator":return(e,r,n)=>{const i="string"==typeof r&&r.split("").indexOf(t.arrayFormatSeparator)>-1?r.split(t.arrayFormatSeparator).map(e=>u(e,t)):null===r?r:u(r,t);n[e]=i};default:return(t,e,r)=>{void 0!==r[t]?r[t]=[].concat(r[t],e):r[t]=e}}}(e),n=Object.create(null);if("string"!=typeof t)return n;if(!(t=t.trim().replace(/^[?#&]/,"")))return n;for(const i of t.split("&")){let[t,s]=o(e.decode?i.replace(/\+/g," "):i,"=");s=void 0===s?null:["comma","separator"].includes(e.arrayFormat)?s:u(s,e),r(u(t,e),s,n)}for(const t of Object.keys(n)){const r=n[t];if("object"==typeof r&&null!==r)for(const t of Object.keys(r))r[t]=h(r[t],e);else n[t]=h(r,e)}return!1===e.sort?n:(!0===e.sort?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((t,e)=>{const r=n[e];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort((t,e)=>Number(t)-Number(e)).map(t=>e[t]):e}(r):t[e]=r,t},Object.create(null))}e.extract=l,e.parse=d,e.stringify=(t,e)=>{if(!t)return"";s((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);const r=r=>e.skipNull&&null==t[r]||e.skipEmptyString&&""===t[r],n=function(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{const i=r.length;return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,[a(e,t),"[",i,"]"].join("")]:[...r,[a(e,t),"[",a(i,t),"]=",a(n,t)].join("")]};case"bracket":return e=>(r,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,[a(e,t),"[]"].join("")]:[...r,[a(e,t),"[]=",a(n,t)].join("")];case"comma":case"separator":return e=>(r,n)=>null==n||0===n.length?r:0===r.length?[[a(e,t),"=",a(n,t)].join("")]:[[r,a(n,t)].join(t.arrayFormatSeparator)];default:return e=>(r,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,a(e,t)]:[...r,[a(e,t),"=",a(n,t)].join("")]}}(e),i={};for(const e of Object.keys(t))r(e)||(i[e]=t[e]);const o=Object.keys(i);return!1!==e.sort&&o.sort(e.sort),o.map(r=>{const i=t[r];return void 0===i?"":null===i?a(r,e):Array.isArray(i)?i.reduce(n(r),[]).join("&"):a(r,e)+"="+a(i,e)}).filter(t=>t.length>0).join("&")},e.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);const[r,n]=o(t,"#");return Object.assign({url:r.split("?")[0]||"",query:d(l(t),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:u(n,e)}:{})},e.stringifyUrl=(t,r)=>{r=Object.assign({encode:!0,strict:!0},r);const n=c(t.url).split("?")[0]||"",i=e.extract(t.url),o=e.parse(i,{sort:!1}),s=Object.assign(o,t.query);let u=e.stringify(s,r);u&&(u="?"+u);let l=function(t){let e="";const r=t.indexOf("#");return-1!==r&&(e=t.slice(r)),e}(t.url);return t.fragmentIdentifier&&(l="#"+a(t.fragmentIdentifier,r)),`${n}${u}${l}`}},function(t,e,r){"use strict";t.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,t=>"%"+t.charCodeAt(0).toString(16).toUpperCase())},function(t,e,r){"use strict";var n=new RegExp("%[a-f0-9]{2}","gi"),i=new RegExp("(%[a-f0-9]{2})+","gi");function o(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],o(r),o(n))}function s(t){try{return decodeURIComponent(t)}catch(i){for(var e=t.match(n),r=1;r<e.length;r++)e=(t=o(e,r).join("")).match(n);return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=i.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch(t){var n=s(r[0]);n!==r[0]&&(e[r[0]]=n)}r=i.exec(t)}e["%C2"]="�";for(var o=Object.keys(e),a=0;a<o.length;a++){var u=o[a];t=t.replace(new RegExp(u,"g"),e[u])}return t}(t)}}},function(t,e,r){"use strict";t.exports=(t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const r=t.indexOf(e);return-1===r?[t]:[t.slice(0,r),t.slice(r+e.length)]}},function(t,e,r){"use strict";
/*!
     * isArrayBuffer v1.0.1
     * https://github.com/fengyuanchen/is-array-buffer
     *
     * Copyright (c) 2015-2018 Chen Fengyuan
     * Released under the MIT license
     *
     * Date: 2018-04-01T07:19:08.136Z
     */var n="function"==typeof ArrayBuffer,i=Object.prototype.toString;t.exports=function(t){return n&&(t instanceof ArrayBuffer||"[object ArrayBuffer]"===i.call(t))}},function(t,e,r){const n=r(65).default;t.exports={createNewRequest:function(){return n?new XMLHttpRequest:new(r(135))}}},function(t,e){t.exports=XMLHttpRequest},function(t,e,r){const{parse:n}=r(137);t.exports={parseHeaders:function(t){const e=n(t);return r=e,Object.keys(r).reduce((t,e)=>Object.assign(t,{[e.toLowerCase()]:r[e]}),{});var r}}},function(t,e,r){"use strict";function n(t){for(var e={},r={},n=0;n<t.length;n+=2){var i=t[n],o=i.toLowerCase(),s=e[o],a=t[n+1];r.hasOwnProperty(s)?(i!==s&&(r[i]=r[s],delete r[s]),"string"==typeof r[i]?r[i]=[r[i],a]:r[i].push(a)):r[i]=a,e[o]=i}return r}Object.defineProperty(e,"__esModule",{value:!0}),e.parse=function(t){for(var e=[],r=t.replace(/\r?\n$/,"").split(/\r?\n/),i=0;i<r.length;i++){var o=r[i],s=o.indexOf(":"),a=o.substr(0,s).trim(),u=o.substr(s+1).trim();e.push(a,u)}return n(e)},e.http=function(t){if(t.rawHeaders)return n(t.rawHeaders);var e={};return Object.keys(t.headers).forEach((function(r){var n=t.headers[r];1===n.length?e[r]=n[0]:e[r]=n})),e},e.array=n},function(t,e){t.exports={STATUSES:{100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range not Satisfiable",417:"Expectation Failed",418:'I"m a teapot',421:"Misdirected Request",422:"Unprocessable Entity",426:"Locked",428:"Failed Dependency",423:"Upgrade Required",424:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"}}},function(t,e,r){const{convertDirectoryResult:n,urlSafeJSONStringify:i}=r(140);t.exports={deleteFile:function(t,e,r){const n={method:"POST",url:"https://api.dropboxapi.com/2/files/delete_v2",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:{path:t}};return r.execute("request",n).then(()=>{})},getDirectoryContents:function(t,e,r){const i={method:"POST",url:"https://api.dropboxapi.com/2/files/list_folder",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},body:{path:"/"===t?"":t,recursive:!1,limit:2e3,include_media_info:!1,include_deleted:!1,include_has_explicit_shared_members:!1,include_mounted_folders:!0}};return r.execute("request",i).then(t=>{const{entries:e}=t.data;return e.map(n)})},getFileContents:function(t,e,r){const n={method:"POST",url:"https://content.dropboxapi.com/2/files/download",headers:{Authorization:"Bearer "+e,"Content-Type":"text/plain","Dropbox-API-Arg":i({path:t})}};return r.execute("request",n).then(t=>t.data)},putFileContents:function(t,e,r,n){const i={method:"POST",url:"https://content.dropboxapi.com/2/files/upload",query:{arg:JSON.stringify({path:t,mode:"overwrite"}),authorization:"Bearer "+r,reject_cors_preflight:"true"},headers:{"Content-Type":"application/octet-stream"},body:e};return n.execute("request",i).then(()=>{})}}},function(t,e){t.exports={convertDirectoryResult:function(t){const e=t[".tag"];if(!0!==/^(file|folder)$/.test(e))throw new Error("Unrecognised item type: "+e);const r="folder"===e?"directory":"file";return{name:t.name,path:t.path_display,type:r,id:t.id,size:t.size||0}},urlSafeJSONStringify:function(t){return JSON.stringify(t).replace(/[\u007f-\uffff]/g,t=>"\\u"+("000"+t.charCodeAt(0).toString(16)).slice(-4))}}},function(t,e){t.exports={createFsInterface:function(t){return{readdir:(e,r={},n)=>{let i=n,o=r;"function"==typeof r&&(i=r,o={});const s=o.mode||"node";t.getDirectoryContents(e).then(t=>{if(!1===/^(node|stat)$/.test(s))throw new Error("Invalid mode: "+s);i(null,t.map(t=>"node"===s?t.name:Object.assign(t,{isFile:()=>"file"===t.type,isDirectory:()=>"directory"===t.type})))}).catch(i)},readFile:(e,r={},n)=>{let i=n;"function"==typeof r&&(i=r),t.getFileContents(e).then(t=>i(null,t)).catch(i)},writeFile:(e,r,n={},i)=>{let o=i;"function"==typeof n&&(o=n),t.putFileContents(e,r).then(()=>o()).catch(o)},unlink:(e,r)=>{t.deleteFile(e).then(r,r)}}}}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(143),o=r(10),s=n(r(68)),a=n(r(7)),u=r(2),c=r(0);class l extends a.default{constructor(t){super(t);const{data:e}=c.getCredentials(t.id),{datasource:r}=e,{token:n,refreshToken:o,fileID:a}=r;this.fileID=a,this.token=n,this.refreshToken=o,this.client=i.createClient(n),this.authManager=s.default.getSharedManager(),this.type="googledrive",u.fireInstantiationHandlers("googledrive",this)}load(t,e=!1){return this.hasContent?super.load(t):this.client.getFileContents(this.fileID).then(e=>(this.setContent(e),super.load(t))).catch(r=>{const{authFailure:n=!1}=o.Layerr.info(r);if(!n)throw new o.Layerr(r,"Failed fetching Google Drive vault");if(e)throw new o.Layerr(r,"Re-authentication failed");return this.authManager.executeAuthHandlers("googledrive",this).then(()=>this.load(t,!0)).catch(t=>{throw new o.Layerr(t,"Failed fetching Google Drive vault")})})}save(t,e,r=!1){return super.save(t,e).then(t=>this.client.putFileContents({id:this.fileID,contents:t})).catch(n=>{const{authFailure:i=!1}=o.Layerr.info(n);if(!i)throw new o.Layerr(n,"Failed saving Google Drive vault");if(r)throw new o.Layerr(n,"Re-authentication failed");return this.authManager.executeAuthHandlers("googledrive",this).then(()=>this.save(t,e,!0)).catch(t=>{throw new o.Layerr(t,"Failed saving Google Drive vault")})})}supportsRemoteBypass(){return!0}updateTokens(t,e){this.token=t,this.refreshToken=e,this.client=i.createClient(t);const{data:r}=c.getCredentials(this.credentials.id);r.datasource.token=t,r.datasource.refreshToken=e,this.emit("updated")}}e.default=l,u.registerDatasource("googledrive",l)},function(t,e,r){const n=r(64),{request:i}=r(30),{getDirectoryContents:o,mapDirectoryContents:s}=r(144),{deleteFile:a,getFileContents:u,putFileContents:c}=r(145);t.exports={createClient:function(t){const e=new n;e.patch("request",i);const r={request:i,patcher:e,deleteFile:r=>a(t,e,r),getDirectoryContents:({tree:r=!0}={})=>o(t,e,{formTree:r}),getFileContents:r=>u(t,e,r),mapDirectoryContents:n=>s(t,e,r,n),putFileContents:({id:r,name:n,parent:i,contents:o}={})=>c(t,e,{id:r,contents:o,name:n,parentID:i})};return r}}},function(t,e,r){const{handleError:n,handleResponse:i}=r(67);function o(t,e,{currentFiles:r=[],nextPageToken:i,formTree:s=!1}={}){const a={url:"https://www.googleapis.com/drive/v3/files",method:"GET",query:{corpora:"user",pageSize:1e3,spaces:"drive",fields:"files(id,name,mimeType,createdTime,modifiedTime,shared,size,parents,trashed),nextPageToken"},headers:{Authorization:"Bearer "+t}};return i&&(a.query.pageToken=i),e.execute("request",a).then(n=>{const i=n.data,a=[...r,...i.files.filter(t=>!t.trashed).map(t=>({id:t.id,filename:t.name,parents:[...t.parents||[]],mime:t.mimeType,type:"application/vnd.google-apps.folder"===t.mimeType?"directory":"file",created:t.createdTime,modified:t.modifiedTime,shared:t.shared,size:t.size?parseInt(t.size,10):0}))];return i.nextPageToken?o(t,e,{currentFiles:a,nextPageToken:i.nextPageToken,formTree:s}):s?function(t){const e=t.map(t=>t.id),r=[];t.forEach(t=>{t.parents.forEach(t=>{-1===e.indexOf(t)&&-1===r.indexOf(t)&&r.push(t)})});const n=e=>({id:e?e.id:null,filename:e?e.filename:null,files:e?t.filter(t=>"file"===t.type&&t.parents.indexOf(e.id)>=0):t.filter(t=>"file"===t.type&&(0===t.parents.length||t.parents.some(t=>r.indexOf(t)>=0))),children:(e?t.filter(t=>"directory"===t.type&&t.parents.indexOf(e.id)>=0):t.filter(t=>"directory"===t.type&&(0===t.parents.length||t.parents.some(t=>r.indexOf(t)>=0)))).map(t=>n(t,e?e.id:null))});return n()}(a):a}).catch(n)}t.exports={getDirectoryContents:o,mapDirectoryContents:function(t,e,r,n){let i;i=!r["@@dirresults"]||Date.now()-r["@@dirresults"].updated>1e4?o(t,e,{formTree:!1}).then(t=>(r["@@dirresults"]?Object.assign(r["@@dirresults"],{cachedContents:t,updated:Date.now()}):Object.defineProperty(r,"@@dirresults",{enumerable:!1,writable:!1,configurable:!1,value:{cachedContents:t,updated:Date.now()}}),t)):Promise.resolve(r["@@dirresults"].cachedContents);const s=(t,e,r=[])=>{const n=t.find(t=>t.id===e),[i]=n.parents,o=t.find(t=>t.id===i);return o?s(t,i,[o.filename,...r]):r};return i.then(t=>t.map(e=>Object.assign(e,{dirPath:"/"+s(t,e.id).join("/")})).filter(t=>{return e=t.dirPath,r=n,e.replace(/\/+$/,"")===r.replace(/\/+$/,"");var e,r}))}}},function(t,e,r){const{encode:n}=r(23),{handleError:i,handleResponse:o}=r(67),s="--",a="Content-Transfer-Encoding: base64",u="Content-Type: application/json; charset=UTF-8",c="Content-Type: text/plain; charset=UTF-8",l="\r\n";t.exports={deleteFile:function(t,e,r){const n={url:"https://www.googleapis.com/drive/v3/files/"+r,method:"DELETE",headers:{Authorization:"Bearer "+t}};return e.execute("request",n).then(()=>{}).catch(i)},getFileContents:function(t,e,r){const n={url:"https://www.googleapis.com/drive/v3/files/"+r,method:"GET",query:{alt:"media"},headers:{Authorization:"Bearer "+t}};return e.execute("request",n).then(t=>t.data).catch(i)},putFileContents:function(t,e,{parentID:r,id:o,contents:h="",name:d}={}){const f="BCUP_DRV_UPL_"+Math.floor(1e6*Math.random()),p=o?"https://www.googleapis.com/upload/drive/v3/files/"+o:"https://www.googleapis.com/upload/drive/v3/files",g=o?"PATCH":"POST",y={};r&&(y.parents=[r]),d&&(y.name=d);const m=JSON.stringify(y),v=[l,s,f,l,u,l,l].join(""),_=[l,s,f,l,c,l,a,l,l].join(""),b=[l,s,f,s,l].join(""),w=v.length+m.length+_.length+h.length+b.length,E=[];[v,m,_,n(h),b].forEach(t=>{for(let e=0;e<t.length;e+=1)E.push(255&t.charCodeAt(e))});const A=new Uint8Array(E).buffer,x={url:p,method:g,query:{uploadType:"multipart"},headers:{Authorization:"Bearer "+t,"Content-Type":"multipart/related; boundary="+f,"Content-Length":w.toString()},body:A};return e.execute("request",x).then(t=>t.data.id).catch(i)}}},function(t,e,r){!function(t){"use strict";var e={},n={};function i(t){function r(e,n,i){var o=t.resolve();return e.forEach((function(s,a){o=o.then((function(){var u;return(u=i?n.call(i,s,a,e):o=n(s,a,e))&&u.then||(u=t.resolve(u)),u.then((function(e){return e===r.__BREAK?t.reject(new Error("break")):e}))}))})),o.catch((function(t){if("break"!==t.message)throw t})),o}return t=t.Promise||t,r.__BREAK=e,r}if("undefined"!=typeof Promise)n.forEachAsync=i(Promise);else try{n.forEachAsync=i(r(147))}catch(t){console.warn("This version of node doesn't support promises. Please `npm install --save bluebird` in your project.")}t.forEachAsync=n.forEachAsync.forEachAsync=n.forEachAsync||function(){throw new Error("You did not supply a Promises/A+ implementation. See the warning above.")},t.forEachAsync.create=i}(e||window)},function(t,e){},function(t,e,r){(function(e){var r;r="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=r}).call(this,r(21))},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=r(10),s=r(2),a=i(r(7)),u=i(r(69)),c=r(153),l=r(0);class h extends a.default{constructor(t){super(t);const{data:e}=l.getCredentials(t.id),{datasource:r}=e,{accessToken:n,clientID:i,clientSecret:o,refreshToken:a,vaultID:u}=r;this.accessToken=n,this.refreshToken=a,this._clientID=i,this._clientSecret=o,this._client=null,this._vaultID=u,this._updateID=null,this._createNewClient(),this.type="mybuttercup",s.fireInstantiationHandlers("mybuttercup",this)}get client(){return this._client}changePassword(t,e){return n(this,void 0,void 0,(function*(){const{data:{passwordToken:r},masterPassword:n}=l.getCredentials(t.id);if(e)return yield this._client.testPasswordChange(r),!0;yield this._client.changePassword(n,r)}))}getAttachment(t,e){return n(this,void 0,void 0,(function*(){const{data:t}=yield this.client.fetchAttachment(e);return t}))}getAvailableStorage(){return n(this,void 0,void 0,(function*(){yield this.client.updateDigestIfRequired();const{storage_total:t,storage_used:e}=this.client.digest;return t-e}))}getTotalStorage(){return n(this,void 0,void 0,(function*(){return yield this.client.updateDigestIfRequired(),this.client.digest.storage_total}))}load(t){return this.client.fetchUserVault().then(({archive:t,updateID:e})=>{this._updateID=e,this.setContent(t)}).catch(t=>{throw new o.Layerr(t,"Failed retrieving vault contents")}).then(()=>super.load(t))}localDiffersFromRemote(t,e){return this.client.fetchUserVaultDetails().then(({updateID:r})=>r!==this._updateID||(this.setContent(""),this.load(t).then(({Format:t,history:r})=>{if(r.format!==t.getFormatID())throw new Error("Vault format mismatch");return t.historiesDiffer(e,r)}))).catch(t=>{throw new o.Layerr(t,"Failed comparing remote/local vault status")})}putAttachment(t,e,r,i){return n(this,void 0,void 0,(function*(){const{name:t,type:n}=i;yield this.client.uploadAttachment(e,t,n,r)}))}removeAttachment(t,e){return n(this,void 0,void 0,(function*(){yield this.client.deleteAttachment(e)}))}save(t,e){const r=Object.create(null,{save:{get:()=>super.save}});return n(this,void 0,void 0,(function*(){const n=c.generateNewUpdateID(),i=yield r.save.call(this,t,e);try{yield this.client.writeUserArchive(i,this._updateID,n)}catch(t){throw new o.Layerr(t,"Failed uploading new vault contents")}return this._updateID=n,i}))}supportsAttachments(){return!0}supportsPasswordChange(){return!0}updateInsights(t){return n(this,void 0,void 0,(function*(){Object.keys(t).length<=0||(yield this._client.writeInsights(t))}))}updateTokens(t,e,r=!0){const{data:n}=l.getCredentials(this.credentials.id);n.datasource.accessToken=t,n.datasource.refreshToken=e,this.accessToken=t,this.refreshToken=e,r&&(this.client._accessToken=t,this.client._refreshToken=e),this.emit("updated")}_createNewClient(){this.client&&this.client.off("tokensUpdated",this._onTokensUpdated),this._onTokensUpdated=()=>{this.updateTokens(this.client.accessToken,this.client.refreshToken,!1)},this._client=new u.default(this._clientID,this._clientSecret,this.accessToken,this.refreshToken),this._client.on("tokensUpdated",this._onTokensUpdated),this.emit("updatedClient",this._client)}}e.default=h,s.registerDatasource("mybuttercup",h)},function(t,e){},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.OAUTH_TOKEN_URI=e.OAUTH_REDIRECT_URI=e.OAUTH_AUTHORISE_URI=e.API_SHARES=e.API_OWN_PASS_CHANGE_VERIFY=e.API_OWN_PASS_CHANGE=e.API_OWN_ORGS=e.API_OWN_DIGEST=e.API_OWN_ARCHIVE_DETAILS=e.API_OWN_ARCHIVE=e.API_ORG_USERS=e.API_INSIGHTS=e.API_ATTACHMENT=void 0;const i=n(r(55)),o="https://my.buttercup.pw",s=i.default(o,"/api/core/v1");e.API_ATTACHMENT=i.default(s,"/attachment/[ATTACHMENT_ID]"),e.API_INSIGHTS=i.default(s,"/insights"),e.API_ORG_USERS=i.default(s,"/organisation/[ORG_ID]/users"),e.API_OWN_ARCHIVE=i.default(s,"/own/archive"),e.API_OWN_ARCHIVE_DETAILS=i.default(s,"/own/archive/details"),e.API_OWN_DIGEST=i.default(s,"/own/digest"),e.API_OWN_ORGS=i.default(s,"/own/orgs"),e.API_OWN_PASS_CHANGE=i.default(s,"/own/password"),e.API_OWN_PASS_CHANGE_VERIFY=i.default(s,"/own/password/preflight"),e.API_SHARES=i.default(s,"/shares"),e.OAUTH_AUTHORISE_URI=o+"/oauth/authorize",e.OAUTH_REDIRECT_URI=o+"/oauth/authorized/",e.OAUTH_TOKEN_URI=o+"/oauth/token"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTypedArray=void 0,e.isTypedArray=function(t){return/^\[object (Ui|I)nt(8|16|32)(Clamped)?Array\]$/.test(Object.prototype.toString.call(t))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateNewUpdateID=void 0,e.generateNewUpdateID=function(){return Math.floor(2147483647*Math.random())}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isVaultFacade=e.isOTPURI=void 0;const n=/^otpauth:\/\/[ht]otp\/[^\s]+$/i;e.isOTPURI=function(t){return n.test(t)},e.isVaultFacade=function(t){return!(!t||"object"!=typeof t)&&"vault"===t.type&&"string"==typeof t.id&&Array.isArray(t.entries)&&Array.isArray(t.groups)}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(r(156)),s=i(r(157)),a=r(26),u=r(27),c=r(25),l=i(r(20));function h(t){const e=/^((https?|ftp):\/\/)?([^\/]+)/i.exec(t);return e&&e[3]||""}e.default=class{constructor(t,e=new l.default){this._entries=[],this._fuse=null,this._results=[],this._scores={},this._vaults=t,this._memory=e}get results(){return this._results}incrementScore(t,e,r){return n(this,void 0,void 0,(function*(){const n=yield this._memory.getValue("bcup_search_"+t);let i={};if(n)try{i=JSON.parse(n)}catch(t){}const o=h(r);o&&(i[e]=i[e]||{},i[e][o]=i[e][o]?i[e][o]+1:1,yield this._memory.setValue("bcup_search_"+t,JSON.stringify(i)))}))}prepare(){return n(this,void 0,void 0,(function*(){this._entries=[],this._scores={};for(const t of this._vaults){const e=yield this._memory.getValue("bcup_search_"+t.id);let r={};if(e)try{const n=JSON.parse(e);r=this._scores[t.id]=n}catch(t){}const{entries:n}=a.createVaultFacade(t,{includeTrash:!1});this._entries.push(...n.map(e=>{const n=u.fieldsToProperties(e.fields),i=c.getEntryURLs(n,c.EntryURLType.General);return{id:e.id,properties:n,urls:i,vaultID:t.id,domainScores:r[e.id]||{}}}))}}))}searchByTerm(t){return this._fuse=new o.default(this._entries,{includeScore:!0,keys:[{name:"properties.title",weight:.6},{name:"properties.username",weight:.25},{name:"urls",weight:.15}],shouldSort:!0,threshold:.5}),this._results=this._fuse.search(t).map(t=>t.item),this._results}searchByURL(t){const e=h(t);if(!e)return this._results=[],this._results;const r=this._entries.reduce((r,n)=>{let i=1/0;const o=n.urls.reduce((r,n)=>{const o=h(n);if(!o)return r;if(!function(t,e){return t===e||(t.length>e.length?t.indexOf(e)===t.length-e.length:e.indexOf(t)===e.length-t.length)}(o,e))return r;const a=s.default.get(n,t);return a<i?(i=a,n):r},null);if(!o)return r;const a=h(o);return[...r,{item:n,score:i,url:o,domainScore:Math.max(n.domainScores[e]||0,n.domainScores[a]||0)}]},[]);return this._results=r.sort((t,e)=>t.domainScore>e.domainScore?-1:e.domainScore>e.domainScore||t.score>e.score?1:e.score>t.score?-1:0).map(t=>t.item),this._results}}},function(t,e,r){"use strict";function n(t){return Array.isArray?Array.isArray(t):"[object Array]"===l(t)}function i(t){return"string"==typeof t}function o(t){return"number"==typeof t}function s(t){return!0===t||!1===t||function(t){return a(t)&&null!==t}(t)&&"[object Boolean]"==l(t)}function a(t){return"object"==typeof t}function u(t){return null!=t}function c(t){return!t.trim().length}function l(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}r.r(e);const h=Object.prototype.hasOwnProperty;class d{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach(t=>{let r=f(t);e+=r.weight,this._keys.push(r),this._keyMap[r.id]=r,e+=r.weight}),this._keys.forEach(t=>{t.weight/=e})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function f(t){let e=null,r=null,o=null,s=1;if(i(t)||n(t))o=t,e=p(t),r=g(t);else{if(!h.call(t,"name"))throw new Error("Missing name property in key");const n=t.name;if(o=n,h.call(t,"weight")&&(s=t.weight,s<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(n));e=p(n),r=g(n)}return{path:e,id:r,weight:s,src:o}}function p(t){return n(t)?t:t.split(".")}function g(t){return n(t)?t.join("."):t}var y={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function(t,e){let r=[],a=!1;const c=(t,e,l)=>{if(e[l]){const h=t[e[l]];if(!u(h))return;if(l===e.length-1&&(i(h)||o(h)||s(h)))r.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(h));else if(n(h)){a=!0;for(let t=0,r=h.length;t<r;t+=1)c(h[t],e,l+1)}else e.length&&c(h,e,l+1)}else r.push(t)};return c(t,i(e)?e.split("."):e,0),a?r:r[0]},ignoreLocation:!1,ignoreFieldNorm:!1};const m=/[^ ]+/g;class v{constructor({getFn:t=y.getFn}={}){this.norm=function(t=3){const e=new Map;return{get(r){const n=r.match(m).length;if(e.has(n))return e.get(n);const i=parseFloat((1/Math.sqrt(n)).toFixed(t));return e.set(n,i),i},clear(){e.clear()}}}(3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((t,e)=>{this._keysMap[t.id]=e})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,i(this.docs[0])?this.docs.forEach((t,e)=>{this._addString(t,e)}):this.docs.forEach((t,e)=>{this._addObject(t,e)}),this.norm.clear())}add(t){const e=this.size();i(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,r=this.size();e<r;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!u(t)||c(t))return;let r={v:t,i:e,n:this.norm.get(t)};this.records.push(r)}_addObject(t,e){let r={i:e,$:{}};this.keys.forEach((e,o)=>{let s=this.getFn(t,e.path);if(u(s))if(n(s)){let t=[];const e=[{nestedArrIndex:-1,value:s}];for(;e.length;){const{nestedArrIndex:r,value:o}=e.pop();if(u(o))if(i(o)&&!c(o)){let e={v:o,i:r,n:this.norm.get(o)};t.push(e)}else n(o)&&o.forEach((t,r)=>{e.push({nestedArrIndex:r,value:t})})}r.$[o]=t}else if(!c(s)){let t={v:s,n:this.norm.get(s)};r.$[o]=t}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function _(t,e,{getFn:r=y.getFn}={}){const n=new v({getFn:r});return n.setKeys(t.map(f)),n.setSources(e),n.create(),n}function b(t,e){const r=t.matches;e.matches=[],u(r)&&r.forEach(t=>{if(!u(t.indices)||!t.indices.length)return;const{indices:r,value:n}=t;let i={indices:r,value:n};t.key&&(i.key=t.key.src),t.idx>-1&&(i.refIndex=t.idx),e.matches.push(i)})}function w(t,e){e.score=t.score}function E(t,{errors:e=0,currentLocation:r=0,expectedLocation:n=0,distance:i=y.distance,ignoreLocation:o=y.ignoreLocation}={}){const s=e/t.length;if(o)return s;const a=Math.abs(n-r);return i?s+a/i:a?1:s}function A(t,e,r,{location:n=y.location,distance:i=y.distance,threshold:o=y.threshold,findAllMatches:s=y.findAllMatches,minMatchCharLength:a=y.minMatchCharLength,includeMatches:u=y.includeMatches,ignoreLocation:c=y.ignoreLocation}={}){if(e.length>32)throw new Error("Pattern length exceeds max of 32.");const l=e.length,h=t.length,d=Math.max(0,Math.min(n,h));let f=o,p=d;const g=a>1||u,m=g?Array(h):[];let v;for(;(v=t.indexOf(e,p))>-1;){let t=E(e,{currentLocation:v,expectedLocation:d,distance:i,ignoreLocation:c});if(f=Math.min(t,f),p=v+l,g){let t=0;for(;t<l;)m[v+t]=1,t+=1}}p=-1;let _=[],b=1,w=l+h;const A=1<<l-1;for(let n=0;n<l;n+=1){let o=0,a=w;for(;o<a;)E(e,{errors:n,currentLocation:d+a,expectedLocation:d,distance:i,ignoreLocation:c})<=f?o=a:w=a,a=Math.floor((w-o)/2+o);w=a;let u=Math.max(1,d-a+1),y=s?h:Math.min(d+a,h)+l,v=Array(y+2);v[y+1]=(1<<n)-1;for(let o=y;o>=u;o-=1){let s=o-1,a=r[t.charAt(s)];if(g&&(m[s]=+!!a),v[o]=(v[o+1]<<1|1)&a,n&&(v[o]|=(_[o+1]|_[o])<<1|1|_[o+1]),v[o]&A&&(b=E(e,{errors:n,currentLocation:s,expectedLocation:d,distance:i,ignoreLocation:c}),b<=f)){if(f=b,p=s,p<=d)break;u=Math.max(1,2*d-p)}}if(E(e,{errors:n+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:c})>f)break;_=v}const x={isMatch:p>=0,score:Math.max(.001,b)};if(g){const t=function(t=[],e=y.minMatchCharLength){let r=[],n=-1,i=-1,o=0;for(let s=t.length;o<s;o+=1){let s=t[o];s&&-1===n?n=o:s||-1===n||(i=o-1,i-n+1>=e&&r.push([n,i]),n=-1)}return t[o-1]&&o-n>=e&&r.push([n,o-1]),r}(m,a);t.length?u&&(x.indices=t):x.isMatch=!1}return x}function x(t){let e={};for(let r=0,n=t.length;r<n;r+=1){const i=t.charAt(r);e[i]=(e[i]||0)|1<<n-r-1}return e}class S{constructor(t,{location:e=y.location,threshold:r=y.threshold,distance:n=y.distance,includeMatches:i=y.includeMatches,findAllMatches:o=y.findAllMatches,minMatchCharLength:s=y.minMatchCharLength,isCaseSensitive:a=y.isCaseSensitive,ignoreLocation:u=y.ignoreLocation}={}){if(this.options={location:e,threshold:r,distance:n,includeMatches:i,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:a,ignoreLocation:u},this.pattern=a?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(t,e)=>{this.chunks.push({pattern:t,alphabet:x(t),startIndex:e})},l=this.pattern.length;if(l>32){let t=0;const e=l%32,r=l-e;for(;t<r;)c(this.pattern.substr(t,32),t),t+=32;if(e){const t=l-32;c(this.pattern.substr(t),t)}}else c(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:r}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let e={isMatch:!0,score:0};return r&&(e.indices=[[0,t.length-1]]),e}const{location:n,distance:i,threshold:o,findAllMatches:s,minMatchCharLength:a,ignoreLocation:u}=this.options;let c=[],l=0,h=!1;this.chunks.forEach(({pattern:e,alphabet:d,startIndex:f})=>{const{isMatch:p,score:g,indices:y}=A(t,e,d,{location:n+f,distance:i,threshold:o,findAllMatches:s,minMatchCharLength:a,includeMatches:r,ignoreLocation:u});p&&(h=!0),l+=g,p&&y&&(c=[...c,...y])});let d={isMatch:h,score:h?l/this.chunks.length:1};return h&&r&&(d.indices=c),d}}class T{constructor(t){this.pattern=t}static isMultiMatch(t){return P(t,this.multiRegex)}static isSingleMatch(t){return P(t,this.singleRegex)}search(){}}function P(t,e){const r=t.match(e);return r?r[1]:null}class O extends T{constructor(t,{location:e=y.location,threshold:r=y.threshold,distance:n=y.distance,includeMatches:i=y.includeMatches,findAllMatches:o=y.findAllMatches,minMatchCharLength:s=y.minMatchCharLength,isCaseSensitive:a=y.isCaseSensitive}={}){super(t),this._bitapSearch=new S(t,{location:e,threshold:r,distance:n,includeMatches:i,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:a})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class C extends T{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,r=0;const n=[],i=this.pattern.length;for(;(e=t.indexOf(this.pattern,r))>-1;)r=e+i,n.push([e,r-1]);const o=!!n.length;return{isMatch:o,score:o?1:0,indices:n}}}const I=[class extends T{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},C,class extends T{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends T{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends T{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends T{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends T{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},O],k=I.length,D=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/,j=new Set([O.type,C.type]),F=[];function R(t,e){for(let r=0,n=F.length;r<n;r+=1){let n=F[r];if(n.condition(t,e))return new n(t,e)}return new S(t,e)}const N="$and",M="$path",U=t=>!(!t[N]&&!t.$or),L=t=>({[N]:Object.keys(t).map(e=>({[e]:t[e]}))});function B(t,e,{auto:r=!0}={}){const o=t=>{let s=Object.keys(t);const u=(t=>!!t[M])(t);if(!u&&s.length>1&&!U(t))return o(L(t));if((t=>!n(t)&&a(t)&&!U(t))(t)){const n=u?t[M]:s[0],o=u?t.$val:t[n];if(!i(o))throw new Error((t=>"Invalid value for key "+t)(n));const a={keyId:g(n),pattern:o};return r&&(a.searcher=R(o,e)),a}let c={children:[],operator:s[0]};return s.forEach(e=>{const r=t[e];n(r)&&r.forEach(t=>{c.children.push(o(t))})}),c};return U(t)||(t=L(t)),o(t)}class G{constructor(t,e={},r){this.options={...y,...e},this.options.useExtendedSearch,this._keyStore=new d(this.options.keys),this.setCollection(t,r)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof v))throw new Error("Incorrect 'index' type");this._myIndex=e||_(this.options.keys,this._docs,{getFn:this.options.getFn})}add(t){u(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=(()=>!1)){const e=[];for(let r=0,n=this._docs.length;r<n;r+=1){const n=this._docs[r];t(n,r)&&(this.removeAt(r),r-=1,e.push(n))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:r,includeScore:n,shouldSort:s,sortFn:a,ignoreFieldNorm:u}=this.options;let c=i(t)?i(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=y.ignoreFieldNorm}){t.forEach(t=>{let r=1;t.matches.forEach(({key:t,norm:n,score:i})=>{const o=t?t.weight:null;r*=Math.pow(0===i&&o?Number.EPSILON:i,(o||1)*(e?1:n))}),t.score=r})}(c,{ignoreFieldNorm:u}),s&&c.sort(a),o(e)&&e>-1&&(c=c.slice(0,e)),function(t,e,{includeMatches:r=y.includeMatches,includeScore:n=y.includeScore}={}){const i=[];return r&&i.push(b),n&&i.push(w),t.map(t=>{const{idx:r}=t,n={item:e[r],refIndex:r};return i.length&&i.forEach(e=>{e(t,n)}),n})}(c,this._docs,{includeMatches:r,includeScore:n})}_searchStringList(t){const e=R(t,this.options),{records:r}=this._myIndex,n=[];return r.forEach(({v:t,i:r,n:i})=>{if(!u(t))return;const{isMatch:o,score:s,indices:a}=e.searchIn(t);o&&n.push({item:t,idx:r,matches:[{score:s,value:t,norm:i,indices:a}]})}),n}_searchLogical(t){const e=B(t,this.options),r=(t,e,n)=>{if(!t.children){const{keyId:r,searcher:i}=t,o=this._findMatches({key:this._keyStore.get(r),value:this._myIndex.getValueForItemAtKeyId(e,r),searcher:i});return o&&o.length?[{idx:n,item:e,matches:o}]:[]}switch(t.operator){case N:{const i=[];for(let o=0,s=t.children.length;o<s;o+=1){const s=t.children[o],a=r(s,e,n);if(!a.length)return[];i.push(...a)}return i}case"$or":{const i=[];for(let o=0,s=t.children.length;o<s;o+=1){const s=t.children[o],a=r(s,e,n);if(a.length){i.push(...a);break}}return i}}},n=this._myIndex.records,i={},o=[];return n.forEach(({$:t,i:n})=>{if(u(t)){let s=r(e,t,n);s.length&&(i[n]||(i[n]={idx:n,item:t,matches:[]},o.push(i[n])),s.forEach(({matches:t})=>{i[n].matches.push(...t)}))}}),o}_searchObjectList(t){const e=R(t,this.options),{keys:r,records:n}=this._myIndex,i=[];return n.forEach(({$:t,i:n})=>{if(!u(t))return;let o=[];r.forEach((r,n)=>{o.push(...this._findMatches({key:r,value:t[n],searcher:e}))}),o.length&&i.push({idx:n,item:t,matches:o})}),i}_findMatches({key:t,value:e,searcher:r}){if(!u(e))return[];let i=[];if(n(e))e.forEach(({v:e,i:n,n:o})=>{if(!u(e))return;const{isMatch:s,score:a,indices:c}=r.searchIn(e);s&&i.push({score:a,key:t,value:e,idx:n,norm:o,indices:c})});else{const{v:n,n:o}=e,{isMatch:s,score:a,indices:u}=r.searchIn(n);s&&i.push({score:a,key:t,value:n,norm:o,indices:u})}return i}}G.version="6.4.1",G.createIndex=_,G.parseIndex=function(t,{getFn:e=y.getFn}={}){const{keys:r,records:n}=t,i=new v({getFn:e});return i.setKeys(r),i.setIndexRecords(n),i},G.config=y,G.parseQuery=B,function(...t){F.push(...t)}(class{constructor(t,{isCaseSensitive:e=y.isCaseSensitive,includeMatches:r=y.includeMatches,minMatchCharLength:n=y.minMatchCharLength,findAllMatches:i=y.findAllMatches,location:o=y.location,threshold:s=y.threshold,distance:a=y.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:r,minMatchCharLength:n,findAllMatches:i,location:o,threshold:s,distance:a},this.pattern=e?t:t.toLowerCase(),this.query=function(t,e={}){return t.split("|").map(t=>{let r=t.trim().split(D).filter(t=>t&&!!t.trim()),n=[];for(let t=0,i=r.length;t<i;t+=1){const i=r[t];let o=!1,s=-1;for(;!o&&++s<k;){const t=I[s];let r=t.isMultiMatch(i);r&&(n.push(new t(r,e)),o=!0)}if(!o)for(s=-1;++s<k;){const t=I[s];let r=t.isSingleMatch(i);if(r){n.push(new t(r,e));break}}}return n})}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:n}=this.options;t=n?t:t.toLowerCase();let i=0,o=[],s=0;for(let n=0,a=e.length;n<a;n+=1){const a=e[n];o.length=0,i=0;for(let e=0,n=a.length;e<n;e+=1){const n=a[e],{isMatch:u,indices:c,score:l}=n.search(t);if(!u){s=0,i=0,o.length=0;break}if(i+=1,s+=l,r){const t=n.constructor.type;j.has(t)?o=[...o,...c]:o.push(c)}}if(i){let t={isMatch:!0,score:s/i};return r&&(t.indices=o),t}}return{isMatch:!1,score:1}}}),e.default=G},function(t,e,r){(function(t){var n;!function(){"use strict";var i;try{i="undefined"!=typeof Intl&&void 0!==Intl.Collator?Intl.Collator("generic",{sensitivity:"base"}):null}catch(t){console.log("Collator could not be initialized and wouldn't be used")}var o=[],s=[],a={get:function(t,e,r){var n,a,u,c,l,h,d=r&&i&&r.useCollator,f=t.length,p=e.length;if(0===f)return p;if(0===p)return f;for(u=0;u<p;++u)o[u]=u,s[u]=e.charCodeAt(u);if(o[p]=p,d)for(u=0;u<f;++u){for(a=u+1,c=0;c<p;++c)n=a,h=0===i.compare(t.charAt(u),String.fromCharCode(s[c])),(a=o[c]+(h?0:1))>(l=n+1)&&(a=l),a>(l=o[c+1]+1)&&(a=l),o[c]=n;o[c]=a}else for(u=0;u<f;++u){for(a=u+1,c=0;c<p;++c)n=a,h=t.charCodeAt(u)===s[c],(a=o[c]+(h?0:1))>(l=n+1)&&(a=l),a>(l=o[c+1]+1)&&(a=l),o[c]=n;o[c]=a}return a}};null!==r(159)&&r(160)?void 0===(n=function(){return a}.call(e,r,e,t))||(t.exports=n):null!==t&&void 0!==e&&t.exports===e?t.exports=a:"undefined"!=typeof self&&"function"==typeof self.postMessage&&"function"==typeof self.importScripts?self.Levenshtein=a:"undefined"!=typeof window&&null!==window&&(window.Levenshtein=a)}()}).call(this,r(158)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){(function(e){t.exports=e}).call(this,{})}])},194:function(t,e){!function(t){if(t&&t.log){var e,r="Black Blue Cyan Gray Green Magenta Red White Yellow".split(" "),n=/<(css|b|i)(?:=['"](.*?)['"])?>(.*?)<\/(?:css|b|i)>/gi,i=/([a-z\-]+)\s?:\s?([^;'"]+);?/gi,o=/%[sdifoO]/g,s=/<img=['"](.*?)['"]>/gi,a="background",u=function(t){var r=[t];return"string"==typeof t&&(t=t.replace(s,(function(t,r){var n,o,s,u,c=["font-size:1px"];return r.replace(i,(function(t,e,r){switch(e){case a:case a+"-image":c.push(e+":"+r,a+"-repeat:no-repeat");break;case"width":n=r;break;case"height":o=r,c.push("line-height:"+r)}})),u=Math.ceil(parseInt(n)/2),s=Math.ceil(parseInt(o)/2),c.push(a+"-size:"+n+" "+o),c.push("padding:"+s+"px "+u+"px"),e("",c.join(";"))})),r[0]=t.replace(n,(function(t,e,n,i){switch(n=n||"",i=i.replace(o,""),e){case"b":n+=";font-weight:bold";break;case"i":n+=";font-style:italic"}return r.push(n,""),"%c"+i+"%c"}))),r};t.colors={},r.forEach((function(r){t.colors[r.toLowerCase()]=function(t){return e(t,"color:"+r)},t.colors["bg"+r]=function(t){return e(t,a+"-color:"+r)}})),t.style=function(){var e=[].slice.call(arguments);t.log.apply(t,u(e.shift()).concat(e))},t.style.wrap=e=function(t,e){return'<css="'+e+'">'+t+"</css>"}}}(window.console)},310:function(t,e,r){t.exports=r(423)},321:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},322:function(t,e){const r=/^@@/;let n=0;t.exports={ACTION_TYPE_SET_STATE:"@@reduxBrowserSync/setState",REQUEST_TYPE_SYNC_EMITFULL:"@@reduxBrowserSync/syncReqEmitFull",REQUEST_TYPE_SYNC_FULL:"@@reduxBrowserSync/syncFullToTab",REQUEST_TYPE_SYNC_TO_BG:"@@reduxBrowserSync/syncToBg",REQUEST_TYPE_SYNC_TO_TAB:"@@reduxBrowserSync/syncToTab",canSendAction:function(t){return(!t||!r.test(t.type))&&"number"!=typeof t["@@actionSync"]},markActionAsSynchronised:function(t){t["@@actionSync"]=n,n+=1}}},389:function(t,e,r){"use strict";(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.a=r}).call(this,r(73))},40:function(t,e,r){"use strict";r.d(e,"d",(function(){return T})),r.d(e,"c",(function(){return O})),r.d(e,"b",(function(){return I})),r.d(e,"a",(function(){return j}));var n=r(389),i="object"==typeof self&&self&&self.Object===Object&&self,o=(n.a||i||Function("return this")()).Symbol,s=Object.prototype,a=s.hasOwnProperty,u=s.toString,c=o?o.toStringTag:void 0;var l=function(t){var e=a.call(t,c),r=t[c];try{t[c]=void 0;var n=!0}catch(t){}var i=u.call(t);return n&&(e?t[c]=r:delete t[c]),i},h=Object.prototype.toString;var d=function(t){return h.call(t)},f=o?o.toStringTag:void 0;var p=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":f&&f in Object(t)?l(t):d(t)};var g=function(t,e){return function(r){return t(e(r))}}(Object.getPrototypeOf,Object);var y=function(t){return null!=t&&"object"==typeof t},m=Function.prototype,v=Object.prototype,_=m.toString,b=v.hasOwnProperty,w=_.call(Object);var E=function(t){if(!y(t)||"[object Object]"!=p(t))return!1;var e=g(t);if(null===e)return!0;var r=b.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&_.call(r)==w},A=r(310),x=r.n(A),S="@@redux/INIT";function T(t,e,r){var n;if("function"==typeof e&&void 0===r&&(r=e,e=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(T)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var i=t,o=e,s=[],a=s,u=!1;function c(){a===s&&(a=s.slice())}function l(){return o}function h(t){if("function"!=typeof t)throw new Error("Expected listener to be a function.");var e=!0;return c(),a.push(t),function(){if(e){e=!1,c();var r=a.indexOf(t);a.splice(r,1)}}}function d(t){if(!E(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,o=i(o,t)}finally{u=!1}for(var e=s=a,r=0;r<e.length;r++){(0,e[r])()}return t}return d({type:S}),(n={dispatch:d,subscribe:h,getState:l,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");i=t,d({type:S})}})[x.a]=function(){var t,e=h;return(t={subscribe:function(t){if("object"!=typeof t)throw new TypeError("Expected the observer to be an object.");function r(){t.next&&t.next(l())}return r(),{unsubscribe:e(r)}}})[x.a]=function(){return this},t},n}function P(t,e){var r=e&&e.type;return"Given action "+(r&&'"'+r.toString()+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function O(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++){var i=e[n];0,"function"==typeof t[i]&&(r[i]=t[i])}var o=Object.keys(r);var s=void 0;try{!function(t){Object.keys(t).forEach((function(e){var r=t[e];if(void 0===r(void 0,{type:S}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+S+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(t){s=t}return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(s)throw s;for(var n=!1,i={},a=0;a<o.length;a++){var u=o[a],c=r[u],l=t[u],h=c(l,e);if(void 0===h){var d=P(u,e);throw new Error(d)}i[u]=h,n=n||h!==l}return n?i:t}}function C(t,e){return function(){return e(t.apply(void 0,arguments))}}function I(t,e){if("function"==typeof t)return C(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(t),n={},i=0;i<r.length;i++){var o=r[i],s=t[o];"function"==typeof s&&(n[o]=C(s,e))}return n}function k(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}var D=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};function j(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return function(r,n,i){var o,s=t(r,n,i),a=s.dispatch,u={getState:s.getState,dispatch:function(t){return a(t)}};return o=e.map((function(t){return t(u)})),a=k.apply(void 0,o)(s.dispatch),D({},s,{dispatch:a})}}}},423:function(t,e,r){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0});var i,o,s=r(424),a=(i=s)&&i.__esModule?i:{default:i};o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:n;var u=(0,a.default)(o);e.default=u}).call(this,r(73),r(321)(t))},424:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,r=t.Symbol;"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable";return e}},73:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},94:function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u,c=[],l=!1,h=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&f())}function f(){if(!l){var t=a(d);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new p(t,e)),1!==c.length||l||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}}]);